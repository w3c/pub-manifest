<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
	<head>
		<meta charset="utf-8" />
		<title>Publication Manifest</title>
		<script src="https://www.w3.org/Tools/respec/respec-w3c" class="remove" defer="defer"></script>
		<script src="common/js/biblio.js" class="remove"></script>
		<script src="common/js/idllink.js" class="remove"></script>
		<script src="https://unpkg.com/reqlist/lib/reqlist.js" class="remove"></script>
		<link href="https://unpkg.com/reqlist/lib/reqlist.css" class="removeOnSave" rel="stylesheet" type="text/css" />
		<link href="common/css/common.css" rel="stylesheet" type="text/css" />
		<script class="remove">
			//<![CDATA[
			var respecConfig = {
				preProcess: [ prepare_reqlist ],
				postProcess: [ convert_dfn_to_link, add_reqlist_button],
				group: "publishing",
				specStatus: "ED",
				prEnd: "2020-10-30",
				shortName: "pub-manifest",
				previousPublishDate: "2020-10-01",
				previousMaturity: "PR",
				implementationReportURI: "https://www.w3.org/publishing/groups/publ-wg/implementation/results.html",
				crEnd: "2020-03-31",
				updateableRec: true,
				edDraftURI: "https://w3c.github.io/pub-manifest/",
				errata: "https://w3c.github.io/pub-manifest/errata/",
				editors:[ {
					"name": "Matt Garrish",
					"company": "DAISY Consortium",
					"companyURL": "https://daisy.org",
					"w3cid": 51655
				}, {
					"name": "Ivan Herman",
					"url": "https://www.w3.org/People/Ivan/",
					"company": "W3C",
					"w3cid": 7382,
					"orcid": "0000-0003-0782-2704",
					"companyURL": "https://www.w3.org",
				}],
				processVersion: 2020,
				includePermalinks: true,
				permalinkEdge: true,
				permalinkHide: false,
				pluralize: true,
				diffTool: "http://www.aptest.com/standards/htmldiff/htmldiff.pl",
				wgPublicList: "public-publ-wg",
				github: {
					repoURL: "https://github.com/w3c/pub-manifest/",
					branch: "master"
				},
				localBiblio: localBiblio,
				alternateFormats: [{
				    "uri": "pub-manifest.epub",
				    "label": "EPUB"
				}]
			};//]]>
	  </script>
		<style>
			var {
				color: brown;
			}
			
			code.json {
				color: teal;
			}</style>
	</head>
	<body>
		<section id="abstract">
			<p>This specification defines a general manifest format for expressing information about a digital
				publication. It uses [[schema.org]] metadata augmented to include various structural properties about
				publications, serialized in [[json-ld11]], to enable interoperability between publishing formats while
				accommodating variances in the information that needs to be expressed.</p>
		</section>
		<section id="sotd"></section>
		<section id="intro">
			<h2>Introduction</h2>

			<section id="scope">
				<h3>Scope</h3>

				<p>This specification defines a general manifest format to describe publications. It is designed to be
					adaptable to the needs of specific areas of publishing, such as audiobook production, by specifying
					a modular approach for creating specializations.</p>

				<p>This specification is also intended to facilitate different user agent architectures. While it is
					expected that traditional Web user agents (browsers) will be able to consume a publication manifest,
					this should not limit the capabilities of any other possible type of user agent (e.g., applications,
					whether standalone or running within a user agent, or even publications that include their own user
					interface).</p>

				<p>This specification does not define how user agents are expected to render publications that use the
					manifest format.</p>
			</section>

			<section id="manifest-format" class="informative">
				<h4>Manifest Format</h4>

				<p>A <a>digital publication</a> is described by its <a>manifest</a>, which provides a set of properties
					expressed using a specific shape of JSON-LD&#160;[[json-ld11]] (a variant of JSON&#160;[[ecma-404]]
					for linked data).</p>

				<p>The manifest is what enables user agents to understand the <a>bounds</a> of <a>digital
						publication</a> and the connection between its resources. It includes metadata that describes
					the digital publication, as a publication has an identity and nature beyond its constituent
					resources. The manifest also provides a <a href="#resource-list">list of resources</a> that belong
					to the digital publication and a <a href="#default-reading-order">default reading order</a>, which
					is how it connects resources into a single contiguous work.</p>

				<p>The properties of the manifest describe the basic information a user agent requires to process and
					render a publication. For ease of understanding, these properties are categorized as follows:</p>

				<dl>
					<dt>
						<a href="#descriptive-properties">Descriptive properties</a>
					</dt>
					<dd>
						<p>Descriptive properties describe aspects of a digital publication, such as its <a
								href="#pub-title">title</a>, <a href="#creators">creator</a>, and <a href="#inLanguage"
								>language</a>.</p>
					</dd>
					<dt>
						<a href="#resource-categorization-properties">Resource categorization properties</a>
					</dt>
					<dd>
						<p>Resource categorization properties describe or identify common sets of resources, such as the
								<a href="#resource-list">resource list</a> and <a href="#default-reading-order">default
								reading order</a>. These properties refer to one or more resources, such as HTML
							documents, images, scripts, and metadata records.</p>
					</dd>
				</dl>

				<p>The <a>manifest</a> also identifies key resources of a digital publication using link relations.
					These relations are defined in the <a href="#linkedresource-rel"><code>rel</code> property</a> of
							<a><code>LinkedResource</code></a> objects (i.e., the JSON objects that represent each
					resource in the default reading order, resource list, and links sections).</p>

				<p>The types of resources these relations identify are categorized as follows:</p>

				<dl>
					<dt>
						<a href="#informative-rel">Informative resources</a>
					</dt>
					<dd>
						<p>Informative resources are resources that contain additional information about the
							publication, such as its <a href="#privacy-policy">privacy policy</a>, <a
								href="#accessibility-report">accessibility report</a>, or <a href="#preview"
							>preview</a>.</p>
					</dd>
					<dt>
						<a href="#structural-rel">Structural resources</a>
					</dt>
					<dd>
						<p>Structural resources are key meta structures of the publication, such as the <a href="#cover"
								>cover image</a>, <a href="#contents">table of contents</a>, and <a href="#page-list"
								>page list</a>.</p>
					</dd>
				</dl>
			</section>

			<section id="manifest-jsonld">
				<h4>JSON-LD Authoring and Processing</h4>

				<p>This specification defines the publication manifest as a specific "shape" of [[!json-ld11]]. This
					means that the manifest SHOULD be expressed using only the syntactic constructions defined in this
					specification, as opposed to all the possibilities offered by the JSON-LD syntax.</p>

				<p class="note">This shape is also defined, informally, through a JSON schema&#160;[[json-schema]] that
					expresses the constraints defined in this specification. This schema is maintained at <a
						href="https://www.w3.org/ns/pub-schema/manifest/"
					>https://www.w3.org/ns/pub-schema/manifest/</a>.</p>

				<p>The publication manifest also has several authoring flexibilities and compact authoring expressions.
					For example, it is not always required that object types be explicitly authored, as these are
					automatically generated during processing when missing (see <a href="#explicit-implied-objects"></a>
					for more information). An <a>internal representation</a> of the manifest data is defined separately;
					see <a href="#app-internal-rep-data-model"></a> for further details.</p>

				<p>Consequently, a user agent does not have to be a full JSON-LD processor. User agents only need to be
					able to read the manifest's specific shape and internalize the data.</p>
			</section>

			<section id="manifest-schemaorg" class="informative">
				<h4>Relationship to Schema.org</h4>

				<p>Manifest properties, in particular those categorized as <a href="#descriptive-properties">descriptive
						properties</a>, are primarily drawn from <a href="https://schema.org">Schema.org</a> and its <a
						href="https://schema.org/docs/schemas.html">hosted extensions</a>&#160;[[schema.org]].
					Consequently, these properties inherit their syntax and semantics from Schema.org, making manifest
					authoring compatible with Schema.org authoring.</p>

				<p>When a manifest item corresponds to a Schema.org property, its <a href="#manifest-properties"
						>property definition</a> identifies its mapping and includes the defining type (e.g., <a
						href="https://schema.org/CreativeWork">CreativeWork</a> or <a href="https://schema.org/Book"
						>Book</a>) in parentheses.</p>

				<p>Schema.org additionally includes many properties that, though relevant for publishing, are not
					mentioned in this specification. These properties can be used in a manifest as this document defines
					only the minimal set of manifest items (see <a href="#extensibility-manifest-properties"></a>).</p>

				<p>When using additional Schema.org properties, ensure that they are valid for the <a
						href="#publication-types">type of publication</a> specified in the manifest. Properties are
					often available in many Schema.org types, as a result of the inheritance model used by the
					vocabulary, but not all properties are available for all types. For more detailed information about
					which types accept which properties, refer to [[schema.org]].</p>

				<p>More information about using additional Schema.org properties is also available in <a
						href="#publication-types"></a> and <a href="#extensibility-manifest-properties"></a>.</p>
			</section>
		</section>
		<section id="terminology">
			<h3>Terminology</h3>

			<p>This specification depends on the Infra Standard [[!infra]].</p>

			<dl>
				<dt>
					<dfn>Bounds</dfn>
				</dt>
				<dd>
					<p>A <a>digital publication</a> consists of a finite set of resources that represent its content.
						This extent is known as its bounds and is defined within its manifest as described in <a
							href="#publication-resources"></a>.</p>
				</dd>

				<dt>
					<dfn data-lt="digital publications|digital publication's">Digital Publication</dfn>
				</dt>
				<dd>
					<p>A digital publication is any publication authored in a format that uses a <a>profile</a> of the
							<a>manifest</a>.</p>
				</dd>

				<dt>
					<dfn>Internal Representation</dfn>
				</dt>
				<dd>
					<p>The internal representation of a manifest is the data structure created by user agents when they
							<a href="#manifest-processing">process the manifest</a> and remove all possible ambiguities
						and incorporate any missing values that can be inferred from another source.</p>
					<p>It is possible for the information expressed in the manifest to be the equivalent of the internal
						representation created by user agents if there are no ambiguities or missing information.</p>
				</dd>

				<dt>
					<dfn data-lt="Manifests">Manifest</dfn>
				</dt>
				<dd>
					<p>A manifest represents structured information about a publication, such as informative metadata, a
							<a href="#resource-list">list of resources</a>, and a <a>default reading order</a>.</p>
				</dd>

				<dt>
					<dfn data-lt="profiles|profile(s)">Profile</dfn>
				</dt>
				<dd>
					<p>Profiles are publication formats (e.g., audiobooks) that use the <a>manifest</a> format defined
						in this specification to describe their <a>bounds</a> and content. These formats can extend the
						core definition in this specification with profile-specific terms and/or new requirements.</p>
					<p>Although profiles can differ in their structural and content requirements, such variances are
						restricted to maintain a high degree of predictability between formats. (See <a
							href="#extensions"></a>.)</p>
				</dd>
			</dl>
		</section>
		<section id="conformance">
			<p>All algorithm explanations are <em>informative</em>.</p>
		</section>
		<section id="manifest">
			<h2>Publication Manifest</h2>

			<section id="manifest-requirements">
				<h5>Requirements</h5>

				<p>The following properties MUST be set in the manifest:</p>

				<ul>
					<li>
						<a href="#manifest-context">
							<code>context</code>
						</a>
					</li>
					<li>
						<a href="#profile-conformance">
							<code>conformsTo</code>
						</a>
					</li>
				</ul>

				<p>The following properties are RECOMMENDED:</p>

				<ul>
					<li>
						<a href="#publication-types">
							<code>type</code>
						</a>
					</li>
					<li>
						<a href="#canonical-identifier">
							<code>id</code>
						</a>
					</li>
				</ul>

				<p>The priority of all other <a href="#manifest-properties">properties</a> and <a href="#manifest-rel"
						>resource relations</a> is OPTIONAL, but MAY be modified by implementations of the manifest
					format.</p>

				<p class="note">Some properties are implicitly required, as they are compiled from alternative
					information when not explicitly authored. See <a href="#app-internal-rep-data-model"></a> for more
					information.</p>
			</section>

			<section id="properties-value-categories">
				<h3>Value Categories</h3>

				<p>This section describes the categories of values that can be used with properties of the publication
					manifest.</p>

				<section id="value-literal">
					<h4>Literals</h4>

					<p>When a <a href="#manifest-properties">manifest</a> property expects a literal text string &#8212;
						one that is not language-dependent, such as a code value or date &#8212; as its value, the value
						MUST be expressed as a [[!json]] <a href="https://tools.ietf.org/html/rfc4627#section-2.5"
							>string</a>.</p>

					<p>Literal values are not changed <a href="#manifest-processing">during processing of the
							manifest</a>, unlike other values which might be, for example, <a
							href="#explicit-implied-objects">converted to objects</a>.</p>
				</section>

				<section id="value-number">
					<h4>Numbers</h4>

					<p>When a <a href="#manifest-properties">manifest</a> property expects a number as its value, the
						value MUST be expressed as a [[!json]] <a href="https://tools.ietf.org/html/rfc4627#section-2.4"
							>number</a>.</p>
				</section>

				<section id="value-boolean">
					<h4>Booleans</h4>

					<p>When a <a href="#manifest-properties">manifest</a> property expects a boolean as its value, the
						value MUST be expressed as an [[!ecmascript]]&#160;<a
							data-cite="ecmascript#sec-terms-and-definitions-boolean-value">Boolean value</a>
							(<code>true</code> or <code>false</code>).</p>
				</section>

				<section id="explicit-implied-objects">
					<h4>Explicit and Implied Objects</h4>

					<p>Various manifest properties are expected to be expressed as [[!json]]&#160;<a
							href="https://tools.ietf.org/html/rfc4627#section-2.2">objects</a>. Although the use of
						explicit objects is usually advised, the following sections identify cases where it is also
						acceptable to use string values. These strings are automatically translated into objects during
							<a href="#manifest-processing">processing of the manifest</a> by a user agent (the exact
						mapping of text values to objects is included in each definition).</p>

					<section id="value-localizable-string">
						<h5>Localizable Strings</h5>

						<p>When a <a href="#manifest-properties">manifest</a> property expects a localizable text string
							as its value, the value MUST be expressed as one of:</p>

						<ul>
							<li>a [[!json]] <a href="https://tools.ietf.org/html/rfc4627#section-2.5">string</a> value;
								or</li>
							<li>a <a><code>LocalizableString</code></a>.</li>
						</ul>

						<p>A single string value represents an implied object whose <code>value</code> property is the
							string's text and whose language and base direction is determined from other information in
							the manifest.</p>

						<p>As localizable strings are intended to facilitate multiple language representations of a
							value, properties that accept a localizable string always accept an array of these values.
							For this reason, although only a single string or object has to be authored, such values are
							converted to <a href="#value-array">arrays</a> for consistency of processing.</p>

						<p>A <dfn data-lt="LocalizableStrings|localizable string"><code>LocalizableString</code></dfn>
							is a [[!json]]&#160;<a href="https://tools.ietf.org/html/rfc4627#section-2.2">object</a>
							consisting of the following properties:</p>

						<table class="zebra">
							<thead>
								<tr>
									<th>Term</th>
									<th>Description</th>
									<th>Required Value</th>
									<th>Value Category</th>
									<th>[[!schema.org]] Mapping</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>
										<code>value</code>
									</td>
									<td>The value of the localizable string. REQUIRED.</td>
									<td>Text.</td>
									<td>
										<a href="#value-literal">Literal</a>
									</td>
									<td>(None)</td>
								</tr>
								<tr>
									<td>
										<code>language</code>
									</td>
									<td>The language of the value. OPTIONAL.</td>
									<td>A <a href="https://tools.ietf.org/html/bcp47#section-2.2.9">well-formed language
											tag</a>&#160;[[!bcp47]].</td>
									<td>
										<a href="#value-literal">Literal</a>
									</td>
									<td>(None)</td>
								</tr>
								<tr>
									<td>
										<code>direction</code>
									</td>
									<td>The base direction of the value. OPTIONAL.</td>
									<td><code>ltr</code> or <code>rtl</code></td>
									<td>
										<a href="#value-literal">Literal</a>
									</td>
									<td>(None)</td>
								</tr>
							</tbody>
						</table>

						<p>The meanings of the base direction values are:</p>

						<ul>
							<li><code>ltr</code>: indicates that the textual value is explicitly directionally set to
								left-to-right text.</li>
							<li><code>rtl</code>: indicates that the textual value is explicitly directionally set to
								right-to-left text.</li>
						</ul>

						<p> A missing base direction value means that that the textual value is explicitly directionally
							set to the direction of the first character with a strong directionality, following the
							rules of the Unicode Bidirectional Algorithm&#160;[[!bidi]]. </p>

						<aside class="example" title="Set the language of a string">
							<pre>{
    "value"     : "孔子",
    "language"  : "zh"
}</pre>
						</aside>
						<aside class="example" title="Set the language and the base direction of a string">
							<pre>{
    "value"     : "<bdo dir="ltr">HTML היא שפת סימון.</bdo>",
    "language"  : "he",
    "direction" : "rtl"
}</pre>
						</aside>
						<div class="note">
							<p> If the base direction value were not set in the last example, the text would be
								displayed, following the Unicode Bidirectional Algorithm&#160;[[bidi]] and due to the
								presence of a Latin character starting the string, as: </p>
							<p dir="ltr">HTML היא שפת סימון.</p>
							<p> However, that would be incorrect. The extra <code>direction</code> value is necessary to
								control the display to yield: </p>
							<p dir="rtl">HTML היא שפת סימון.</p>
							<p>Note that the <var>value</var> field in the example represents the text as it is stored
								in memory, hence the discrepancy between it and the two renderings depicted here. Text
								editors might also display the JSON value differently (e.g., using the Unicode
								Bidirectional Algorithm only).</p>
							<p>See also the [[string-meta]] document for further explanations and examples.</p>
						</div>
					</section>

					<section id="value-entity">
						<h6>Entities</h6>

						<p>When a <a href="#manifest-properties">manifest</a> property expects an entity (i.e., an
							individual or organization responsible for the various aspects of creation), its value MUST
							be expressed either as:</p>

						<ul>
							<li>a [[!json]] <a href="https://tools.ietf.org/html/rfc4627#section-2.5">string</a> value;
								or</li>
							<li>an <a><code>Entity</code></a>.</li>
						</ul>

						<p>A single string value represents an instance of an <code>Entity</code> object whose
								<code>name</code> property is the string's text and whose <code>type</code> is assumed
							to be <a href="https://schema.org/Person">Person</a>&#160;[[!schema.org]].</p>

						<p>An <dfn data-lt="Entities">Entity</dfn> is defined as an instance of either the
							[[!schema.org]] <a href="https://schema.org/Person"><code>Person</code></a> or <a
								href="https://schema.org/Organization"><code>Organization</code></a> type with the
							following minimal property set:</p>

						<table class="zebra">
							<thead>
								<tr>
									<th>Term</th>
									<th>Description</th>
									<th>Required Value</th>
									<th>Value Category</th>
									<th>[[!schema.org]] Mapping</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td id="entity-type">
										<code>type</code>
									</td>
									<td>The type of entity. OPTIONAL</td>
									<td>One or more Text. Sequence MUST include "<code>Person</code>" or
											"<code>Organization</code>".</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-literal">Literals</a>
									</td>
									<td>(None)</td>
								</tr>
								<tr>
									<td id="entity-name">
										<code>name</code>
									</td>
									<td>Name of the entity. REQUIRED.</td>
									<td>One or more Text.</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-localizable-string"
											>Localizable Strings</a>
									</td>
									<td>
										<a href="https://schema.org/name">
											<code>name</code>
										</a>
									</td>
								</tr>
								<tr>
									<td id="entity-id">
										<code>id</code>
									</td>
									<td>A canonical identifier associated with the entity. OPTIONAL.</td>
									<td>A URL record&#160;[[!url]].</td>
									<td>
										<a href="#value-id">Identifier</a>
									</td>
									<td>(None)</td>
								</tr>
								<tr>
									<td id="entity-url">
										<code>url</code>
									</td>
									<td>An address associated with the entity. OPTIONAL.</td>
									<td>A valid URL string&#160;[[!url]].</td>
									<td>
										<a href="#value-url">URL</a>
									</td>
									<td>
										<a href="https://schema.org/url">
											<code>url</code>
										</a>
									</td>
								</tr>
								<tr>
									<td id="entity-identifier">
										<code>identifier</code>
									</td>
									<td>An identifier associated with the entity (e.g., ORCID). OPTIONAL.</td>
									<td>One or more Text.</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-literal">Literals</a>
									</td>
									<td>
										<a href="https://schema.org/identifier">
											<code>identifier</code>
										</a>
									</td>
								</tr>
							</tbody>
						</table>

						<p class="note">This minimal set of properties is not restrictive. Authors can include any
							additional properties defined for the [[schema.org]] <a href="https://schema.org/Person"
									><code>Person</code></a> or <a href="https://schema.org/Organization"
									><code>Organization</code></a> types, as appropriate. User agents are similarly not
							limited to interpreting only the preceding properties.</p>

						<aside class="example" title="Using a string instead of a Person object.">
							<p>The following author name is expressed as a string:</p>

							<pre>{
    …
    "author" : "Edgar Allen Poe",
    …
}</pre>
							<p>but, in the context of <a href="#creators">creators</a>, it is equivalent to:</p>

							<pre>{
    …
    "author" : {
        "type" : "Person",
        "name" : "Edgar Allen Poe"
    },
    …
}</pre>
							<p>(See <a href="#creators"></a> for further details.)</p>
						</aside>
					</section>

					<section id="value-linked-resource">
						<h5>Linked Resources</h5>

						<p>When a manifest property links to one or more resources, it MUST be expressed either as:</p>

						<ol>
							<li>a [[!json]] <a href="https://tools.ietf.org/html/rfc4627#section-2.5">string</a>
								encoding the <a>URL</a> of the resources; or</li>
							<li>an instance of a <a><code>LinkedResource</code></a>.</li>
						</ol>

						<p>A string value represents an implied <code>LinkedResource</code> object whose
								<code>url</code> property is set to the string value.</p>

						<p>A <dfn data-lt="LinkedResources|linked resources"><code>LinkedResource</code></dfn> object is
							defined as follows:</p>

						<table class="zebra">
							<thead>
								<tr>
									<th>Term</th>
									<th>Description</th>
									<th>Required Value</th>
									<th>Value Category</th>
									<th>[[!schema.org]] Mapping</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td id="linkedresource-type">
										<code>type</code>
									</td>
									<td>The type of resource. OPTIONAL</td>
									<td>One or more Text. Sequence MUST include "<code>LinkedResource</code>".</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-literal">Literals</a>
									</td>
									<td>(None)</td>
								</tr>
								<tr>
									<td id="linkedresource-url">
										<code>url</code>
									</td>
									<td>Location of the resource. REQUIRED.</td>
									<td>A valid URL string&#160;[[!url]]. Refer to the property definitions that accept
										this type for additional restrictions.</td>
									<td>
										<a href="#value-url">URL</a>
									</td>
									<td>
										<a href="https://schema.org/url">
											<code>url</code>
										</a>
									</td>
								</tr>
								<tr>
									<td id="linkedresource-encodingformat">
										<code>encodingFormat</code>
									</td>
									<td>Media type of the resource (e.g., <code>text/html</code>). OPTIONAL.</td>
									<td>MIME Media Type&#160;[[!rfc2046]].</td>
									<td>
										<a href="#value-literal">Literal</a>
									</td>
									<td>
										<a href="https://schema.org/encodingFormat">
											<code>encodingFormat</code>
										</a>
									</td>
								</tr>
								<tr>
									<td id="linkedresource-name">
										<code>name</code>
									</td>
									<td>Name of the item. OPTIONAL.</td>
									<td>One or more Text.</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-localizable-string"
											>Localizable Strings</a>
									</td>
									<td>
										<a href="https://schema.org/name">
											<code>name</code>
										</a>
									</td>
								</tr>
								<tr>
									<td id="linkedresource-description">
										<code>description</code>
									</td>
									<td>Description of the item. OPTIONAL.</td>
									<td>One or more Text.</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-localizable-string"
											>Localizable Strings</a>
									</td>
									<td>
										<a href="https://schema.org/description">
											<code>description</code>
										</a>
									</td>
								</tr>
								<tr>
									<td id="linkedresource-rel">
										<code>rel</code>
									</td>
									<td>The relation of the resource to the publication. OPTIONAL.</td>
									<td>
										<p>One or more <a href="#manifest-rel">relations</a>.</p>
										<p>Keywords are <a href="https://infra.spec.whatwg.org/#ascii-case-insensitive"
												>ASCII case-insensitive</a> [[!infra]] and MUST be compared as such.</p>
									</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-literal">Literals</a>
									</td>
									<td>(None)</td>
								</tr>
								<tr>
									<td id="linkedresource-integrity">
										<code>integrity</code>
									</td>
									<td>A cryptographic hashing of the resource that allows its integrity to be
										verified. OPTIONAL.</td>
									<td>
										<p>One or more whitespace-separated sets of <a
												href="https://www.w3.org/TR/SRI/#dfn-integrity-metadata">integrity
												metadata</a>&#160;[[!sri]]. The value MUST conform to the <a
												href="https://www.w3.org/TR/SRI/#the-integrity-attribute">metadata
												definition</a>&#160;[[!sri]].</p>
										<p>Refer to [[!sri]] for the <a
												href="https://www.w3.org/TR/SRI/#cryptographic-hash-functions">list of
												cryptographic hashing functions</a> that user agents are expected to
											support.</p>
									</td>
									<td>
										<a href="#value-literal">Literal</a>
									</td>
									<td>(None)</td>
								</tr>
								<tr>
									<td id="linkedresource-duration">
										<code>duration</code>
									</td>
									<td>Overall duration of a time-based media resource. OPTIONAL</td>
									<td>Duration value as defined by&#160;[[!iso8601-1]].</td>
									<td>
										<a href="#value-literal">Literal</a>
									</td>
									<td>
										<a href="https://schema.org/duration"><code>duration</code></a> (<a
											href="https://schema.org/Property">Property</a>) </td>
								</tr>
								<tr>
									<td id="linkedresource-alternate">
										<code>alternate</code>
									</td>
									<td>
										<p>References to one or more reformulation(s) of the resource in alternative
											formats, where the <code>encodingFormat</code> specifies the format of the
											reformulation. OPTIONAL.</p>
									</td>
									<td>
										<p>One or more of:</p>
										<ul>
											<li>a string, representing the <a>URL</a> of the resource reformulation in
												an alternative format; or</li>
											<li>an instance of a <code>LinkedResource</code> object</li>
										</ul>
										<p>A string value represents an implied <code>LinkedResource</code> object whose
												<code>url</code> property is set to the string value.</p>
									</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-linked-resource">Linked
											Resources</a>
									</td>
									<td>(None)</td>
								</tr>
							</tbody>
						</table>

						<p>Although user agent support for the <code>integrity</code> property is OPTIONAL, user agents
							that support cryptographic hashing comparisons using this property MUST do so in accordance
							with [[!sri]].</p>

						<p>This specification only defines the <code>alternate</code> property for selecting from
							alternative formats (i.e., based on <code>encodingFormat</code> or by inspecting URLs).
								<a>Profiles</a> MAY extend this behaviour to allow selection based on other criteria.
							The process for selecting an alternate is described in <a href="#app-select-alternate"
							></a>.</p>

						<p class="note">When defining a <code>LinkedResource</code> object, it is advised to always
							specify the media type of the resource using the <code>encodingFormat</code> property. Doing
							so allows user agents to more readily determine the usability of the resource.</p>

						<pre class="example" title="A resource with a SHA-256 hashing of its content.">{
    "type"           : "LinkedResource",
    "url"            : "chapter1.html",
    "encodingFormat" : "text/html",
    "name"           : "Chapter 1 - Loomings",
    "integrity"      : "sha256-13AE04E21177BABEDFDE721577615A638341F963731EA936BBB8C3862F57CDFC"
}</pre>

						<pre class="example" title="A resource with its alternate formats.">{
    "type"           : "LinkedResource",
    "url"            : "chapter1.mp3",
    "encodingFormat" : "audio/mpeg",
    "name"           : "Chapter 1 - Loomings",
    "alternate"      : [
        "chapter1.html",
        {
            "type": "LinkedResource",
            "url": "chapter1.json",
            "encodingFormat": "application/vnd.syncnarr+json",
            "duration": "PT1669S"
        }
    ]
}</pre>

						<pre class="example" title="Resource list that includes one link using a relative URL as a string ('datatypes.svg') and two that display the various properties of the a LinkedResource object.">{
    …
    "resources" : [
        "datatypes.svg",
        {
            "type"            : "LinkedResource",
            "url"             : "test-utf8.csv",
            "encodingFormat"  : "text/csv",
            "name"            : "Test Results",
            "description"     : "CSV file containing the full data set used."
        },
        {
            "type"            : "LinkedResource",
            "url"             : "terminology.html",
            "encodingFormat"  : "text/html",
            "rel"             : "glossary"
        }
    ],
    …
}</pre>
					</section>

					<section id="value-object">
						<h3>Objects</h3>

						<p>When a manifest property expects a type of object not defined in this section, or by a
								<a>profile</a>, it MUST be expressed as a [[!json]] <a
								href="https://tools.ietf.org/html/rfc4627#section-2.2">object</a> (i.e., the property's
							value will not be processed to create an object).</p>
					</section>
				</section>

				<section id="value-url">
					<h4>URLs</h4>

					<p><dfn data-lt="URL">URLs</dfn> are used to identify resources associated with a <a>digital
							publication</a>. When a property expects a URL value, it MUST be a <a
							href="https://url.spec.whatwg.org/#absolute-url-string">valid URL
						string</a>&#160;[[!url]].</p>

					<p>In the case of <a href="https://url.spec.whatwg.org/#relative-url-string">relative-URL
							strings</a>, these are resolved to <a
							href="https://url.spec.whatwg.org/#absolute-url-string">absolute-URL strings</a> using a <a
							href="https://url.spec.whatwg.org/#concept-base-url">base URL</a>&#160;[[!url]].</p>

					<p>The <dfn>base URL</dfn> for relative-URL strings is determined as follows:</p>

					<ul>
						<li>In the case of an <a href="#manifest-embed">embedded manifest</a>, it is the <a
								href="https://www.w3.org/TR/json-ld11/#inheriting-base-iri-from-html-s-base-element"
								>document base URL of the embedding document</a>&#160;[[!json-ld11]].</li>
						<li>In the case of a <a href="#manifest-link">linked manifest</a>, it is the URL of the manifest
							resource.</li>
						<li>In the case of a digital publication format that uses <a href="#manifest-other-discovery"
								>another means of discovering the manifest</a>, it is defined by the format.</li>
					</ul>

					<p>By consequence, relative-URL strings in embedded manifests are resolved against the URL of the
						document that references the manifest <em>unless</em> the document declares a base URL (i.e., in
						a <a href="https://html.spec.whatwg.org/multipage/semantics.html#the-base-element"
								><code>&lt;base&gt;</code> element</a> in its header).</p>
				</section>

				<section id="value-id">
					<h4>Identifiers</h4>

					<p>Identifiers are used to refer to a <a>digital publication</a> and the <a href="#value-entity"
							>entities</a> responsible for its creation in a persistent and unambiguous manner. <abbr
							title="Uniform Resource Locators">URLs</abbr>, <abbr title="Uniform Resource Names"
							>URNs</abbr>, <abbr title="Digital Object Identifiers">DOIs</abbr>, <abbr
							title="International Standard Book Numbers">ISBNs</abbr>, and <abbr
							title="Persistent Uniform Resource Locators">PURLs</abbr> are all examples of persistent
						identifiers frequently used in publishing.</p>

					<p>Identifiers MUST be expressed as <a href="https://url.spec.whatwg.org/#concept-url">URL
							records</a>&#160;[[!url]]</p>
				</section>

				<section id="value-array">
					<h4>Arrays</h4>

					<p>When a <a href="#manifest-properties">manifest property</a> allows one or more value of their
						respective type (e.g., <a href="#value-literal">literal</a>, <a href="#explicit-implied-objects"
							>object</a>, or <a href="#value-url">URL</a>), these values are expressed as [[!json]] <a
							href="https://tools.ietf.org/html/rfc4627#section-2.3">arrays</a>. When a property value is
						a single element, however, the array syntax MAY be omitted.</p>

					<aside class="example" title="Using a text string instead of an array.">
						<p>As a digital publication typically contains many resources, this declaration of a single
							resource:</p>

						<pre>{
    …
    "resources" : "datatypes.svg",
    …
}</pre>
						<p>is equivalent to the array:</p>

						<pre>{
    …
    "resources" : ["datatypes.svg"],
    …
}</pre>
					</aside>
				</section>
			</section>

			<section id="manifest-context">
				<h3>Manifest Contexts</h3>

				<p>A <a>manifest</a> MUST set its JSON-LD context&#160;[[!json-ld11]] with the following two components,
					in the specified order:</p>

				<ol>
					<li>the [[!schema.org]] context: <code>https://schema.org</code></li>
					<li>the <dfn>publication context</dfn>: <code>https://www.w3.org/ns/pub-context</code></li>
				</ol>

				<p class="note">Although Schema.org is often referenced using the <code>http</code> URI scheme, <a
						href="https://schema.org/docs/faq.html#19">the vocabulary is being migrated</a> to use the
					secure <code>https</code> scheme as its default. As a result, only the <code>https</code> scheme is
					recognized in the publication manifest context.</p>

				<pre class="example" title="Setting the context declaration.">{
    "@context" : [
        "https://schema.org",
        "https://www.w3.org/ns/pub-context"
    ],
    …
}</pre>

				<p>The publication context document adds features to the properties defined in Schema.org (e.g., the
					requirement for the <a href="https://schema.org/creator">creator</a> property to be order
					preserving).</p>

				<p><a>Profiles</a> of this specification MAY require additional context URLs, but such URLs MUST be
					ordered after these two components.</p>

				<p>The context can be extended by including additional parameters &#8212; such as the <a
						href="#manifest-context">global language and direction declarations</a> &#8212; in an object
					following the publication context.</p>

				<pre class="example">{
    "@context" : [
        "https://schema.org",
        "https://www.w3.org/ns/pub-context",
        {
            "language" : "es"
        }
    ],
    …
}</pre>
			</section>

			<section id="manifest-lang-dir">
				<h3>Manifest Language and Direction</h3>

				<p>Each <a href="#value-localizable-string">natural language property value</a> in a manifest (e.g., <a
						href="#pub-title">title</a>, <a href="#creators">creators</a>) has a default natural
						<dfn>language</dfn>, which is the language that it is expressed in (e.g., English, French,
					Chinese). It also has a natural <dfn>base direction</dfn> in which it is written — the display
					direction, either left-to-right or right-to-left.</p>

				<p> The digital publication manifest provides the ability to set both these concepts <a
						href="#manifest-lang-dir-global">globally</a> as well as on <a href="#manifest-lang-dir-local"
						>individual items</a> to aid user agents in interpreting and presenting the metadata. </p>

				<p class="note"> The ability to set the base direction is a JSON-LD&#160;1.1&#160;[[json-ld11]] feature.
					In other words, the Publication Manifest has a dependency on that version of the JSON-LD
					specification (as opposed to the earlier 1.0&#160;[[json-ld10]] version). </p>

				<section id="manifest-lang-dir-global">
					<h4>Global Declarations</h4>

					<p>The global language and base direction declarations for natural language manifest properties are
						set in the <a href="#manifest-context">context</a> using the <a
							href="https://www.w3.org/TR/json-ld/#syntax-tokens-and-keywords"><code>language</code></a>
						and <a href="https://www.w3.org/TR/json-ld/#syntax-tokens-and-keywords"
							><code>direction</code></a> keywords&#160;[[!json-ld11]], respectively. These values are
						used to expand simple string values into <a href="#value-localizable-string">localizable
							strings</a> during the <a href="#manifest-processing">processing of the manifest</a>, as
						well as to provide a language and the base direction for localizable strings that omit one.</p>

					<p>The value of <code>language</code> MUST be a <a
							href="https://tools.ietf.org/html/bcp47#section-2.2.9">well-formed language
						tag</a>&#160;[[!bcp47]].</p>

					<p>The value of <code>direction</code> MUST have one of the following values:</p>

					<ul>
						<li><code>"ltr"</code>: indicates that the textual values are explicitly directionally set to
							left-to-right text.</li>
						<li><code>"rtl"</code>: indicates that the textual values are explicitly directionally set to
							right-to-left text.</li>
					</ul>

					<p>The global language and base direction declaration, when present, MUST follow the <a>publication
							context</a>.</p>

					<p>Default values are not specified for the global language or base direction.</p>

					<aside class="example" title="Declaring French as the default language for the manifest.">
						<pre>{
    "@context": [
        "https://schema.org",
        "https://www.w3.org/ns/pub-context", 
        {
            "language": "fr"
        }
    ],
    …
}</pre>
					</aside>

					<aside class="example"
						title="Declaring Azeri as the default language and with the base direction to right-to-left.">
						<pre>{
    "@context": [
        "https://schema.org",
        "https://www.w3.org/ns/pub-context", 
        {
            "language": "az",
            "direction": "rtl"
        }
    ],
    …
}</pre>
					</aside>
				</section>

				<section id="manifest-lang-dir-local">
					<h4>Item-Specific Declarations</h4>

					<p>It is possible to set the language or a base direction locally for any natural language value in
						the manifest using a <a>localizable string</a>:</p>


					<aside class="example" title="Providing the author name in English for a Chinese publication.">
						<pre>{
    "@context" : [
        "https://schema.org",
        "https://www.w3.org/ns/pub-context",
        {
            "language": "zh"
        }
    ],
    "type"     : "Book",
    &#8230;
    "author" : {
        "type" : "Person"
        "name" : [
            "孔子",
            {
                "value" : "Confucius",
                "language" : "en"				
            }
        ]
    }
}
</pre>
					</aside>


					<aside class="example" title="A publication in Arabic with the title also given in English.">
						<pre>{
    "@context" : [
        "https://schema.org",
        "https://www.w3.org/ns/pub-context",
        {
            "language": "ar"
        }
    ],
    "type"     : "Book",
    &#8230;
    "name" : [
        {
            "value": "<span lang="ar" dir="rtl">HTML و CSS: تصميم و إنشاء مواقع الويب</span>",
            "direction": "rtl"
        },
        {
            "value"    : "HTML and CSS: Design and Build Websites",
            "language" : "en"
        }
    ]
}
</pre>
						<p>The extra base direction setting for the Arabic title (i.e., <span lang="ar" dir="rtl">HTML و
								CSS: تصميم و إنشاء مواقع الويب</span>) is necessary to yield the correct display:</p>
					</aside>

					<p> The possible values of the <a href="https://www.w3.org/TR/json-ld/#syntax-tokens-and-keywords"
								><code>language</code></a> and <a
							href="https://www.w3.org/TR/json-ld/#syntax-tokens-and-keywords"><code>direction</code></a>
						keywords&#160;[[!json-ld11]] are the same as for the <a href="#manifest-lang-dir-global">global
							declaration</a>. Furthermore, both values can also be the (JSON) value of <code>null</code>,
						indicating that no explicit language, respectively direction, is set. </p>

					<p class="note"> Setting the value of <code>language</code> to <code>null</code> can be useful if a
						value (e.g., the name of an organization) is commonly used without any associated language
						(e.g., "Google"). </p>

					<p>A local declaration of the language, respectively the base direction, takes precedence over a <a
							href="#manifest-lang-dir-global">global declaration</a>.</p>

				</section>
			</section>

			<section id="publication-types">
				<h4>Publication Types</h4>

				<p>A <a>digital publication's</a>
					<a>manifest</a> defines its <dfn>Publication Type</dfn> using the <code>type</code>
					keyword&#160;[[!json-ld11]]. The type MAY be mapped onto any [[!schema.org]] type, but <a
						href="https://schema.org/CreativeWork"><code>CreativeWork</code></a> is <a href="#validate-type"
						>assumed as the default</a> when no type is specified.</p>

				<pre class="example" title="Setting a publication's type to CreativeWork.">{
    "@context" : ["https://schema.org", "https://www.w3.org/ns/pub-context"],
    "type"     : "CreativeWork",
    …
}</pre>

				<p>More specific subtypes of <code>CreativeWork</code>, such as <a href="https://schema.org/Article"
							><code>Article</code></a>, <a href="https://schema.org/Book"><code>Book</code></a>, <a
						href="https://schema.org/TechArticle"><code>TechArticle</code></a>, and <a
						href="https://schema.org/Course"><code>Course</code></a> can be used instead of, or in addition
					to, <code>CreativeWork</code>.</p>

				<pre class="example" title="Setting a publication's type to Book.">{
    "@context" : ["https://schema.org", "https://www.w3.org/ns/pub-context"],
    "type"     : "Book",
    …
}</pre>

				<p>Each Schema.org type defines a set of properties that are valid for use with it. To ensure that the
					manifest can be validated and processed by Schema.org-aware processors, the manifest SHOULD contain
					only the properties associated with the selected type.</p>

				<p>If properties from more than one type are needed, the manifest MAY include multiple type
					declarations.</p>

				<pre class="example" title="Setting the type property for a publication that combines properties from Book and VisualArtwork.">{
    "@context" : ["https://schema.org", "https://www.w3.org/ns/pub-context"],
    "type"     : ["Book", "VisualArtwork"],
    …
}</pre>

				<p>User agents SHOULD NOT fail to process manifests that are not valid to their declared Schema.org
					type(s).</p>

				<p class="note">Refer to the Schema.org site for the complete <a
						href="https://schema.org/CreativeWork#subtypes">list of <code>CreativeWork</code>
					subtypes</a>.</p>
			</section>

			<section id="profile-conformance">
				<h3>Profile Conformance</h3>

				<p>A <a>digital publication</a> indicates the <a>profile</a> its manifest and content conform to using
					the <code>conformsTo</code> property.</p>

				<table class="zebra">
					<thead>
						<tr>
							<th>Term</th>
							<th>Description</th>
							<th>Required Value</th>
							<th>Value Category</th>
							<th>[[!dcterms]] Mapping</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td>
								<code> conformsTo </code>
							</td>
							<td>URL of the profile.</td>
							<td>An <a href="https://url.spec.whatwg.org/#absolute-url-with-fragment-string"
									>absolute-URL-with-fragment string</a>&#160;[[!url]].</td>
							<td><a href="#value-array">Array</a> of <a href="#value-literal">Literals</a></td>
							<td>
								<a
									href="https://www.dublincore.org/specifications/dublin-core/dcmi-terms/#http://purl.org/dc/terms/conformsTo"
									>conformsTo</a>
							</td>
						</tr>
					</tbody>
				</table>

				<p>The URL to use for a profile is defined in its respective specification.</p>

				<p class="note">The <code>conformsTo</code> property can also be used to indicate conformance to other
					specifications and standards (e.g., to [[wcag21]]).</p>

				<pre class="example" title="Identify that a digital publication conforms to the W3C Audiobooks specification.">{
    …
    "conformsTo" : "https://www.w3.org/TR/audiobooks/",
    …
}</pre>
			</section>

			<section id="manifest-properties">
				<h3>Properties</h3>

				<section id="descriptive-properties">
					<h4>Descriptive Properties</h4>

					<section id="abridged">
						<h5>Abridged</h5>

						<p>The <code>abridged</code> property provides information on whether or not a <a>digital
								publication</a> has been shortened from its original form.</p>

						<table class="zebra">
							<thead>
								<tr>
									<th>Term</th>
									<th>Description</th>
									<th>Required Value</th>
									<th>Value Category</th>
									<th>[[!schema.org]] Mapping</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>
										<code>abridged</code>
									</td>
									<td>Indicates whether the book is an abridged edition.</td>
									<td>Either <code>true</code> or <code>false</code>.</td>
									<td>
										<a href="#value-boolean">Boolean</a>
									</td>
									<td>
										<a href="https://schema.org/abridged"><code>abridged</code></a> (<a
											href="https://schema.org/Book">Book</a>) </td>
								</tr>
							</tbody>
						</table>

						<pre class="example" title="Setting that a publication is abridged.">{
    …
    "abridged" : true,
    …
}</pre>
					</section>

					<section id="accessibility">
						<h5>Accessibility</h5>

						<p>The accessibility properties provide information about the suitability of a <a>digital
								publication</a> for consumption by users with different preferred reading modalities.
							These properties typically supplement an evaluation against established accessibility
							criteria, such as those provided in [[wcag21]].</p>

						<p>The following properties are categorized as accessibility properties:</p>

						<table class="zebra">
							<thead>
								<tr>
									<th>Term</th>
									<th>Description</th>
									<th>Required Value</th>
									<th>Value Category</th>
									<th>[[!schema.org]] Mapping</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td id="accessMode">
										<code>accessMode</code>
									</td>
									<td>The human sensory perceptual system or cognitive faculty through which a person
										may process or perceive information. </td>
									<td>One or more Text.</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-literal">Literals</a>
									</td>
									<td>
										<a href="https://schema.org/accessMode"><code>accessMode</code></a> (<a
											href="https://schema.org/CreativeWork">CreativeWork</a>) </td>
								</tr>
								<tr>
									<td id="accessModeSufficient">
										<code>accessModeSufficient</code>
									</td>
									<td> A list of single or combined access modes that are sufficient to understand all
										the intellectual content of a resource. </td>
									<td> One or more <a href="https://schema.org/ItemList">ItemList</a>.</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-object">Object</a>
									</td>
									<td>
										<a href="https://schema.org/accessModeSufficient"
												><code>accessModeSufficient</code></a> (<a
											href="https://schema.org/CreativeWork">CreativeWork</a>) </td>
								</tr>
								<tr>
									<td id="accessibilityFeature">
										<code>accessibilityFeature</code>
									</td>
									<td> Content features of the resource, such as accessible media, alternatives and
										supported enhancements for accessibility. </td>
									<td> One or more Text.</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-literal">Literals</a>
									</td>
									<td>
										<a href="https://schema.org/accessibilityFeature"
												><code>accessibilityFeature</code></a> (<a
											href="https://schema.org/CreativeWork">CreativeWork</a>) </td>
								</tr>
								<tr>
									<td id="accessibilityHazard">
										<code>accessibilityHazard</code>
									</td>
									<td> A characteristic of the described resource that is physiologically dangerous to
										some users. </td>
									<td> One or more Text.</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-literal">Literals</a>
									</td>
									<td>
										<a href="https://schema.org/accessibilityHazard"
												><code>accessibilityHazard</code></a> (<a
											href="https://schema.org/CreativeWork">CreativeWork</a>) </td>
								</tr>
								<tr>
									<td id="accessibilitySummary">
										<code>accessibilitySummary</code>
									</td>
									<td>A human-readable summary of specific accessibility features or deficiencies that
										is consistent with the other accessibility metadata. </td>
									<td>Text.</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-localizable-string"
											>Localizable Strings</a>
									</td>
									<td>
										<a href="https://schema.org/accessibilitySummary"
												><code>accessibilitySummary</code></a> (<a
											href="https://schema.org/CreativeWork">CreativeWork</a>) </td>
								</tr>
							</tbody>
						</table>

						<p class="note">Detailed descriptions of these properties, including the expected values to use
							with them, are available at [[webschemas-a11y]].</p>

						<p class="note">A reference to a detailed <a href="#accessibility-report">accessibility
								report</a> can also be provided if more information is needed than can be expressed by
							these properties.</p>

						<pre class="example" title="Setting accessibility metadata for a publication that provides alternative text and long descriptions appropriate for each image, enabling it to be read in purely textual form.">{
    …
    "accessMode"              : ["textual", "visual"],
    "accessibilityFeature"    : ["alternativeText", "longDescription"]
    "accessModeSufficient"    : [
        {
            "type"            : "ItemList",
            "itemListElement" : ["textual", "visual"]
        },
        {
            "type"            : "ItemList",
            "itemListElement" : ["textual"]
        }
    ],
    …
}</pre>

					</section>

					<section id="address">
						<h4>Address</h4>

						<p>An <dfn>address</dfn> is a <a>URL</a> that identifies the source location of a <a>digital
								publication</a>. It is expressed using the <code>url</code> property.</p>

						<table class="zebra">
							<thead>
								<tr>
									<th>Term</th>
									<th>Description</th>
									<th>Required Value</th>
									<th>Value Category</th>
									<th>[[!schema.org]] Mapping</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>
										<code>url</code>
									</td>
									<td>URL of the publication.</td>
									<td>A valid URL string&#160;[[!url]].</td>
									<td><a href="#value-array">Array</a> of <a href="#value-url">URLs</a></td>
									<td>
										<a href="https://schema.org/url"><code>url</code></a> (<a
											href="https://schema.org/Thing">Thing</a>) </td>
								</tr>
							</tbody>
						</table>

						<p>A digital publication MAY have more than one address, but all the addresses MUST resolve to
							the same document.</p>

						<div class="note">The publication's address can also be used as value for an identifier link
							relation&#160;[[link-relation]].</div>

						<pre class="example" title="Setting the address of the publication.">{
    …
    "url" : "https://publisher.example.org/frankenstein",
    …
}</pre>
					</section>

					<section id="canonical-identifier">
						<h5>Canonical Identifier</h5>

						<p>A <a>digital publication's</a>
							<dfn>canonical identifier</dfn> property provides a unique identifier for a <a>digital
								publication</a>. It is expressed using the <code>id</code> property.</p>

						<table class="zebra">
							<thead>
								<tr>
									<th>Term</th>
									<th>Description</th>
									<th>Required Value</th>
									<th>Value Category</th>
									<th>[[!schema.org]] Mapping</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>
										<code>id</code>
									</td>
									<td>Preferred version of the publication.</td>
									<td>A URL record&#160;[[!url]].</td>
									<td>
										<a href="#value-id">Identifier</a>
									</td>
									<td>(None)</td>
								</tr>
							</tbody>
						</table>

						<p class="note">Ensuring uniqueness of canonical identifiers is outside the scope of this
							specification. The actual achievable uniqueness depends on such factors as the conventions
							of the identifier scheme used and the degree of control over assignment of identifiers.</p>

						<p>If a canonical identifier is not provided in the manifest, or the value is an invalid URL,
							the digital publication does not have a canonical identifier. User agents MUST NOT attempt
							to construct a canonical identifier from any other identifiers provided in the manifest.</p>

						<p>The specification of the canonical identifier MAY be complemented by the inclusion of
							additional types of identifiers using the <a href="https://schema.org/identifier"
									><code>identifier</code> property</a>&#160;[[!schema.org]] and/or its subtypes.</p>

						<pre class="example" title="Setting the canonical identifier and the address as URLs.">{
    …
    "id"  : "http://www.w3.org/TR/tabular-data-model/",
    "url" : "http://www.w3.org/TR/2015/REC-tabular-data-model-20151217/",
    …
}</pre>

						<pre class="example" title="Using a URN for the canonical identifier.">{
    …
    "id"  : "urn:isbn:9780123456789",
    "url" : "https://publisher.example.org/wuthering-heights",
    …
}</pre>
					</section>

					<section id="creators">
						<h5>Creators</h5>

						<p>A <dfn>creator</dfn> is an individual or organization responsible for the creation of a
								<a>digital publication</a>.</p>

						<p>The following properties are categorized as creators:</p>

						<table class="zebra">
							<thead>
								<tr>
									<th>Term</th>
									<th>Description</th>
									<th>Required Value</th>
									<th>Value Category</th>
									<th>[[!schema.org]] Mapping</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td id="artist">
										<code>artist</code>
									</td>
									<td>The primary artist for the publication, in a medium other than pencils or
										digital line art.</td>
									<td>One or more <a href="https://schema.org/Person"><code>Person</code></a>.</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-entity">Entities</a>
									</td>
									<td>
										<a href="https://schema.org/artist"><code>artist</code></a> (<a
											href="https://schema.org/VisualArtwork">VisualArtwork</a>) </td>
								</tr>
								<tr>
									<td id="author">
										<code>author</code>
									</td>
									<td>The author of the publication.</td>
									<td>One or more <a href="https://schema.org/Person"><code>Person</code></a> and/or
											<a href="https://schema.org/Organization"
										><code>Organization</code></a>.</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-entity">Entities</a>
									</td>
									<td>
										<a href="https://schema.org/author"><code>author</code></a> (<a
											href="https://schema.org/CreativeWork">CreativeWork</a>) </td>
								</tr>
								<tr>
									<td id="colorist">
										<code>colorist</code>
									</td>
									<td>The individual who adds color to inked drawings.</td>
									<td>One or more <a href="https://schema.org/Person"><code>Person</code></a>.</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-entity">Entities</a>
									</td>
									<td>
										<a href="https://schema.org/colorist"><code>colorist</code></a> (<a
											href="https://schema.org/VisualArtwork">VisualArtwork</a>) </td>
								</tr>
								<tr>
									<td id="contributor">
										<code>contributor</code>
									</td>
									<td>Contributor whose role does not fit to one of the other roles in this
										table.</td>
									<td>One or more <a href="https://schema.org/Person"><code>Person</code></a> and/or
											<a href="https://schema.org/Organization"
										><code>Organization</code></a>.</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-entity">Entities</a>
									</td>
									<td>
										<a href="https://schema.org/contributor"><code>contributor</code></a> (<a
											href="https://schema.org/CreativeWork">CreativeWork</a>) </td>
								</tr>
								<tr>
									<td id="creator">
										<code>creator</code>
									</td>
									<td>
										<p>The creator of the publication.</p>
										<p>Use of this property might lead to inconsistent results in user agents. It is
											marked as a synonym for <a href="#author">author</a> in [[schema.org]], but
											there is no guidance on which takes precedence or how to combine them. It is
											advised to use only one or the other, with preference given to the more
											specific author property.</p>
									</td>
									<td>One or more <a href="https://schema.org/Person"><code>Person</code></a> and/or
											<a href="https://schema.org/Organization"
										><code>Organization</code></a>.</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-entity">Entities</a>
									</td>
									<td>
										<a href="https://schema.org/creator"><code>creator</code></a> (<a
											href="https://schema.org/CreativeWork">CreativeWork</a>) </td>
								</tr>
								<tr>
									<td id="editor">
										<code>editor</code>
									</td>
									<td>The editor of the publication.</td>
									<td>One or more <a href="https://schema.org/Person"><code>Person</code></a>.</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-entity">Entities</a>
									</td>
									<td>
										<a href="https://schema.org/editor"><code>editor</code></a> (<a
											href="https://schema.org/CreativeWork">CreativeWork</a>) </td>
								</tr>
								<tr>
									<td id="illustrator">
										<code>illustrator</code>
									</td>
									<td>The illustrator of the publication.</td>
									<td>One or more <a href="https://schema.org/Person"><code>Person</code></a>.</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-entity">Entities</a>
									</td>
									<td>
										<a href="https://schema.org/illustrator"><code>illustrator</code></a> (<a
											href="https://schema.org/Book">Book</a>) </td>
								</tr>
								<tr>
									<td id="inker">
										<code>inker</code>
									</td>
									<td>The individual who traces over the pencil drawings in ink.</td>
									<td>One or more <a href="https://schema.org/Person"><code>Person</code></a>.</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-entity">Entities</a>
									</td>
									<td>
										<a href="https://schema.org/inker"><code>inker</code></a> (<a
											href="https://schema.org/VisualArtwork">VisualArtwork</a>) </td>
								</tr>
								<tr>
									<td id="letterer">
										<code>letterer</code>
									</td>
									<td>The individual who adds lettering, including speech balloons and sound effects,
										to artwork.</td>
									<td>One or more <a href="https://schema.org/Person"><code>Person</code></a>.</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-entity">Entities</a>
									</td>
									<td>
										<a href="https://schema.org/letterer"><code>letterer</code></a> (<a
											href="https://schema.org/VisualArtwork">VisualArtwork</a>) </td>
								</tr>
								<tr>
									<td id="penciler">
										<code>penciler</code>
									</td>
									<td>The individual who draws the primary narrative artwork.</td>
									<td>One or more <a href="https://schema.org/Person"><code>Person</code></a>.</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-entity">Entities</a>
									</td>
									<td>
										<a href="https://schema.org/penciler"><code>penciler</code></a> (<a
											href="https://schema.org/VisualArtwork">VisualArtwork</a>) </td>
								</tr>
								<tr>
									<td id="publisher">
										<code>publisher</code>
									</td>
									<td>The publisher of the publication.</td>
									<td>One or more <a href="https://schema.org/Person"><code>Person</code></a> and/or
											<a href="https://schema.org/Organization"
										><code>Organization</code></a>.</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-entity">Entities</a>
									</td>
									<td>
										<a href="https://schema.org/publisher"><code>publisher</code></a> (<a
											href="https://schema.org/CreativeWork">CreativeWork</a>) </td>
								</tr>
								<tr>
									<td id="readBy">
										<code>readBy</code>
									</td>
									<td>A person who reads (performs) the publication (for audiobooks).</td>
									<td>One or more <a href="https://schema.org/Person"><code>Person</code></a>. </td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-entity">Entities</a>
									</td>
									<td>
										<a href="https://schema.org/readBy"><code>readBy</code></a> (<a
											href="https://schema.org/Audiobook">Audiobook</a>) </td>
								</tr>
								<tr>
									<td id="translator">
										<code>translator</code>
									</td>
									<td>The translator of the publication.</td>
									<td>One or more <a href="https://schema.org/Person"><code>Person</code></a> and/or
											<a href="https://schema.org/Organization"><code>Organization</code></a>. </td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-entity">Entities</a>
									</td>
									<td>
										<a href="https://schema.org/translator"><code>translator</code></a> (<a
											href="https://schema.org/CreativeWork">CreativeWork</a>) </td>
								</tr>
							</tbody>
						</table>

						<p>Creators MUST be represented either as:</p>

						<ol>
							<li>a [[!json]] <a href="https://tools.ietf.org/html/rfc4627#section-2.5">string</a>
								encoding the name of a <a href="https://schema.org/Person"
								><code>Person</code></a>&#160;[[!schema.org]]; or</li>
							<li>an instance of a <a href="https://schema.org/Person"><code>Person</code></a> or <a
									href="https://schema.org/Organization"
								><code>Organization</code></a>&#160;[[!schema.org]].</li>
						</ol>

						<p>A single string value is a shorthand for a [[!schema.org]] <code>Person</code> whose
								<code>name</code> property is set to that string value. (See also <a
								href="#value-entity"></a>.)</p>

						<p>The manifest MAY include more than one of each type of creator.</p>

						<pre class="example" title="Setting the author of a book.">{
    …
    "url"      : "https://publisher.example.org/alice-in-wonderland",
    "author"   : {
        "type"  : "Person",
        "name"  : "Lewis Carroll"
    }
}</pre>
						<pre class="example" title="Separating editors, authors, and publisher. Some persons expressed as simple strings instead of objects.">{
    …
    "author"     : [
        "Jeni Tennison",
        {
            "type"       : "Person",
            "name"       : "Gregg Kellogg",
        },
        {
            "type"       : "Person",
            "name"       : "Ivan Herman",
            "id"         : "https://www.w3.org/People/Ivan/"
            "identifier" : "0000-0003-0782-2704",
        }
    ],
    "editor"    : [
        "Jeni Tennison",
        {
            "type" : "Person",
            "name" : "Gregg Kellogg",
        }
    ],
    "publisher" : {
        "type" : "Organization",
        "name" : "World Wide Web Consortium",
        "id"   : "https://www.w3.org/"
    }
    …
}</pre>
					</section>

					<section id="duration">
						<h5>Duration</h5>

						<p> The <dfn>global duration</dfn> indicates the overall length of a <em>time-based</em>
							<a>digital publication</a> (e.g., an audiobook or a book consisting of a series of video
							clips). It is expressed using the <code>duration</code> property.</p>

						<table class="zebra">
							<thead>
								<tr>
									<th>Term</th>
									<th>Description</th>
									<th>Required Value</th>
									<th>Value Category</th>
									<th>[[!schema.org]] Mapping</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>
										<code>duration</code>
									</td>
									<td>Overall duration of a time-based publication.</td>
									<td>Duration value as defined by&#160;[[!iso8601-1]].</td>
									<td>
										<a href="#value-literal">Literal</a>
									</td>
									<td>
										<a href="https://schema.org/duration"><code>duration</code></a> (<a
											href="https://schema.org/Property">Property</a>) </td>
								</tr>
							</tbody>
						</table>

						<pre class="example" title="Setting the global duration in seconds.">{
    …
    "type"     : "Audiobook",
    "id"       : "https://example.org/flatland-a-romance-of-many-dimensions/",
    "url"      : "https://w3c.github.io/pub-manifest/experiments/audiobook/",
    "name"     : "Flatland: A Romance of Many Dimensions",
    …
    "duration" : "PT15153S",
    …
}</pre>

						<p class="note"> The <a href="https://en.wikipedia.org/wiki/ISO_8601#Durations">relevant
								Wikipedia page</a> gives a concise description of the ISO duration syntax. </p>
					</section>

					<section id="last-modification-date">
						<h5>Last Modification Date</h5>

						<p>The <dfn>last modification date</dfn> is the date when a <a>digital publication</a> was last
							updated (i.e., whenever changes were last made to any of the resources of the publication,
							including the <a>manifest</a>). It is expressed using the <code>dateModified</code>
							property.</p>
						<table class="zebra">
							<thead>
								<tr>
									<th>Term</th>
									<th>Description</th>
									<th>Required Value</th>
									<th>Value Category</th>
									<th>[[!schema.org]] Mapping</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>
										<code>dateModified</code>
									</td>
									<td>Last modification date of the publication.</td>
									<td>A <a href="https://schema.org/Date"><code>Date</code></a> or <a
											href="https://schema.org/DateTime"><code>DateTime</code></a>
										value&#160;[[!schema.org]], both expressed in ISO 8601 Date, or Date Time
										formats, respectively&#160;[[!iso8601-1]].</td>
									<td>
										<a href="#value-literal">Literal</a>
									</td>
									<td>
										<a href="https://schema.org/dateModified"><code>dateModified</code></a> (<a
											href="https://schema.org/CreativeWork">CreativeWork</a>) </td>
								</tr>
							</tbody>
						</table>
						<p>The last modification date does not necessarily reflect all changes to a publication (e.g.,
							if a digital publication format allows references to third-party content). User agents
							SHOULD check the last modification date of individual resources to determine if they have
							changed and need updating.</p>

						<pre class="example" title="Setting the last modification date of the publication.">{
    …
    "dateModified" : "2015-12-17",
    …
}</pre>
					</section>

					<section id="publication-date">
						<h5>Publication Date</h5>

						<p>The <dfn>publication date</dfn> is the date on which a <a>digital publication</a> was
							originally published. It represents a static event in the lifecycle of a publication and
							allows subsequent revisions to be identified and compared. It is expressed using the
								<code>datePublished</code> property.</p>

						<table class="zebra">
							<thead>
								<tr>
									<th>Term</th>
									<th>Description</th>
									<th>Required Value</th>
									<th>Value Category</th>
									<th>[[!schema.org]] Mapping</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>
										<code>datePublished</code>
									</td>
									<td>Creation date of the publication.</td>
									<td>A <a href="https://schema.org/Date"><code>Date</code></a> or <a
											href="https://schema.org/DateTime"><code>DateTime</code></a>, both expressed
										in ISO 8601 Date, or Date Time formats, respectively&#160;[[!iso8601-1]].</td>
									<td>
										<a href="#value-literal">Literal</a>
									</td>
									<td>
										<a href="https://schema.org/datePublished"><code>datePublished</code></a> (<a
											href="https://schema.org/CreativeWork">CreativeWork</a>) </td>
								</tr>
							</tbody>
						</table>

						<p>The exact moment of publication is intentionally left open to interpretation: it could be
							when the publication is first made available or could be a point in time before publication
							when the publication is considered final.</p>

						<pre class="example" title="Setting the creation and modification date of the publication.">{
    …
    "datePublished" : "2015-12-17",
    "dateModified"  : "2016-01-30",
    …
}</pre>
					</section>

					<section id="inLanguage">
						<h5>Publication Language</h5>

						<p>A <a>digital publication</a> has at least one natural language, which is the language that
							the content is expressed in (e.g., English, French, Chinese). The manifest includes the
							following property to set this concept, which can influence, for example, the behavior of a
							user agent (e.g., to preload a dictionary or text-to-speech engine).</p>

						<table class="zebra">
							<thead>
								<tr>
									<th>Term</th>
									<th>Description</th>
									<th>Required Value</th>
									<th>Value Category</th>
									<th>[[!schema.org]] Mapping</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>
										<code>inLanguage</code>
									</td>
									<td>Default <a>language</a> for the publication.</td>
									<td>One or more <a href="https://tools.ietf.org/html/bcp47#section-2.2.9"
											>well-formed language tags</a>&#160;[[!bcp47]].</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-literal">Literals</a>
									</td>
									<td>
										<a href="https://schema.org/inLanguage"><code>inLanguage</code></a> (<a
											href="https://schema.org/Property">Property</a>) </td>
								</tr>
							</tbody>
						</table>

						<p>The natural language MUST be a <a href="https://tools.ietf.org/html/bcp47#section-2.2.9"
								>well-formed language tag</a> &#160;[[!bcp47]].</p>

						<p>If a user agent requires the publication language and it is not available in the manifest, or
							the obtained value is not <a href="https://tools.ietf.org/html/bcp47#section-2.2.9"
								>well-formed</a>&#160;[[!bcp47]], the user agent MAY attempt to determine the
							publication language when <a href="#manifest-processing">generating its internal
								representation</a>. This specification does not mandate how such a language tag is
							created. The user agent might:</p>

						<ul>
							<li>use the <a href="#manifest-lang-dir">language declaration of the manifest</a>;</li>
							<li>use the first language declaration found in a resource in the <a>default reading
									order</a>; or</li>
							<li>calculate the language using an algorithm of its own design.</li>
						</ul>

						<p>If a user agent requires a primary language for the publication and more than one language is
							specified, the first entry in the <code>inLanguage</code> array MUST be recognized as the
							primary.</p>

						<p class="note">It is important to differentiate the language <em>of the publication</em> from
							the language of the individual resources that compose it. If such resources are, for
							example, in HTML, the language needs to be set in those resources, too. The language of the
							publication is not inherited.</p>
					</section>

					<section id="reading-progression-direction">
						<h5>Reading Progression Direction</h5>

						<p>The <dfn data-lt="ProgressionDirection">reading progression direction</dfn> establishes the
							reading direction from one resource to the next within a <a>digital publication</a>. It is
							used to adapt such publication-level interactions as menu position, touch gestures, swap
							direction, and tap zones for next and previous page. The reading progression is expressed
							using the <code>readingDirection</code> property.</p>

						<table class="zebra">
							<thead>
								<tr>
									<th>Term</th>
									<th>Description</th>
									<th>Required Value</th>
									<th>Value Category</th>
									<th>[[!schema.org]] Mapping</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>
										<code>readingProgression</code>
									</td>
									<td>Reading progression direction from one resource to the other.</td>
									<td>One of: <code>ltr</code> or <code>rtl</code>.</td>
									<td>
										<a href="#value-literal">Literal</a>
									</td>
									<td>(None)</td>
								</tr>
							</tbody>
						</table>

						<p>The value of this property MUST be either:</p>

						<ul>
							<li><code>ltr</code>: left-to-right; or</li>
							<li><code>rtl</code>: right-to-left.</li>
						</ul>

						<p>The default value is <code>ltr</code>. If the <code>readingProgression</code> is not set,
							user agents MUST use the default value when generating their <a>internal
							representation</a>.</p>

						<p>This property has <em>no effect</em> on the rendering of the individual primary resources; it
							is only relevant for the progression direction from one resource to the other.</p>

						<pre class="example" title="Setting the reading progression explicitly to ltr (left-to-right).">{
    …
    "readingProgression" : "ltr",
    …
}</pre>
					</section>

					<section id="pub-title">
						<h5>Title</h5>

						<p>The title provides the human-readable name of a <a>digital publication</a>. It is expressed
							using the <code>name</code> property.</p>

						<table class="zebra">
							<thead>
								<tr>
									<th>Term</th>
									<th>Description</th>
									<th>Required Value</th>
									<th>Value Category</th>
									<th>[[!schema.org]] Mapping</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>
										<code>name</code>
									</td>
									<td>Human-readable title of the publication.</td>
									<td>One or more Text.</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-localizable-string"
											>Localizable Strings</a>
									</td>
									<td>
										<a href="https://schema.org/name"><code>name</code></a> (<a
											href="https://schema.org/Thing">Thing</a>) </td>
								</tr>
							</tbody>
						</table>

						<p id="generate_title">If a title is not included in the manifest, the user agent MUST create
							one. The process for obtaining the title is defined in <a href="#add-default-values"
							></a>.</p>

						<p class="note">A user agent is not expected to produce a <a data-cite="wcag21#page-titled"
								>meaningful title</a>&#160;[[wcag21]] for a publication when one is not specified. </p>

						<pre class="example" title="Setting the title of a book explicitly.">{
    …
    "name" : "Heart of Darkness",
    …
}</pre>
					</section>
				</section>

				<section id="resource-categorization-properties">
					<h4>Resource Categorization Properties</h4>

					<p>Publication resources are specified via the <a>default reading order</a>, the <a>resource
							list</a>, and the <a>links</a>, as defined in this section. These lists contain references
						to <a href="#informative-rel">informative resources</a> like the <a href="#privacy-policy"
							>privacy policy</a>, and <a href="#structural-rel">structural resources</a> like the <a
							href="#contents">table of contents</a>.</p>

					<p class="note">It is not necessary to include a reference to the manifest in any of these
						lists.</p>

					<section id="default-reading-order">
						<h5>Default Reading Order</h5>

						<p>The <dfn>default reading order</dfn> is a specific progression through a set of <a>digital
								publication</a> resources. A user might follow alternative pathways through the content,
							but in the absence of such interaction the default reading order defines the expected
							progression from one resource to the next.</p>

						<p>The default reading order is expressed using the <code>readingOrder</code> property.</p>

						<table class="zebra">
							<thead>
								<tr>
									<th>Term</th>
									<th>Description</th>
									<th>Required Value</th>
									<th>Value Category</th>
									<th>[[!schema.org]] Mapping</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>
										<code>readingOrder</code>
									</td>
									<td>Order of progression through the resources of a digital publication.</td>
									<td>
										<p>One or more <a><code>LinkedResource</code></a>.</p>
									</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-linked-resource">Linked
											Resources</a>
									</td>
									<td>(None)</td>
								</tr>
							</tbody>
						</table>

						<p>Each element of the <code>readingOrder</code> property MUST be expressed either as:</p>

						<ul>
							<li>a [[!json]] <a href="https://tools.ietf.org/html/rfc4627#section-2.5">string</a>
								representing the <a>URL</a> of the resource; or</li>
							<li>an instance of a <a><code>LinkedResource</code></a> object.</li>
						</ul>

						<p>A single string value represents an instance of a <code>LinkedResource</code> object whose
								<code>url</code> property is the string's text.</p>

						<p>The order of items is <em>significant</em>.</p>

						<p>The URLs expressed in the reading order MAY include fragment identifiers, although
								<a>profiles</a> of this specification MAY restrict both their use as well as what
							schemes and features are supported. Fragment identifiers are to be interpreted as defined by
							their respective specifications (e.g., the start location to move the user to, or the range
							of content to render before moving to the next item in the reading order).</p>

						<p>Resources SHOULD NOT be listed more than once in the reading order, as this can lead to
							unexpected results in user agents (e.g., links to the resource might not resolve to the
							right instance in the reading order).</p>

						<p>The default reading order MAY be omitted when a <a>digital publication</a> consists only of
							the resource that <a href="#manifest-link">links to the manifest</a>. When the default
							reading order is absent, user agents MUST include an entry for the linking resource when
							compiling the <a>internal representation</a>. See <a href="#add-default-values"></a> for
							more information.</p>

						<p>The default reading order MUST include at least one resource after <a
								href="#manifest-processing">processing of the manifest</a>.</p>

						<pre class="example" title="Expressing the reading order as a simple list of URLs.">{
    …
    "readingOrder" : [
        "html/title.html",
        "html/copyright.html",
        "html/introduction.html",
        "html/epigraph.html",
        "html/c001.html",
        …
    ],
    …
}</pre>
						<pre class="example" title="Expressing the reading order as LinkedResource objects to provide more information.">{
    …
    "readingOrder" : [
        {
            "type"           : "LinkedResource",
            "url"            : "html/title.html",
            "encodingFormat" : "text/html",
            "name"           : "Title page"
        },
        {
            "type"           : "LinkedResource",
            "url"            : "html/copyright.html",
            "encodingFormat" : "text/html",
            "name"           : "Copyright page"
        },
        …
    ],
    …
}</pre>
					</section>

					<section id="resource-list">
						<h5>Resource List</h5>

						<p>The <dfn>resource list</dfn> enumerates any additional resources used in the processing or
							rendering of a <a>digital publication</a> that are not already listed in the <a>default
								reading order</a>. It is expressed using the <code>resources</code> property.</p>

						<table class="zebra">
							<thead>
								<tr>
									<th>Term</th>
									<th>Description</th>
									<th>Required Value</th>
									<th>Value Category</th>
									<th>[[!schema.org]] Mapping</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>
										<code>resources</code>
									</td>
									<td>List of additional publication resources used in the processing or rendering of
										a publication.</td>
									<td>
										<p>One or more <a><code>LinkedResource</code></a>.</p>
									</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-linked-resource">Linked
											Resources</a>
									</td>
									<td>(None)</td>
								</tr>
							</tbody>
						</table>

						<p>Each element of the <code>resources</code> property MUST be expressed either as:</p>

						<ul>
							<li>a [[!json]] <a href="https://tools.ietf.org/html/rfc4627#section-2.5">string</a>
								representing the <a>URL</a> of the resource; or</li>
							<li>an instance of a <a><code>LinkedResource</code></a> object.</li>
						</ul>

						<p>A single string value represents an instance of a <code>LinkedResource</code> object whose
								<code>url</code> property is the string's text.</p>

						<p>The order of items is <em>not significant</em>.</p>

						<p>To avoid conflicting information about a resource, a particular resource's <a>URL</a> SHOULD
							NOT be repeated within the resource list.</p>

						<p>The URLs expressed in the resource list SHOULD NOT include fragment identifiers.</p>

						<p>The completeness of the resource list can affect the usability of a digital publication in
							certain reading scenarios (e.g., the ability to read it offline). For this reason, it is
							strongly advised to provide a comprehensive list of all of the publication's constituent
							resources beyond those listed in the <a>default reading order</a>.</p>

						<p>In some cases, a comprehensive list of these resources might not be easily achieved (e.g.,
							third-party scripts that reference resources from deep within their source), but a user
							agent SHOULD still be able to render a publication even if some of these resources are not
							identified as belonging to the publication (e.g., if it is taken offline without them).</p>

						<pre class="example" title="Expressing the list of resources via a combination of simple URL strings and LinkedResource objects.">{
    …
    "resources"  : [
        "datatypes.html",
        "datatypes.svg",
        "datatypes.png",
        "diff.html",
        {
            "type"           : "LinkedResource",
            "url"            : "test-utf8.csv",
            "encodingFormat" : "text/csv"
        },
        {
            "type"           : "LinkedResource",
            "url"            : "test-utf8-bom.csv",
            "encodingFormat" : "text/csv"
        },
        …
    ],
    …
}</pre>

					</section>

					<section id="links">
						<h5>Links</h5>

						<p>The <dfn>Links</dfn> list is used to provide a list of resources that are <em>not</em>
							required for the processing and rendering of a <a>digital publication</a> (i.e., the content
							of the publication remains unaffected even if these resources are not available). Links are
							expressed using the <code>links</code> property.</p>

						<table class="zebra">
							<thead>
								<tr>
									<th>Term</th>
									<th>Description</th>
									<th>Required Value</th>
									<th>Value Category</th>
									<th>[[!schema.org]] Mapping</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>
										<code>links</code>
									</td>
									<td>List of resources associated with a publication but not required for its
										processing or rendering.</td>
									<td>
										<p>One or more <a><code>LinkedResource</code></a>.</p>
									</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-linked-resource">Linked
											Resources</a>
									</td>
									<td>(None)</td>
								</tr>
							</tbody>
						</table>

						<p>Each element of the <code>links</code> property MUST be expressed either as:</p>

						<ul>
							<li>a [[!json]] <a href="https://tools.ietf.org/html/rfc4627#section-2.5">string</a>
								representing the <a>URL</a> of the resource; or</li>
							<li>an instance of a <a><code>LinkedResource</code></a> object.</li>
						</ul>

						<p>A single string value represents an instance of a <code>LinkedResource</code> object whose
								<code>url</code> property is the string's text.</p>

						<p>The order of items is <em>not significant</em>.</p>

						<p>It is RECOMMENDED to use <code>LinkedResource</code> objects with their <code>rel</code>
							values set.</p>

						<p>Linked resources are typically made available to user agents to augment or enhance the
							processing or rendering, such as:</p>

						<ul>
							<li>a privacy policy or license that the user agent can offer a link to from a shelf;</li>
							<li>a metadata record that the user agent can use to discover and display more information
								about the publication; or</li>
							<li>a dictionary of terms the user agent can process to provide enhanced language help.</li>
						</ul>

						<p>Links can also be used to identify resources used in the online rendering of a publication,
							but that are not essential to include when the publication is taken offline or packaged
							(e.g., to minimize the size). These include:</p>

						<ul>
							<li>large font files that enhance the appearance of the publication but are not vital to its
								display (i.e., a fallback font will suffice); or</li>
							<li>third-party scripts that are not intended for use when a publication is taken offline or
								packaged (e.g., tracking scripts).</li>
						</ul>

						<p>The <code>links</code> list SHOULD include resources necessary to render a linked resource
							(e.g., scripts, images, style sheets).</p>

						<p>Resources listed in the <code>links</code> list MUST NOT be listed in the <a
								href="#default-reading-order">default reading order</a> or <a href="#resource-list"
								>resource list</a>.</p>

						<p>User agents MAY ignore linked resources and are not required to take them offline with a
							publication. These resources SHOULD NOT be included when packaging a publication.</p>

					</section>
				</section>

				<section id="extensibility">
					<h4>Extensibility</h4>

					<p>The manifest is designed to provide a basic set of properties for use by user agents in
						presenting and rendering a <a>digital publication</a>, but MAY be extended in the following
						ways:</p>

					<ol>
						<li>by the provision of <a href="#extensibility-linked-records">linked metadata records</a>;
							or</li>
						<li>through the inclusion of <a href="#extensibility-manifest-properties">additional properties
								in the manifest</a>.</li>
					</ol>

					<p>This specification does not define how such additional properties are compiled, stored or exposed
						by user agents in their <a>internal representation</a> of the manifest. A user agent MAY ignore
						some or all extended properties.</p>

					<section id="extensibility-linked-records">
						<h4>Linked records</h4>

						<p>The manifest MAY be extended through links to metadata records, such as an ONIX&#160;[[onix]]
							or BibTeX&#160;[[bibtex]], using a <a><code>LinkedResource</code></a> object, where:</p>
						<ul>
							<li>the <a href="#linkedresource-rel"><code>rel</code> property</a> of the
									<code>LinkedResource</code> includes a relevant identifier (e.g., if the linked
								record contains descriptive metadata, the <code>describedby</code> identifier
								[[iana-link-relations]] can be used); </li>
							<li>the value of the <code>encodingFormat</code> identifies the MIME media
								type&#160;[[!rfc2046]] defined for that particular type of record, if applicable.</li>
						</ul>

						<p>Linked records are included in the <a href="#resource-list">resource list</a> when they are
							part of the publication (i.e., are needed for more than just manifest extensibility).
							Otherwise, they are included in the <a href="#links">links list</a>.</p>

						<pre class="example" title="Linking to an external ONIX for Books metadata record.">{
    …
    "links"  : [
        {
            "type"            : "LinkedResource",
            "url"             : "https://www.publisher.example.org/time-machine/onix.xml",
            "encodingFormat"  : "application/onix+xml",
            "rel"             : "describedby"
        },
        …
    ],
    …
}</pre>
						<p class="ednote">The <code>application/onix+xml</code> MIME type has not yet been registered by
							IANA at the time of writing this document and is included in the example for illustrative
							purposes only.</p>
					</section>

					<section id="extensibility-manifest-properties">
						<h4>Additional Manifest Properties</h4>

						<p>Additional properties MAY be included directly in the manifest using public schemes like
							[[schema.org]] or [[dcterms]]. Proprietary terms MAY be used, but it is RECOMMENDED that
							such terms be included using <a href="https://www.w3.org/TR/json-ld/#compact-iris">Compact
								IRIs</a>&#160;[[!json-ld11]], with prefixes defined as part of the context.</p>

						<p class="note">Proper use of prefixes and compact IRIs is necessary to use a manifest with a
							full JSON-LD processor, but is not a requirement for the <a href="#manifest-processing"
								>processing algorithm</a> defined by this specification. Validation of prefixed terms
							has to be carried out separately if full JSON-LD processing is expected.</p>

						<pre class="example" title="Extending the basic data set using a vocabulary prefix declaration.">{
    "@context" : [
        "https://schema.org",
        "https://www.w3.org/ns/pub-context",
        {
            "language" : "en",
            "ex"       : "https://example.org/vocab"
        }
    ],
    …
    "ex:region" : "North America",
    …
}</pre>

						<p>The <a href="https://schema.org/docs/jsonldcontext.json">Schema.org context file</a>
							[[schema.org]] defines several prefixes for commonly used vocabularies, such as the Dublin
							Core Terms (`dcterms`) [[dcterms]] and Element Set (`dc`) [[dc11]], the FOAF vocabulary
							(`foaf`) [[foaf]], and the Bibliographic Ontology (`bibo`) [[bibo]]. Properties from these
							vocabularies can be used without their prefixes having to be declared.</p>

						<pre class="example" title="Extending the basic data using the Schema.org 'copyrightYear' and 'copyrightHolder' terms.">{
    …
    "copyrightYear"   : "2015",
    "copyrightHolder" : "World Wide Web Consortium",
    …
}</pre>

						<pre class="example" title="Extending the basic data set using the Dublin Core 'subject' term with the 2012 ACM Classification terms.">{
    …
    "dcterms:subject" : ["Web data description languages","Data integration","Data Exchange"],
    …
}</pre>
					</section>
				</section>
			</section>

			<section id="manifest-rel">
				<h3>Resource Relations</h3>

				<section id="structural-rel">
					<h4>Structural Resources</h4>

					<section id="cover">
						<h5>Cover</h5>

						<p>The <dfn>cover</dfn> is a resource that user agents can use to present a <a>digital
								publication</a> (e.g., in a library or bookshelf, or when initially loading the
							publication).</p>

						<p>The cover is identified by the <code>cover</code> link relation.</p>

						<p>The link to the cover MUST NOT be specified in the <a href="#links">links list</a>.</p>

						<p class="ednote">The <code>cover</code> term is not currently registered in the IANA link
							relations, but the Working Group expects to add it.</p>

						<pre class="example" title="Identifying an HTML cover page.">{
    …
    "resources" : [
        {
            "type"           : "LinkedResource",
            "url"            : "cover.html",
            "encodingFormat" : "text/html",
            "rel"            : "cover"
        },
        …
    ],
    …
}</pre>

						<p>If the cover is an image (whether embedded in an HTML resource or not), it is strongly
							advised to follow <a href="https://www.w3.org/TR/WCAG/#non-text-content">Success Criterion
								1.1.1</a>&#160;[[wcag21]] for the provision of alternative text and extended
							descriptions. For image formats that do not provide the ability to embed this information,
							the <a href="#linkedresource-name"><code>name</code></a> and <a
								href="#linkedresource-description"><code>description</code></a> properties of
									<a><code>LinkedResource</code></a> can be used to provide alternative text and
							extended descriptions, respectively. In these cases, the <code>name</code> property SHOULD
							always be set &#8212; the property can be left empty for decorative images.</p>

						<pre class="example" title="Identifying a cover image. Alternative text and a description are provided in the name and description properties, respectively.">{
    …
    "resources" : [
        {
            "type"           : "LinkedResource",
            "url"            : "whale-image.jpg",
            "encodingFormat" : "image/jpeg",
            "rel"            : "cover",
            "name"           : "Moby Dick attacking hunters",
            "description"    : "A white whale is seen surfacing from the water to attack a small whaling boat"
        },
        …
    ],
    …
}</pre>

						<pre class="example" title="A decorative cover. The name property is left empty.">{
    …
    "resources" : [
        {
            "type"           : "LinkedResource",
            "url"            : "cover.jpg",
            "encodingFormat" : "image/jpeg",
            "rel"            : "cover",
            "name"           : "",
        },
        …
    ],
    …
}</pre>

						<p>If a user agent requires alternative text for a cover image to make an interface accessible,
							and the <code>name</code> property is not specified, it MAY attempt to construct the
							alternative text from the publication metadata. This specification does not mandate how such
							alternative text is created. One method is to construct the alternative text as a string
							that identifies that the image as the cover, followed by the <a href="#pub-title"
								>publication title</a>.</p>

						<p>Only one resource MAY be identified as the cover, but additional covers MAY be specified
							using the <a href="#linkedresource-alternate"><code>alternate</code></a> property (e.g., to
							provide alternative dimensions or resolution).</p>

						<pre class="example" title="Providing a cover image in JPEG and SVG formats.">{
    …
    "resources" : [
        {
            "type"           : "LinkedResource",
            "url"            : "lilliput.jpg",
            "encodingFormat" : "image/jpeg",
            "rel"            : "cover"
            "alternate"      : [
                 {
                     "type"           : "LinkedResource",
                     "url"            : "lilliput.svg",
                     "encodingFormat" : "image/svg+xml",
                     "rel"            : "cover"
                 }
            ]
        },
        …
    ],
    …
}</pre>
					</section>

					<section id="page-list">
						<h5>Page List</h5>

						<p>The page list is a navigational aid that contains a list of static page demarcation points
							within a <a>digital publication</a>.</p>

						<p>The page list is identified by the <code>pagelist</code> link relation.</p>

						<p class="ednote">The <code>pagelist</code> term is not currently registered in the IANA link
							relations but the Working Group expects to add it.</p>

						<p>Only one resource MAY be identified as containing a page list. If multiple instances are
							specified, user agents MUST use the first instance encountered, with precedence given to the
								<a href="#default-reading-order">reading order</a>.</p>

						<p>The link to the page list MUST NOT be specified in the <a href="#links">links list</a>.</p>

						<pre class="example" title="Identifying the resource that contains the page list.">{
    …
    "resources" : [
        {
            "type" : "LinkedResource",
            "url"  : "toc_file.html",
            "rel"  : "pagelist"
        },
        …
    ],
    …
}</pre>
					</section>

					<section id="contents">
						<h5>Table of Contents</h5>

						<p>The table of contents is a navigational aid that provides links to the major structural
							sections of a <a>digital publication</a>.</p>

						<p>The resource that contains the <dfn data-lt="toc">table of contents</dfn> is identified by
							the <code>contents</code> link relation&#160;[[!iana-link-relations]]. The table of contents
							proper is the first element inside that resource with the <code>role</code> value
								<code>doc-toc</code>, as defined in <a href="#app-toc-html"></a>.</p>

						<p>Only one resource MAY be identified as containing the table of contents. If multiple
							instances are specified, user agents MUST use the first instance encountered, with
							precedence given to resources in the <a href="#default-reading-order">reading order</a>.</p>

						<p><a>Profiles</a> of this specification MAY define how to locate a resource containing the
							table of contents when no resource is identified by the <code>contents</code> relation.</p>

						<p>The link to the table of contents MUST NOT be specified in the <a href="#links">links
								list</a>.</p>

						<p>The RECOMMENDED structure and processing model for the table of contents is defined in <a
								href="#app-toc-structure"></a>.</p>

						<pre class="example" title="Identifying the resource that contains the table of contents.">{
    …
    "resources" : [
        {
            "type" : "LinkedResource",
            "url"  : "toc_file.html",
            "rel"  : "contents"
        },
        …
    ],
    …
}</pre>
					</section>
				</section>

				<section id="informative-rel">
					<h4>Informative Resources</h4>

					<section id="accessibility-report">
						<h5>Accessibility Report</h5>

						<p>An accessibility report provides information about the suitability of a <a>digital
								publication</a> for consumption by users with varying preferred reading modalities.
							These reports typically identify the result of an evaluation against established
							accessibility criteria, such as those provided in [[wcag21]], and are an important source of
							information in determining the usability of a publication.</p>

						<p>An accessibility report is identified using the <code>accessibility-report</code> link
							relation.</p>

						<p class="ednote">The <code>accessibility-report</code> term is not currently registered in the
							IANA link relations but the Working Group expects to add it.</p>

						<p>It is helpful to include the report as a resource of the publication so that it is available,
							for example, when a publication is read offline.</p>

						<p class="note">Providing the accessibility report in a human-readable format, such as HTML
							[[html]], helps ensure that it can be accessed and understood by users. Augmenting the
							report with machine-processable metadata, such as provided in
							Schema.org&#160;[[schema.org]], will additionally aid in machine processing.</p>

						<pre class="example" title="Setting a link to an accessibility report.">{
    …
    "resources" : [
        …
        {
            "type" : "LinkedResource",
            "url"  : "https://www.publisher.example.org/sherlock-holmes-accessibility.html",
            "rel"  : "accessibility-report"
        },
        …
    ],
    …
}</pre>
					</section>

					<section id="preview">
						<h5>Preview</h5>

						<p>Not all <a>digital publications</a> will be available to all users (e.g., they might be
							restricted to registered users of a site). In such cases, the publisher might wish to
							provide a preview of the content to entice users to access the full version.</p>

						<p>A <dfn data-lt="preview">preview</dfn> is identified using the <code>preview</code> link
							relation&#160;[[!iana-link-relations]].</p>

						<p>Previews MAY be located externally or included as resources of digital publications.</p>

						<pre class="example" title="Identifying a preview as an audio resource of a digital publication.">{
    …
    "links" : [
        {
            "type"           : "LinkedResource",
            "url"            : "preview.mp3",
            "encodingFormat" : "audio/mpeg",
            "rel"            : "preview"
        },
        …
    ],
    …
}</pre>

						<pre class="example" title="Identifying a preview via an external link.">{
    …
    "links" : [
        {
            "type"           : "LinkedResource",
            "url"            : "https://publisher.example.org/jekyll-hyde-preview.html",
            "encodingFormat" : "text/html",
            "rel"            : "preview"
        },
    	…
    ],
    …
}</pre>
					</section>

					<section id="privacy-policy">
						<h5>Privacy Policy</h5>

						<p>Users often have the legal right to know and control what information is collected about
							them, how such information is stored and for how long, whether it is personally
							identifiable, and how it can be expunged. Including a statement that addresses such privacy
							concerns is consequently an important part of publishing <a>digital publications</a>. Even
							if no information is collected, such a declaration increases the trust users have in the
							content.</p>

						<p>A link to a privacy policy can be included in the manifest for this purpose. It is helpful to
							include the privacy policy as a resource of the publication so that it is available, for
							example, when a publication is read offline.</p>

						<p>A <dfn data-lt="privacyPolicy">privacy policy</dfn> is identified using the
								<code>privacy-policy</code> link relation&#160;[[!iana-link-relations]].</p>

						<pre class="example" title="Identifying a privacy policy via an external link.">{
    …
    "resources"  : [
        …
        {
            "type"           : "LinkedResource",
            "url"            : "https://www.w3.org/Consortium/Legal/privacy-statement-20140324",
            "encodingFormat" : "text/html",
            "rel"            : "privacy-policy"
        },
        …
    ],
    …
}</pre>
					</section>
				</section>

				<section id="rel-extensions">
					<h4>Extensions</h4>

					<p>If additional relations beyond those defined in this specification need to be expressed, the <a
							href="#linkedresource-rel"><code>rel</code> property</a> can be extended in one of the
						following ways:</p>

					<ul>
						<li>using relations defined in a relation vocabulary (e.g., the <a
								href="https://www.iana.org/assignments/link-relations/link-relations.xhtml">IANA link
								registry</a>&#160;[[iana-link-relations]] and <a
								href="http://microformats.org/wiki/existing-rel-values">microformats existing rel
								values</a> [[mfrel]]); or</li>
						<li>using <a href="https://tools.ietf.org/html/rfc8288#section-2.1.2">extension relation
								types</a>&#160;[[!rfc8288]].</li>
					</ul>
				</section>
			</section>
		</section>
		<section id="publication-resources">
			<h2>Publication Resources</h2>

			<p>The list of unique resources belonging to a <a>digital publication</a> &#8212; its <a>bounds</a> &#8212;
				is obtained from the union of resources listed in the <a href="#default-reading-order"
						><code>readingOrder</code></a> and <a href="#resource-list"><code>resources</code></a>,
				including any <a href="#linkedresource-alternate"><code>alternate</code></a> resources. The exact
				process for <a href="#validate-unique-resources">creating this list</a> is described in the manifest
				processing algorithm.</p>

			<p>All other resources are outside the bounds of the digital publication (e.g., resources listed in the
						<a><code>links</code></a> section and hyperlinks in the content to external resources on the
				Web).</p>

			<p>This specification does not place any restrictions on publication resources, but <a>profiles</a> of this
				specification MAY restrict both the content type and location of resources.</p>

			<p>User agents MAY opt to process and render resources differently depending on whether they are within the
				bounds of a digital publication (e.g., exclude external resources from an offline or packaged version of
				a publication).</p>
		</section>
		<section id="manifest-discovery">
			<h2>Manifest Discovery</h2>

			<section id="manifest-link">
				<h3>Linking</h3>

				<p>Links to the manifest MUST take one or both of the following forms:</p>

				<ul>
					<li>
						<p>An HTTP <code>Link</code> header field&#160;[[!rfc5988]] with its <code>rel</code> parameter
							set to the value "<code>publication</code>".</p>
						<pre class="example">Link: &lt;https://example.com/pub/manifest>; rel=publication</pre>
					</li>
					<li>
						<p>A <code>link</code> element&#160;[[!html]] with its <code>rel</code> attribute set to the
							value "<code>publication</code>".</p>
						<pre class="example">&lt;link href="https://example.com/pub/manifest" rel="publication"/></pre>
					</li>
				</ul>

				<p>When a manifest is <a href="#manifest-embed">embedded within an HTML document</a>, the link MUST
					include a fragment identifier that references the <code>script</code> element that contains the
					manifest (see <a href="#manifest-embed"></a>).</p>

				<pre class="example" title="Linking to a manifest within the same HTML resource.">
    &lt;link href="#example_manifest" rel="publication"&gt;
    …
    &lt;script id="example_manifest" type="application/ld+json"&gt;
    {
        "@context" : ["https://schema.org", "https://www.w3.org/ns/pub-context"],
        …
    }
    &lt;/script&gt;
</pre>

				<p>The resource that links to the manifest MUST be included in either the <a
						href="#default-reading-order">default reading order</a> or the <a href="#resource-list">resource
						list</a>.</p>
			</section>

			<section id="manifest-embed">
				<h3>Embedding</h3>

				<p>When a <a>digital publication</a> format allows manifests to be embedded within an HTML document, the
					manifest MUST be included in a <a
						href="https://html.spec.whatwg.org/multipage/scripting.html#the-script-element"
							><code>script</code> element</a>&#160;[[!html]] whose <a
						href="https://www.w3.org/TR/json-ld11/#embedding-json-ld-in-html-documents"><code>type</code>
						attribute is set to <code>application/ld+json</code></a>&#160;[[!json-ld11]].</p>

				<pre class="example" title="Script tag for a publication manifest embedded in an HTML document.">
&lt;script type="application/ld+json"&gt;
    {
        "@context" : ["https://schema.org", "https://www.w3.org/ns/pub-context"],
        …
    }
&lt;/script&gt;
</pre>
			</section>

			<section id="manifest-other-discovery">
				<h3>Other Discovery Methods</h3>

				<p><a>Digital publication</a> formats MAY define alternative methods of discovering a manifest that do
					no involve linking to, or embedding, a manifest (e.g., that manifest could be discovered using a
					restricted name and/or location). This specification does not add any restrictions on such
					methods.</p>
			</section>
		</section>
		<section id="manifest-processing">
			<h2>Processing a Manifest</h2>

			<p>
				<em>This section depends on the Infra Standard [[!infra]].</em>
			</p>

			<section id="processing-intro" class="informative">
				<h3>Introduction</h3>

				<p>Although a <a>digital publication</a>'s manifest is authored as [[json-ld11]], the steps for
					processing a manifest described in this section detail how a user agent transforms the manifest into
					its <a>internal representation</a> of the data. The algorithm describes the process using the
					terminology and data types defined in [[infra]], and, if successful results in an [[infra]] <a
						href="https://infra.spec.whatwg.org/#ordered-map">map</a> of the data being returned.</p>

				<p class="note">An actual implementation of this algorithm will use the corresponding constructs and
					data types of whatever language is used.</p>
			</section>

			<section id="processing-errors">
				<h3>Error Handling</h3>

				<p>The following error types are used in the <a>processing algorithm</a>:</p>

				<ul>
					<li><dfn data-lt="validation errors">validation error</dfn> &#8212; a non-terminating error that
						occurs when the <a href="https://infra.spec.whatwg.org/#map-value">value</a> of a <a
							href="https://infra.spec.whatwg.org/#map-key">key</a> does match its expected input.</li>
					<li><dfn data-lt="fatal errors">fatal error</dfn> &#8212; a terminating error that results, for
						example, when a manifest cannot be processed or does not match critical validity
						constraints.</li>
				</ul>

				<p>User agents SHOULD expose both validation and fatal errors, but this specification does not prescribe
					the way this is done.</p>

				<p>For validation errors, user agents SHOULD differentiate the severity of the error (i.e., whether a
					required or recommended practice has been violated).</p>
			</section>

			<section id="processing-contexts">
				<h3>Processing Contexts</h3>

				<p>Some steps in the <a>processing algorithm</a> depend on the expected value category of a term, so the
					context in which a term is used can affect processing (e.g., <a href="#address"><code>url</code></a>
					expects an <a href="#value-array">Array</a> of URLs only when the direct property of the Publication
					Manifest). To differentiate these uses, a <dfn>context</dfn> is provided to certain function calls.
					This context is set to the type of object that initiates the processing call.</p>

				<p>The default list of <dfn>recognized types</dfn> includes <code>Person</code>,
						<code>Organization</code> and <code>LinkedResource</code>. <a>Profiles</a> MAY extend this list
					to include additional object types.</p>

				<p>If a context is not provided to a function, the term being processed is considered part of the global
					context (i.e., it is a direct child of the manifest).</p>

				<p class="note">When extending the list of recognized types, the <a>normalize data</a> function might
					also need to be extended to ensure that all objects have their type specified (e.g., when string
					values are automatically expanded to objects).</p>
			</section>

			<section id="processing-algorithm">
				<h3>Generate the Internal Representation</h3>

				<p>This algorithm takes the following arguments:</p>

				<ul>
					<li><var>text</var>: a UTF-8 string representing the manifest.</li>
					<li><var>base</var>: a URL string that represents the <a>base URL</a> for the manifest.</li>
					<li><var>document</var>: the <a
							href="https://html.spec.whatwg.org/multipage/dom.html#the-document-object">HTML Document
							(DOM) Node</a>&#160;[[!html]] of the document that <a href="#manifest-discovery">references
							the manifest</a>, when available.</li>
				</ul>

				<p class="note">This algorithm does not describe how the manifest is discovered and obtained. The steps
					by which to do so are defined by each <a>digital publication</a> format.</p>

				<p>To <dfn data-lt="processing algorithm|processing the manifest|processing a manifest">generate the
						internal representation</dfn>, run the following steps:</p>

				<ol>
					<li id="processing-create-processed">
						<p>Let <var>processed</var> be an empty <a href="https://infra.spec.whatwg.org/#ordered-map"
								>map</a> that will contain the <a href="#dfn-internal-representation">internal
								representation</a> of the manifest.</p>
					</li>

					<li id="processing-json-infra">
						<p>Let <var>manifest</var> be the result of parsing <a
								href="https://infra.spec.whatwg.org/#parse-json-into-infra-values">JSON into Infra
								values</a> given <var>text</var>. If <var>manifest</var> is not a <a
								href="https://infra.spec.whatwg.org/#ordered-map">map</a>, <a>fatal error</a>, return
							failure.</p>
						<details>
							<summary>Explanation</summary>
							<p>Publication manifests have to be expressed as JSON objects, not arrays. After converting
								the manifest to [[infra]] types, an additional check is made that the resulting
								structure is a <a href="https://infra.spec.whatwg.org/#ordered-map">map</a>.</p>
						</details>
					</li>

					<li id="processing-context">
						<p>(<a href="#manifest-context"></a>) If <var>manifest["@context"]</var> is not set to a <a
								href="https://infra.spec.whatwg.org/#list">list</a>, or the first and second <a
								href="https://infra.spec.whatwg.org/#list-item">items</a> in
								<var>manifest["@context"]</var> are not the <a
								href="https://infra.spec.whatwg.org/#string">string</a> values
								"<code>https://schema.org</code>" and "<code>https://www.w3.org/ns/pub-context</code>",
							in this order, <a>fatal error</a>, return failure.</p>
						<details>
							<summary>Explanation</summary>
							<p>If the context URLs are not set as expected, the JSON data does not represent a
								publication manifest.</p>
						</details>
					</li>

					<li id="processing-conformance">
						<p>(<a href="#profile-conformance"></a>) Let <var>processed["profile"]</var> be the
								<a>profile</a> the manifest conforms to. Set <var>processed["profile"]</var> as
							follows:</p>
						<ol>
							<li>
								<p>If <var>manifest["conformsTo"]</var> is not set, or does not include a profile the
									user agent recognizes as capable of processing and/or rendering, the user agent
									SHOULD inspect the media type(s) of the resources in the reading order to determine
									if the publication matches a profile it is capable of processing or rendering. If
									so, <a>validation error</a>, set <var>processed["profile"]</var> to the matching
									profile. Otherwise, <a>fatal error</a>, return failure.</p>
							</li>
							<li>
								<p>Otherwise, set <var>processed["profile"]</var> to the first URL in
										<var>manifest["conformsTo"]</var> the user agent is capable of processing and/or
									rendering.</p>
							</li>
						</ol>
						<p class="note">The value of <var>manifest["conformsTo"]</var> could be a <a
								href="https://infra.spec.whatwg.org/#string">string</a> or a <a
								href="https://infra.spec.whatwg.org/#list">list</a> at this step in the process.</p>
						<details>
							<summary>Explanation</summary>
							<p>The profile the publication conforms to determines any additional extension steps that
								have to be performed during processing. These steps are defined by their respective
								specifications.</p>
							<p>The new term <var>profile</var> is created because <var>conformsTo</var> is not
								restricted to profile identifiers (i.e., the new term provides a persistent identifier
								of the profile within the internal representation).</p>
						</details>
					</li>

					<li id="processing-lang-dir">
						<p>(<a href="#manifest-lang-dir-global"></a>) Let <var>lang</var> be the global language and
								<var>dir</var> be the global direction obtained from this step. Set each initially to an
							empty <a href="https://infra.spec.whatwg.org/#string">string</a>.</p>
						<p><a href="https://infra.spec.whatwg.org/#list-iterate">For each</a>
							<var>context</var> of <var>manifest["@context"]</var>, moving from the last <a
								href="https://infra.spec.whatwg.org/#list-item">item</a> to the first, if
								<var>context</var> is a <a href="https://infra.spec.whatwg.org/#ordered-map"
							>map</a>:</p>
						<ol>
							<li>if <var>lang</var> is an empty <a href="https://infra.spec.whatwg.org/#string"
									>string</a> and <var>context["language"]</var> is defined, set <var>lang</var> to
									<var>context["language"]</var>;</li>
							<li>if <var>dir</var> is an empty <a href="https://infra.spec.whatwg.org/#string">string</a>
								and <var>context["direction"]</var> is defined, set <var>dir</var> to
									<var>context["direction"]</var>;</li>
							<li>if neither <var>lang</var> nor <var>dir</var> is an empty <a
									href="https://infra.spec.whatwg.org/#string">string</a>, then <a
									href="https://infra.spec.whatwg.org/#iteration-break">break</a>.</li>
						</ol>
						<p>If <var>lang</var> is neither an empty <a href="https://infra.spec.whatwg.org/#string"
								>string</a> nor a <a href="https://tools.ietf.org/html/bcp47#section-2.2.9"
								>well-formed</a>&#160;[[!bcp47]] language tag, <a>validation error</a>, set
								<var>lang</var> to an empty string.</p>
						<p>If <var>dir</var> is neither an empty <a href="https://infra.spec.whatwg.org/#string"
								>string</a> nor one of the values "<code>ltr</code>" or "<code>rtl</code>",
								<a>validation error</a>, set <var>dir</var> to an empty string.</p>
						<details>
							<summary>Explanation</summary>
							<p>The global language and direction declarations obtained here are used to set the language
								and base direction, respectively, for localizable strings without a declaration.</p>
							<p>The iterator moves backwards through <var>@context</var> as the last language and
								direction declarations override any earlier ones.</p>
						</details>
					</li>

					<li id="processing-context-extension">
						<p>(<a href="#manifest-context"></a>) If a <a>profile</a> requires additional validation of the
							manifest context, those steps are performed here.</p>
						<details>
							<summary>Explanation</summary>
							<p>This extension step allows verification of any information a profile requires be present
								in the manifest context (e.g., additional context URLs or parameters). These steps have
								to be performed at this point, as <code>@context</code> terms are removed as part of the
									<a href="#processing-normalize">data normalization</a> in the next step. A more
								general step for processing profile data is provided at a <a
									href="#processing-extension">later step</a>.</p>
						</details>
					</li>

					<li id="processing-normalize">
						<p><a href="https://infra.spec.whatwg.org/#map-iterate">For each</a>
							<var>term</var> → <var>value</var> of <var>manifest</var>, set <var>processed[term]</var> to
							the result, when successful, of calling <a>normalize data</a> given <var>term</var>,
								<var>value</var>, <var>lang</var>, <var>dir</var> and <var>base</var>. If failure is
							returned, do not add <var>term</var> to <var>processed</var>.</p>
						<details>
							<summary>Explanation</summary>
							<p>The data normalization steps standardize the incoming manifest data to remove any
								authoring conveniences, such as the ability to use strings where objects or arrays are
								expected. The resulting processed data are added to the <var>processed</var> variable
								and are operated on in subsequent steps.</p>
						</details>
					</li>

					<li id="processing-validation">
						<p>Set <var>processed</var> to the result of running <a>data validation</a> given
								<var>processed</var>.</p>
						<details>
							<summary>Explanation</summary>
							<p>The data validation checks ensure that the incoming data matches its expected value
								categories. Any restrictions on the expected values are also enforced at this step, and
								any invalid data is removed from the final representation.</p>
						</details>
					</li>

					<li id="processing-extension">
						<p>If a <a>profile</a> specifies additional processing functions that need to be run, those
							steps are executed at this point.</p>
					</li>

					<li id="processing-defaults">
						<p>Set <var>processed</var> to the result of running <a>add default values</a>, when successful,
							given <var>processed</var> and <var>document</var>, when specified. Otherwise, terminate
							processing, return failure.</p>
						<details>
							<summary>Explanation</summary>
							<p>This step checks if any information missing from the manifest can be obtained from the
								HTML document that links to the document, or from other sources.</p>
						</details>
					</li>

					<li id="processing-end">
						<p>Return <var>processed</var>.</p>
					</li>
				</ol>

				<p class="note">For a visualization of the resulting structure, see <a
						href="#app-internal-rep-data-model"></a>.</p>

				<section id="normalize-data">
					<h4>Normalize Data</h4>

					<p>To <dfn>normalize data</dfn> for a property <var>term</var>'s <var>value</var>, with the <a
							href="#manifest-lang-dir-global">global language</a>
						<var>lang</var>, <a href="#manifest-lang-dir-global">global direction</a>
						<var>dir</var>, <a>base URL</a>
						<var>base</var>, and optional <a>context</a>
						<var>context</var> run these steps:</p>

					<ol>
						<li id="normalize-init">
							<p>Let <var>normalized</var> be the value of <var>value</var>.</p>
							<details>
								<summary>Explanation</summary>
								<p>The data normalization steps are performed on the copy of the incoming value held in
									the <var>normalized</var> variable defined in this step. This variable is returned
									at the end of a successful normalization process.</p>
							</details>
						</li>

						<li id="normalize-context">
							<p>(<a href="#manifest-context"></a>) If <var>term</var> is <var>@context</var>, return
								failure.</p>
							<details>
								<summary>Explanation</summary>
								<p><var>@context</var> provides information for the initial processing of the manifest,
									but is not retained in the internal data representation. Returning a failure signals
									to remove the term.</p>
							</details>
						</li>

						<li id="normalize-arrays">
							<p>(<a href="#value-array"></a>) If, depending on <var>context</var>, <var>term</var>
								expects an <a href="#value-array">array</a> and <var>value</var> is not a <a
									href="https://infra.spec.whatwg.org/#list">list</a>, set <var>normalized</var> to
								the <a href="https://infra.spec.whatwg.org/#list">list</a>:
								«&#160;<var>value</var>&#160;».</p>
							<details>
								<summary>Explanation</summary>
								<p>Various terms require their values to be arrays, but, for the sake of convenience,
									authors are allowed to use a single value instead of a one element array. For
									example,</p>
								<pre class="example">{
    …
    "name"   : "Et dukkehjem",
    "author" : "Henrik Ibsen",
    …
}</pre>
								<p>yields:</p>
								<pre class="example">«[
    …
    "name"   → « "Et dukkehjem" »,
    "author" → « "Henrik Ibsen" »,
    …
]»</pre>
							</details>
						</li>

						<li id="normalize-entities">
							<p>(<a href="#value-entity"></a>) If, depending on <var>context</var>, <var>term</var>
								expects an <a href="#value-array">array</a> of <a href="#value-entity">entities</a>, <a
									href="https://infra.spec.whatwg.org/#list-iterate">for each</a>
								<var>entity</var> of <var>normalized</var>:</p>
							<ol>
								<li>
									<p>if <var>entity</var> is a <a href="https://infra.spec.whatwg.org/#string"
											>string</a>, set <var>entity</var> to the <a
											href="https://infra.spec.whatwg.org/#ordered-map">map</a>:</p>
									<pre>«[
    "type" → « "Person" »,
    "name" → <var>entity</var>
]»</pre>
								</li>
								<li>
									<p>otherwise, if <var>entity</var> is not a <a
											href="https://infra.spec.whatwg.org/#ordered-map">map</a>, <a>validation
											error</a>, <a href="https://infra.spec.whatwg.org/#list-remove">remove</a>
										<var>entity</var> from <var>normalized</var>.</p>
								</li>
								<li>
									<p>otherwise, if <var>entity["type"]</var> is not set, set it to the <a
											href="https://infra.spec.whatwg.org/#list">list</a>:
											<code>«&#160;"Person"&#160;»</code>. If <var>entity["type"]</var> is set but
										does not include the value <code>Person</code> or <code>Organization</code>, <a
											href="https://infra.spec.whatwg.org/#list-append">append</a> the value
											<code>Person</code> to the <a href="https://infra.spec.whatwg.org/#list"
											>list</a>.</p>
								</li>
							</ol>
							<details>
								<summary>Explanation</summary>
								<p>Creators (authors, editors, etc.), are expected to be explicitly defined as an
									object, but, for the sake of convenience, only their name has to be specified in the
									manifest. For example:</p>
								<pre class="example">{
    …
    "author": "Ralph Ellison",
    …
}</pre>
								<p>This rule converts such string values to maps with a default type of
										<code>Person</code>, yielding the following for the preceding example:</p>
								<pre class="example">«[
    …
    "author" → « 
        «[
            "type" → « "Person" »
            "name" → "Ralph Ellison"
        ]»
    »,
    …
]»</pre>
								<p>For simplicity, the conversion of <var>name</var> to a localizable string is
									described by a later step.</p>
							</details>
						</li>

						<li id="normalize-localizable-strings">
							<p>(<a href="#value-localizable-string"></a>) If, depending on <var>context</var>,
									<var>term</var> expects an <a href="#value-array">array</a> of <a
									href="#value-localizable-string">localizable strings</a>, <a
									href="https://infra.spec.whatwg.org/#list-iterate">for each</a>
								<var>item</var> of <var>normalized</var>:</p>
							<ol>
								<li id="ls-value-normalize">
									<p>if <var>item</var> is a <a href="https://infra.spec.whatwg.org/#string"
											>string</a>, set <var>item</var> to the <a
											href="https://infra.spec.whatwg.org/#ordered-map">map</a>:</p>
									<pre>«[
    "value" → <var>item</var>,
    "language" → <var>lang</var>,
    "direction" → <var>dir</var>
]»</pre>
									<p>if <var>lang</var> or <var>dir</var> is not set, or is an empty <a
											href="https://infra.spec.whatwg.org/#string">string</a>, <a
											href="https://infra.spec.whatwg.org/#map-remove">remove</a>
										<var>item["language"]</var> or <var>item["direction"]</var>, respectively.</p>
								</li>
								<li id="ls-error">
									<p>otherwise, if <var>item</var> is not a <a
											href="https://infra.spec.whatwg.org/#ordered-map">map</a>, <a>validation
											error</a>, remove <var>item</var> from <var>normalized</var>.</p>
								</li>
								<li id="ls-map-normalize">
									<p>otherwise, process the <a href="https://infra.spec.whatwg.org/#ordered-map"
											>map</a> in <var>item</var> as follows:</p>
									<ol>
										<li>
											<p>If <var>item["language"]</var> is not set, set it to the value of
													<var>lang</var> when <var>lang</var> is set and is not an empty <a
													href="https://infra.spec.whatwg.org/#string">string</a>.</p>
											<p>Otherwise, if <var>item["language"]</var> is <a
													href="https://infra.spec.whatwg.org/#nulls">null</a>, <a
													href="https://infra.spec.whatwg.org/#map-remove">remove</a>
												<var>item["language"]</var>.</p>
										</li>
										<li>
											<p>If <var>item["direction"]</var> is not set, set it to the value of
													<var>dir</var> when <var>dir</var> is set and is not an empty <a
													href="https://infra.spec.whatwg.org/#string">string</a>.</p>
											<p>Otherwise, if <var>item["direction"]</var> is <a
													href="https://infra.spec.whatwg.org/#nulls">null</a>, <a
													href="https://infra.spec.whatwg.org/#map-remove">remove</a>
												<var>item["direction"]</var>.</p>
										</li>
									</ol>
								</li>
							</ol>
							<details>
								<summary>Explanation</summary>
								<p>Natural language text values are expected to be explicitly defined as localizable
									string objects, but, for the sake of convenience, can be simple strings in the
									manifest. For example, if no language information has been provided via the <a
										href="#manifest-lang-dir-global">global language declaration</a> then:</p>
								<pre class="example">{
    "@context" : ["https://schema.org", "https://www.w3.org/ns/pub-context"],
    "name"     : ["La Comédie humaine"],
    …
}</pre>
								<p>yields:</p>
								<pre class="example">«[
    "name"     → «
        «[
            "value" → "La Comédie humaine"
        ]»
    »,
    …
]»</pre>
								<p>If, however, an explicit language has been provided in the manifest, that language is
									added to the localizable string object. For example,</p>
								<pre class="example">{
    "@context" : [
        "https://schema.org",
        "https://www.w3.org/ns/pub-context",
        {"language": "fr"}
    ],
    "name"     : ["La Comédie humaine"],
    …
}</pre>
								<p>yields:</p>
								<pre class="example">{
    "name"     → «
        «[
            "value"    → "La Comédie humaine"
            "language" → "fr"
        ]»
    »,
    …
}</pre>
								<p>A local setting or a local <code>null</code> value prevents the global value from
									taking effect.</p>
								<pre class="example">{
    "@context" : [
        "https://schema.org",
        "https://www.w3.org/ns/pub-context", 
        {"language":"fr"}
    ],
    …
    "name" : [{
        "value" : "La Comédie humaine"
    }],
    "publisher" : [{
        "type":["Organization"],
        "name":[{
            "value": "Hachette",
            "language": null
        }]
    }],
    …
}</pre>
								<p>yields:</p>
								<pre class="example">{
    "name"     → «
        «[
            "value"    → "La Comédie humaine"
            "language" → "fr"
        ]»
    »,
    "publisher"    → «
        «[
            "type" → « "Organization" »,
            "name" → «
                «[
                    "value" → "Hachette",
                ]»
        ]»
    »,
    …
}</pre>
							</details>
						</li>

						<li id="normalize-linked-resources">
							<p>(<a href="#value-linked-resource"></a>) If, depending on <var>context</var>,
									<var>term</var> expects an <a href="#value-array">array</a> of <a
									href="#value-linked-resource">LinkedResources</a>, <a
									href="https://infra.spec.whatwg.org/#list-iterate">for each</a>
								<var>resource</var> of <var>normalized</var>:</p>
							<ol>
								<li>
									<p>if <var>resource</var> is a string, convert <var>resource</var> to the <a
											href="https://infra.spec.whatwg.org/#ordered-map">map</a>:</p>
									<pre>«[
    "type" → « "LinkedResource" »,
    "url" → <var>resource</var>
]»</pre>
								</li>
								<li>
									<p>otherwise, if <var>resource</var> is not a <a
											href="https://infra.spec.whatwg.org/#ordered-map">map</a>, <a>validation
											error</a>, remove <var>resource</var> from <var>normalized</var>.</p>
								</li>
								<li>
									<p>otherwise, if <var>resource["type"]</var> is not set, set it to the <a
											href="https://infra.spec.whatwg.org/#list">list</a>:
											<code>«&#160;"LinkedResource"&#160;»</code>. If <var>resource["type"]</var>
										is set but does not include the value <code>LinkedResource</code>, <a
											href="https://infra.spec.whatwg.org/#list-append">append</a> that value to
										the <a href="https://infra.spec.whatwg.org/#list">list</a>.</p>
								</li>
							</ol>
							<details>
								<summary>Explanation</summary>
								<p>Resource links are expected to be explicitly designed as an object of type
										<code>LinkedResource</code>, but, for the sake of convenience, only their
									absolute or relative URL has to be specified in the manifest. For example,</p>
								<pre class="example">{
    …
    "resources" : [
        "css/book.css",
        …
    ],
    …
}</pre>
								<p>This step converts the string values to objects, yielding the following for the
									preceding example:</p>
								<pre class="example">«[
    …
    "resources" → «
        «[
            "type" → « "LinkedResource" »,
            "url"  → "css/book.css"
        ]»,
        …
    »,
    …
]»</pre>
								<p>For simplicity, the conversion of relative paths to absolute is described by a later
									step.</p>
							</details>
						</li>

						<li id="normalize-urls">
							<p>(<a href="#value-url"></a>) If, depending on <var>context</var>, <var>term</var> expects
								a <a href="#value-url">URL</a> or <a href="#value-array">array</a> of URLs:</p>
							<ol>
								<li>
									<p>if <var>normalized</var> is a <a href="https://infra.spec.whatwg.org/#string"
											>string</a>, set <var>normalized</var> to the result of running <a>convert
											to absolute URL</a>, when successful, given <var>normalized</var>. If
										failure is returned, return failure.</p>
								</li>
								<li>
									<p>otherwise, if <var>normalized</var> is a <a
											href="https://infra.spec.whatwg.org/#list">list</a>, <a
											href="https://infra.spec.whatwg.org/#list-iterate">for each</a>
										<var>item</var> of <var>normalized</var>, set <var>item</var> to the result of
										running <a>convert to absolute URL</a>, when successful, given
											<var>normalized</var>. If failure is returned, <a
											href="https://infra.spec.whatwg.org/#list-remove">remove</a>
										<var>item</var> from <var>normalized</var>.</p>
								</li>
								<li>
									<p>otherwise, <a>validation error</a>, return failure.</p>
								</li>
							</ol>
							<details>
								<summary>Explanation</summary>
								<p>Relative URLs in the manifest are resolved against the base value to obtain absolute
									URLs. For example:</p>
								<pre>"url": "chapter01.html"</pre>
								<p>for a publication hosted at
										<code>https://example.org/publications/wuthering-heights</code> would yield:</p>
								<pre>"url" → "https://example.org/publications/wuthering-heights/chater01.html"</pre>
							</details>
						</li>

						<li id="normalize-extension">
							<p>(<a href="#extensions"></a>, extension point) If a <a>profile</a> defines processing
								steps for profile-specific terms, those steps are executed at this point.</p>
						</li>

						<li id="normalize-recurse">
							<p>Recursively check <var>normalized</var> as follows to ensure that all properties get
								normalized:</p>
							<ol>
								<li>
									<p>if <var>normalized</var> is a <a href="https://infra.spec.whatwg.org/#list"
											>list</a>, <a href="https://infra.spec.whatwg.org/#list-iterate">for
											each</a>
										<var>item</var> of <var>normalized</var> that is a <a
											href="https://infra.spec.whatwg.org/#ordered-map">map</a>:</p>
									<ol>
										<li>
											<p>if <var>item["type"]</var> is set and includes a <a>recognized type</a>,
													<a href="https://infra.spec.whatwg.org/#map-iterate">for each</a>
												<var>key</var> → <var>keyValue</var> of <var>item</var>, set
													<var>key</var> to the result of running <a
													href="#processing-normalize">normalize data</a>, when successful,
												given <var>key</var>, <var>keyValue</var>, <var>lang</var>,
													<var>dir</var>, <var>base</var> and using <var>item["type"]</var> as
												the context. If failure is returned, <a
													href="https://infra.spec.whatwg.org/#list-remove">remove</a>
												<var>key</var> from <var>item</var>.</p>
										</li>
										<li>
											<p>otherwise, do nothing.</p>
										</li>
									</ol>
								</li>
								<li>
									<p>otherwise, if <var>normalized</var> is a <a
											href="https://infra.spec.whatwg.org/#ordered-map">map</a>:</p>
									<ol>
										<li>
											<p>if <var>normalized["type"]</var> is set and includes a <a>recognized
													type</a>, <a href="https://infra.spec.whatwg.org/#map-iterate">for
													each</a>
												<var>key</var> → <var>keyValue</var> of <var>normalized</var>, set
													<var>key</var> to the result of running <a
													href="#processing-normalize">normalize data</a>, when successful,
												given <var>key</var>, <var>keyValue</var>, <var>lang</var>,
													<var>dir</var>, <var>base</var> and using
													<var>normalized["type"]</var> as the context. If failure is
												returned, <a href="https://infra.spec.whatwg.org/#list-remove"
													>remove</a>
												<var>key</var> from <var>normalized</var>.</p>
										</li>
										<li>
											<p>otherwise, do nothing.</p>
										</li>
									</ol>
								</li>
								<li>
									<p>otherwise, do nothing.</p>
								</li>
							</ol>
							<details>
								<summary>Explanation</summary>
								<p>To ensure that all the properties in the manifest get processed, this step
									recursively checks <var>normalized</var> for additional map entries to process. If
										<var>normalized</var> is a list, each item is inspected to determine if it is a
									map that can be processed.</p>
								<p>If a failure is returned, the item is removed from the map.</p>
							</details>
						</li>

						<li id="normalize-end">
							<p>return <var>normalized</var>.</p>
						</li>
					</ol>

					<section id="convert-absolute-url">
						<h4>Convert to Absolute URL</h4>

						<p>To <dfn>convert to absolute URL</dfn>
							<var>url</var>, with a base URL <var>base</var>, run the following steps:</p>

						<ol>
							<li id="abs-url-check-values">
								<p>If <var>url</var> or <var>base</var> is not a <a
										href="https://infra.spec.whatwg.org/#string">string</a>, or is an empty string,
										<a>validation error</a>, return failure.</p>
								<details>
									<summary>Explanation</summary>
									<p>This step checks that both <var>url</var> and <var>base</var> are non-empty
										strings before attempting to use them.</p>
								</details>
							</li>
							<li id="abs-url-convert">
								<p>Set <var>url</var> to the result of running the <a
										href="https://url.spec.whatwg.org/#concept-url-parser">URL
									parser</a>&#160;[[!url]], when successful, with <var>url</var> as input and
										<var>base</var> as the base URL. If failure is returned, <a>validation
									error</a>, return failure.</p>
								<details>
									<summary>Explanation</summary>
									<p>This step calls the URL parser function on the url to be processed. If the url is
										not an absolute URL, the parser converts it to one using the base URL.</p>
									<p>If parsing returns a failure, a failure is returned to the caller to indicate to
										remove the URL.</p>
								</details>
							</li>
							<li id="abs-url-return">
								<p>Return <var>url</var>.</p>
							</li>
						</ol>
					</section>
				</section>

				<section id="validate-data">
					<h3>Data Validation</h3>

					<p>To perform <dfn>data validation</dfn> on <a href="https://infra.spec.whatwg.org/#ordered-map"
							>map</a>
						<var>data</var>, run the following steps:</p>

					<ol>
						<li id="validate-general">
							<p><a href="https://infra.spec.whatwg.org/#map-iterate">For each</a>
								<var>term</var> → <var>value</var> of <var>data</var>, set <var>term</var> to the result
								of running the <a>global data checks</a>, when successful, given <var>term</var> and
									<var>value</var>. If failure is returned, remove <var>data[term]</var>.</p>
							<details>
								<summary>Explanation</summary>
								<p>This step passes each entry to a set of global validation checks that need to be run
									on the value and recursively on any properties within the value.</p>
								<p>A failure is returned if the property is invalid and has to be removed.</p>
							</details>
						</li>

						<li id="validate-extension">
							<p>If a <a>profile</a> specifies data validation checks, those steps are executed at this
								point.</p>
							<details>
								<summary>Explanation</summary>
								<p>Profile validation steps are prioritized over the default steps so that if profiles
									have, for example, different default values to apply, those values get applied.</p>
							</details>
						</li>

						<li id="validate-type">
							<p>(<a href="#publication-types"></a>) If <var>data["type"]</var> is not set or is an empty
									<a href="https://infra.spec.whatwg.org/#list">list</a>, <a>validation error</a>, set
								to <code>«&#160;"CreativeWork"&#160;»</code>.</p>
						</li>

						<li id="validate-ams">
							<p>(<a href="#accessibility"></a>) If <var>data["accessModeSufficient"]</var> is set, <a
									href="https://infra.spec.whatwg.org/#list-iterate">for each</a>
								<var>item</var> of <var>data["accessModeSufficient"]</var>, if <var>item["type"]</var>
								is not set or does not <a href="https://infra.spec.whatwg.org/#list-contain">contain</a>
									"<code>ItemList</code>", <a href="https://infra.spec.whatwg.org/#list-remove"
									>remove</a>
								<var>item</var> from <var>data["accessModeSufficient"]</var>.</p>
						</li>

						<li id="validate-id">
							<p>(<a href="#canonical-identifier"></a>) If <var>data["id"]</var> is not set or is an empty
									<a href="https://infra.spec.whatwg.org/#string">string</a>, <a>validation
								error</a>.</p>
						</li>

						<li id="validate-duration">
							<p>(<a href="#duration"></a>) If <var>data["duration"]</var> is set and is not a valid
								duration value, per&#160;[[!iso8601-1]], <a>validation error</a>, <a
									href="https://infra.spec.whatwg.org/#map-remove">remove</a>
								<var>data["duration"]</var>.</p>
						</li>

						<li id="validate-last-mod">
							<p>(<a href="#last-modification-date"></a>) If <var>data["dateModified"]</var> is set and is
								not a valid date or date-time per&#160;[[!iso8601-1]], <a>validation error</a>, <a
									href="https://infra.spec.whatwg.org/#map-remove">remove</a>
								<var>data["dateModified"]</var>.</p>
						</li>

						<li id="validate-pub-date">
							<p>(<a href="#publication-date"></a>) If <var>data["datePublished"]</var> is set and is not
								a valid date or date-time per&#160;[[!iso8601-1]], <a>validation error</a>, <a
									href="https://infra.spec.whatwg.org/#map-remove">remove</a>
								<var>data["datePublished"]</var>.</p>
						</li>

						<li id="validate-inlanguage">
							<p>(<a href="#inLanguage"></a>) If <var>data["inLanguage"]</var> is set, <a
									href="https://infra.spec.whatwg.org/#list-iterate">for each</a>
								<var>item</var> of <var>data["inLanguage"]</var>, if <var>item</var> is not <a
									href="https://tools.ietf.org/html/bcp47#section-2.2.9"
								>well-formed</a>&#160;[[!bcp47]], <a>validation error</a>, <a
									href="https://infra.spec.whatwg.org/#list-remove">remove</a>
								<var>item</var> from <var>data["inLanguage"]</var>.</p>
						</li>

						<li id="validate-progression-dir">
							<p>(<a href="#reading-progression-direction"></a>) If <var>data["readingProgression"]</var>
								is not set, set to "<code>ltr</code>". Otherwise, if it is not one of the <a
									href="#reading-progression-direction">required directional values</a>, <a>validation
									error</a>, set to "<code>ltr</code>".</p>
						</li>

						<li id="validate-unique-resources">
							<p>(<a href="#publication-resources"></a>) Obtain and verify the unique URLs within the
								publication <a>bounds</a> as follows:</p>
							<ol>
								<li id="reslist-readingorder">
									<p>If <var>readingOrder</var> is set, let <var>readingOrderURLs</var> be the result
										of running <a>get unique URLs</a> given <var>readingOrder</var>. Otherwise, let
											<var>readingOrderURLs</var> be an empty <a
											href="https://infra.spec.whatwg.org/#ordered-set">ordered set</a>.</p>
								</li>

								<li id="reslist-resources">
									<p>If <var>resources</var> is set, let <var>resourcesURLs</var> be the result of
										running <a>get unique URLs</a> given <var>resources</var>. Otherwise, let
											<var>resourcesURLs</var> be an empty <a
											href="https://infra.spec.whatwg.org/#ordered-set">ordered set</a>.</p>
								</li>

								<li id="reslist-end">
									<p>Set <var>data['uniqueResources']</var> to the <a
											href="https://infra.spec.whatwg.org/#set-union">union</a> of
											<var>readingOrderURLs</var> and <var>resourceURLs</var>.</p>
								</li>
							</ol>
							<details>
								<summary>Explanation</summary>
								<p>This step gets the list of unique URLs within the reading order and the resource
									list. It then sets <var>data['uniqueResources']</var> the union of these two sets,
									which represents the complete list of unique resources within the <a
										href="#publication-resources">bounds of the publication</a>.</p>
								<p>This step also warns if either the <var>readingOrder</var> or <var>resources</var>
									contains duplicate resource declarations. The validation errors are emitted as part
									of obtaining the unique URLs from each list.</p>
							</details>
						</li>

						<li id="validate-links">
							<p>(<a href="#links"></a>) If <var>data["links"]</var> is set, <a
									href="https://infra.spec.whatwg.org/#list-iterate">for each</a>
								<var>link</var> in <var>data["links"]</var>:</p>
							<ol>
								<li id="links-get-url">
									<p>let <var>url</var> be the result of running <a
											href="https://url.spec.whatwg.org/#concept-url-serializer">URL
											serializer</a>&#160;[[!url]] on <var>link["url"]</var> with the <var>exclude
											fragment flag</var> set.</p>
								</li>
								<li id="links-check-pub-resource">
									<p>if <var>data["uniqueResources"]</var>
										<a href="https://infra.spec.whatwg.org/#list-contain">contains</a>
										<var>url</var>, <a>validation error</a>, <a
											href="https://infra.spec.whatwg.org/#list-remove">remove</a>
										<var>link</var> from <var>data["links"]</var>, then <a
											href="https://infra.spec.whatwg.org/#iteration-continue">continue</a>.</p>
								</li>
								<li id="links-check-rel-exists">
									<p>if <var>link["rel"]</var> is not set or is an empty <a
											href="https://infra.spec.whatwg.org/#list">list</a>, <a>validation
										error</a>, then <a href="https://infra.spec.whatwg.org/#iteration-continue"
											>continue</a>.</p>
								</li>
								<li id="links-check-struct-rel">
									<p>if <var>link["rel"]</var>
										<a href="https://infra.spec.whatwg.org/#list-contain">contains</a> any of the
										case-insensitive values "<code>contents</code>", "<code>pagelist</code>" or
											"<code>cover</code>", <a>validation error</a>, <a
											href="https://infra.spec.whatwg.org/#list-remove">remove</a>
										<var>link</var> from <var>data["links"]</var>.</p>
								</li>
							</ol>
							<details>
								<summary>Explanation</summary>
								<p>After obtaining the list of unique publication resources in the previous step, the
									links property is checked to ensure that any linked resources are not also listed as
									publication resources.</p>
								<p>If the link does not specify a <code>rel</code> value, a warning is raised. If its
										<code>rel</code> property specifies a structural resource, the link is removed,
									as structural resources have to be within the publication bounds.</p>
							</details>
						</li>

						<li id="validate-structural-relations">
							<p>(<a href="#structural-rel"></a>) Verify the use of structural relations as follows:</p>
							<ol>
								<li id="rel-create-list">
									<p>Set <var>resources</var> to the value of <var>data["readingOrder"]</var>, when
										defined, otherwise to an empty <a href="https://infra.spec.whatwg.org/#list"
											>list</a>. <a href="https://infra.spec.whatwg.org/#list-extend">Extend</a>
										<var>resources</var> with <var>data["resources"]</var>, when defined.</p>
								</li>
								<li id="rel-check-contents">
									<p>If more than one <a href="https://infra.spec.whatwg.org/#list-item">item</a> in
											<var>resources</var> has a <var>rel</var>
										<a href="https://infra.spec.whatwg.org/#map-entry">entry</a> that <a
											href="https://infra.spec.whatwg.org/#list-contain">contains</a> the
										case-insensitive value "<code>contents</code>", <a>validation error</a>.</p>
								</li>
								<li id="rel-check-pagelist">
									<p>If more than one <a href="https://infra.spec.whatwg.org/#list-item">item</a> in
											<var>resources</var> has a <var>rel</var>
										<a href="https://infra.spec.whatwg.org/#map-entry">entry</a> that <a
											href="https://infra.spec.whatwg.org/#list-contain">contains</a> the
										case-insensitive value "<code>pagelist</code>", <a>validation error</a>.</p>
								</li>
								<li id="rel-check-covers">
									<p>If more than one <a href="https://infra.spec.whatwg.org/#list-item">item</a> in
											<var>resources</var> has a <var>rel</var>
										<a href="https://infra.spec.whatwg.org/#map-entry">entry</a> that <a
											href="https://infra.spec.whatwg.org/#list-contain">contains</a> the
										case-insensitive value "<code>cover</code>", <a>validation error</a>.</p>
									<p>If the cover(s) have an <var>encodingFormat</var>
										<a href="https://infra.spec.whatwg.org/#map-entry">entry</a> that specifies an
										image media type (<code>image/*</code>), and do not have a <var>name</var>
										<a href="https://infra.spec.whatwg.org/#map-entry">entry</a>, <a>validation
											error</a>.</p>
								</li>
							</ol>
							<details>
								<summary>Explanation</summary>
								<p>This checks the resources specified in the reading order and resource list to verify
									that only one instance of a table of content, page list and cover have been
									specified.</p>
								<p>For covers, it also checks that a name has been set on image-based formats for
									accessibility purposes.</p>
							</details>
						</li>

						<li id="validate-empty-arrays">
							<p><a href="https://infra.spec.whatwg.org/#map-iterate">For each</a>
								<var>term</var> → <var>value</var> of <var>data</var>, if running <a>remove empty
									arrays</a> given the variables <var>term</var> and <var>value</var> returns failure,
									<a href="https://infra.spec.whatwg.org/#map-remove">remove</a>
								<var>data["term"]</var>.</p>
							<details>
								<summary>Explanation</summary>
								<p>As the processing of the manifest involves removing invalid values at various stages,
									the final data structure might end up with some lists that not no longer contain any
									values. This step iterates back over the data and removes any such empty lists.</p>
							</details>
						</li>

						<li id="validate-end">
							<p>Return <var>data</var>.</p>
						</li>
					</ol>

					<section id="global-data-checks">
						<h4>Global Data Checks</h4>

						<p>To process the <dfn>global data checks</dfn> on a property <var>term</var>'s <var>value</var>
							with an optional <a>context</a>
							<var>context</var>, run these steps:</p>

						<ol>
							<li id="global-value-categories">
								<p>(<a href="#properties-value-categories"></a>) If <var>term</var> has a known <a
										href="#properties-value-categories">value category</a>, set <var>value</var> to
									the result of calling <a>verify value category</a>, when successful, given the
									variables <var>term</var>, <var>value</var> and <var>context</var>. If failure is
									returned, return failure.</p>
								<p>Otherwise, return <var>value</var>.</p>
								<details>
									<summary>Explanation</summary>
									<p>This step verifies that the value of the term matches the expected category
										required for the term. For example, the abridged term requires a boolean value,
										so any other value used with the term will result in a failure.</p>
									<p>If a failure occurs calling the function, this step also returns a failure so
										that the property is removed from the final data set.</p>
									<p>Terms without a known value category are not processed, so the incoming value is
										returned.</p>
								</details>
							</li>

							<li id="global-recurse">
								<p>Recursively descend into <var>value</var> as follows to check any sub-properties
									first:</p>
								<ol>
									<li id="global-recurse-maps">
										<p>if <var>value</var> is a <a href="https://infra.spec.whatwg.org/#ordered-map"
												>map</a>:</p>
										<ol>
											<li>
												<p>if <var>value["type"]</var> includes a <a>recognized type</a>, <a
														href="https://infra.spec.whatwg.org/#map-iterate">for each</a>
													<var>key</var> → <var>keyValue</var> of <var>value</var>, set
														<var>value[key]</var> to the result of running <a>global data
														checks</a>, when successful, given <var>key</var>,
														<var>keyValue</var> and using <var>value["type"]</var> as the
													context. If failure is returned, <a
														href="https://infra.spec.whatwg.org/#map-remove">remove</a>
													<var>value[key]</var>.</p>
											</li>
											<li>
												<p>otherwise, do nothing.</p>
											</li>
										</ol>
									</li>

									<li id="global-recurse-lists">
										<p>otherwise, if <var>value</var> is a <a
												href="https://infra.spec.whatwg.org/#list">list</a>, <a
												href="https://infra.spec.whatwg.org/#list-iterate">for each</a>
											<var>item</var> of <var>value</var>, if <var>item</var> is a <a
												href="https://infra.spec.whatwg.org/#ordered-map">map</a>:</p>
										<ol>
											<li>
												<p>if <var>item["type"]</var> includes a <a>recognized type</a>, <a
														href="https://infra.spec.whatwg.org/#map-iterate">for each</a>
													<var>key</var> → <var>keyValue</var> of <var>item</var>, set
														<var>item[key]</var> to the result of running <a>global data
														checks</a>, when successful, given <var>key</var>,
														<var>keyValue</var> and using <var>item["type"]</var> as the
													context. If failure is returned, <a
														href="https://infra.spec.whatwg.org/#map-remove">remove</a>
													<var>item[key]</var>.</p>
											</li>
											<li>
												<p>otherwise, do nothing.</p>
											</li>
										</ol>
									</li>
									<li id="global-recurse-ignore">
										<p>otherwise, do nothing.</p>
									</li>
								</ol>
								<details>
									<summary>Explanation</summary>
									<p>To ensure that all the properties in the manifest get processed, this step
										recursively checks each entry for additional map entries to process. If the
										value is a list, each item is inspected to determine if it is a map that can be
										processed.</p>
									<p>Its placement also ensures that all subproperties are checked first, so that the
										higher-level checks later in the step are tested after any invalid values are
										removed.</p>
								</details>
							</li>

							<li id="global-language">
								<p>(<a href="#manifest-lang-dir-global"></a> and <a href="#manifest-lang-dir-local"
									></a>) If <var>term</var> expects an <a href="#value-array">array</a> of
											<a><code>LocalizableStrings</code></a>, <a
										href="https://infra.spec.whatwg.org/#list-iterate">for each</a>
									<var>item</var> of <var>value</var>:</p>
								<ul>
									<li>
										<p>if <var>item["value"]</var> is not set, <a
												href="https://infra.spec.whatwg.org/#list-remove">remove</a>
											<var>item</var> from <var>value</var>.</p>
									</li>
									<li>
										<p>if <var>item["language"]</var> is set and its value is not <a
												href="https://tools.ietf.org/html/bcp47#section-2.2.9"
											>well-formed</a>&#160;[[!bcp47]], <a>validation error</a>, <a
												href="https://infra.spec.whatwg.org/#map-remove">remove</a>
											<var>item["language"]</var>.</p>
									</li>
									<li>
										<p>if <var>item["direction"]</var> is set and its value is not one of
												"<code>ltr</code>" or "<code>rtl</code>", <a>validation error</a>, <a
												href="https://infra.spec.whatwg.org/#map-remove">remove</a>
											<var>item["direction"]</var>.</p>
									</li>
								</ul>
								<details>
									<summary>Explanation</summary>
									<p>This step checks that localizable strings have values, that their language
										declarations are well formed, and that their direction declarations have either
										the value "ltr" or "rtl".</p>
								</details>
							</li>

							<li id="global-entities">
								<p>(<a href="#value-entity"></a>) If <var>term</var> expects an <a href="#value-array"
										>array</a> of <a href="#value-entity">entities</a>, <a
										href="https://infra.spec.whatwg.org/#list-iterate">for each</a>
									<var>item</var> of <var>value</var>, check whether <var>item["name"]</var> is
									set:</p>
								<ul>
									<li>
										<p>If not, <a>validation error</a>, <a
												href="https://infra.spec.whatwg.org/#list-remove">remove</a>
											<var>item</var> from <var>value</var>.</p>
									</li>
									<li>If so, <a href="https://infra.spec.whatwg.org/#list-iterate">for each</a>
										<var>name</var> of <var>item["name"]</var>, if <var>name["value"]</var> is not
										set, or is an empty string, <a href="https://infra.spec.whatwg.org/#list-remove"
											>remove</a>
										<var>name</var> from <var>item["name"]</var>.</li>
								</ul>
								<details>
									<summary>Explanation</summary>
									<p>This step ensures that all entities have a name. Entities without a name are
										removed.</p>
								</details>
							</li>

							<li id="global-linkedresource">
								<p>(<a href="#value-linked-resource"></a>) If <var>term</var> expects an <a
										href="#value-array">array</a> of <a>LinkedResources</a>, <a
										href="https://infra.spec.whatwg.org/#list-iterate">for each</a>
									<var>resource</var> of <var>value</var>:</p>
								<ul>
									<li>
										<p>if <var>resource["url"]</var> is not set, or its value is an empty string,
												<a>validation error</a>, <a
												href="https://infra.spec.whatwg.org/#list-remove">remove</a>
											<var>resource</var> from <var>value</var>, then <a
												href="https://infra.spec.whatwg.org/#iteration-continue"
											>continue</a>.</p>
										<p>Otherwise, if <var>resource["url"]</var> is not a valid URL&#160;[[!url]],
												<a>validation error</a>, <a
												href="https://infra.spec.whatwg.org/#list-remove">remove</a>
											<var>resource</var> from <var>value</var>, then <a
												href="https://infra.spec.whatwg.org/#iteration-continue"
											>continue</a>.</p>
									</li>
									<li>
										<p>if <a href="#linkedresource-duration"><var>resource["duration"]</var></a> is
											set and is not a valid duration value, per&#160;[[!iso8601-1]],
												<a>validation error</a>, <a
												href="https://infra.spec.whatwg.org/#map-remove">remove</a>
											<var>resource["duration"]</var>.</p>
									</li>
								</ul>
								<details>
									<summary>Explanation</summary>
									<p>This step performs the following two checks on the terms of a
											<code>LinkedResource</code>:</p>
									<ol>
										<li>If a URL is not specified, or is invalid, the <code>LinkedResource</code> is
											removed.</li>
										<li>If the duration of the resource is specified, or is not a value ISO 8601
											duration value, the duration property is removed.</li>
									</ol>
								</details>
							</li>

							<li id="global-end">
								<p>Return <var>value</var>.</p>
							</li>
						</ol>
					</section>

					<section id="verify-value-category">
						<h4>Verify Value Category</h4>

						<p>To <dfn>verify value category</dfn> of a property <var>term</var>'s <var>value</var> with a
								<a>context</a>
							<var>context</var>, run these steps:</p>

						<ol>
							<li id="verify-array">
								<p>If, depending on the <var>context</var>, <var>term</var> expects an <a
										href="#value-array">array</a>:</p>
								<ol>
									<li id="verify-array-invalid">
										<p>if <var>value</var> is not a <a href="https://infra.spec.whatwg.org/#list"
												>list</a>, <a>validation error</a>, return failure.</p>
									</li>
									<li id="verify-array-item-check">
										<p>otherwise, <a href="https://infra.spec.whatwg.org/#list-iterate">for each</a>
											<var>item</var> of <var>value</var>:</p>
										<ol>
											<li id="verify-array-item-invalid">
												<p>if <var>item</var> does not match the expected value category of the
													array, <a>validation error</a>, <a
														href="https://infra.spec.whatwg.org/#list-remove">remove</a>
													<var>item</var> from <var>value</var>, then <a
														href="https://infra.spec.whatwg.org/#iteration-continue"
														>continue</a>.</p>
											</li>
											<li id="verify-array-item-recurse">
												<p>if <var>item</var> is a <a
														href="https://infra.spec.whatwg.org/#ordered-map">map</a>, <a
														href="https://infra.spec.whatwg.org/#map-iterate">for each</a>
													<var>key</var> → <var>keyValue</var> of <var>item</var>, if
														<var>key</var> has an expected value category, set
														<var>key</var> to the result of running <a>verify value
														category</a> given <var>key</var>, <var>keyValue</var>, and
													using <var>item["type"]</var> as the context. If the result of
													processing <var>item</var> is an empty <a
														href="https://infra.spec.whatwg.org/#ordered-map">map</a>,
														<a>validation error</a>, <a
														href="https://infra.spec.whatwg.org/#list-remove">remove</a>
													<var>item</var> from <var>value</var>.</p>
											</li>
										</ol>
										<p>If the result of processing <var>value</var> is an empty <a
												href="#value-array">array</a>, <a>validation error</a>, return
											failure.</p>
									</li>
								</ol>
							</li>

							<li id="verify-map">
								<p>Otherwise, if, depending on the <var>context</var>, <var>term</var> expects a <a
										href="https://infra.spec.whatwg.org/#ordered-map">map</a>:</p>
								<ol>
									<li id="verify-map-invalid">
										<p>if <var>value</var> is not a <a
												href="https://infra.spec.whatwg.org/#ordered-map">map</a>, <a>validation
												error</a>, return failure.</p>
									</li>
									<li id="verify-map-recurse">
										<p>otherwise, <a href="https://infra.spec.whatwg.org/#map-iterate">for each</a>
											<var>key</var> → <var>keyValue</var> of <var>value</var>, if <var>key</var>
											has an expected value category, set <var>key</var> to the result of running
												<a>verify value category</a> given <var>key</var>, <var>keyValue</var>
											and using <var>value["type"]</var> as the context. If the result of
											processing <var>value</var> is an empty <a
												href="https://infra.spec.whatwg.org/#ordered-map">map</a>, <a>validation
												error</a>, return failure.</p>
									</li>
								</ol>
								<p class="note">This step currently only exists for use by <a>profiles</a>. The
									properties defined in this specification all accept <a href="#value-array"
										>arrays</a> of objects.</p>
							</li>

							<li id="verify-type-invalid">
								<p>Otherwise, if, depending on the <var>context</var>, <var>value</var> does not match
									the expected value category of <var>term</var>, <a>validation error</a>, return
									failure.</p>
							</li>

							<li id="verify-return">
								<p>Return <var>value</var>.</p>
							</li>
						</ol>
						<details>
							<summary>Explanation</summary>
							<p>This function checks that the value of the term being processed matches its expected
								value category. The function is recursively called when the value is a list or map to
								ensure that all properties in the manifest get checked.</p>
						</details>
					</section>

					<section id="get-unique-urls">
						<h4>Get Unique URLs</h4>

						<p>To <dfn>get unique URLs</dfn> from <var>resources</var>, run the following steps:</p>

						<ol>
							<li id="unique-url-var">
								<p>Let <var>uniqueURLs</var> be an empty <a
										href="https://infra.spec.whatwg.org/#ordered-set">ordered set</a>.</p>
							</li>

							<li id="unique-url-parse">
								<p>For each <var>resource</var> of <var>resources</var>:</p>
								<ol>
									<li id="unique-parse-url">
										<p>let <var>url</var> be the result of running <a
												href="https://url.spec.whatwg.org/#concept-url-serializer">URL
												serializer</a>&#160;[[!url]] on <var>resource["url"]</var> with
												<var>exclude fragment flag</var> set.</p>
									</li>

									<li id="unique-parse-test">
										<p>if <var>uniqueURLs</var>
											<a href="https://infra.spec.whatwg.org/#list-contain">contains</a>
											<var>url</var>, <a>validation error</a>. Otherwise, <a
												href="https://infra.spec.whatwg.org/#set-append">append</a>
											<var>url</var> to <var>uniqueURLs</var>.</p>
									</li>
									<li id="unique-alternate-parse">
										<p>if <var>resource["alternate"]</var> is set, for each <var>alternate</var> of
												<var>resource["alternate"]</var>:</p>
										<ol>
											<li id="alternate-parse-url">
												<p>let <var>alt_url</var> be the result of running <a
														href="https://url.spec.whatwg.org/#concept-url-serializer">URL
														serializer</a>&#160;[[!url]] on <var>alternate["url"]</var> with
														<var>exclude fragment flag</var> set.</p>
											</li>

											<li id="alternate-parse-test">
												<p>if <var>uniqueURLs</var>
													<a href="https://infra.spec.whatwg.org/#list-contain">contains</a>
													<var>alt_url</var>, <a>validation error</a>.</p>
											</li>

											<li id="alternate-parse-append">
												<p>otherwise, <a href="https://infra.spec.whatwg.org/#set-append"
														>append</a>
													<var>alt_url</var> to <var>uniqueURLs</var>.</p>
											</li>
										</ol>
									</li>

								</ol>
							</li>

							<li id="unique-url-end">
								<p>Return <var>uniqueURLs</var>.</p>
							</li>
						</ol>

						<details>
							<summary>Explanation</summary>
							<p>This function takes a list of <a><code>LinkedResource</code></a> objects &#8212; from
								either the reading order or resource list &#8212; and returns the set of unique URLs. If
								duplicates are encountered, warnings are issued.</p>
						</details>
					</section>

					<section id="remove-empty-arrays">
						<h4>Remove Empty Arrays</h4>

						<p>To <dfn>remove empty arrays</dfn> from a property <var>term</var>'s <var>value</var>, run
							these steps:</p>

						<ol>
							<li id="array-empty">
								<p>If <var>value</var> is an empty <a href="https://infra.spec.whatwg.org/#list"
										>list</a>, return failure.</p>
							</li>

							<li id="array-children">
								<p>Otherwise, if <var>value</var> is a <a
										href="https://infra.spec.whatwg.org/#ordered-map">map</a>, <a
										href="https://infra.spec.whatwg.org/#map-iterate">for each</a>
									<var>key</var> → <var>keyValue</var> of <var>value</var>, if running <a>remove empty
										arrays</a> given <var>key</var> and <var>keyValue</var> returns failure, <a
										href="https://infra.spec.whatwg.org/#map-remove">remove</a>
									<var>value[key]</var>.</p>
							</li>
						</ol>
						<details>
							<summary>Explanation</summary>
							<p>This function checks that the value of the term being processed is not an empty list. A
								term that initially has a list can lose entries as it gets processed (i.e., when the
								list items are invalid).</p>
						</details>
					</section>
				</section>

				<section id="add-default-values">
					<h3>Add Default Values</h3>

					<p>To <dfn>add default values</dfn> for missing properties in <a
							href="https://infra.spec.whatwg.org/#ordered-map">map</a>
						<var>data</var> with an optional <a
							href="https://html.spec.whatwg.org/multipage/dom.html#the-document-object">HTML Document
							(DOM) Node</a>&#160;[[!html]] <var>document</var>, run the following steps:</p>

					<ol>
						<li id="processing-defaults-title">
							<p>(<a href="#pub-title"></a>) If <var>data["name"]</var> is not set:</p>
							<ul>
								<li>
									<p>Let <var>title</var> be an empty <a
											href="https://infra.spec.whatwg.org/#ordered-map">map</a>. Set its values as
										follows:</p>
									<ul>
										<li>
											<p>if <var>document</var> is set, if the <a
													href="https://html.spec.whatwg.org/multipage/semantics.html#the-title-element"
														><code>title</code></a> element&#160;[[!html]] of
													<var>document</var> is set and is not empty, set
													<var>title["value"]</var> to the text content of the
													<code>title</code> element.</p>
											<p>Set <var>title["language"]</var> to the <a
													href="https://html.spec.whatwg.org/multipage/dom.html#the-lang-and-xml%3Alang-attributes"
													>language</a>&#160;[[!html]], if available, and
													<var>title["direction"]</var> to the <a
													href="https://html.spec.whatwg.org/multipage/dom.html#the-dir-attribute"
													>base direction</a>&#160;[[!html]] if that value is available and
												its value is either "<code>ltr</code>" or "<code>rtl</code>". </p>
										</li>
										<li>
											<p>otherwise, <a>validation error</a>, generate a value for
													<var>title["value"]</var> (see the <a href="#generate_title"
													>separate note for details</a>). Set <var>title["language"]</var>
												and <var>title["direction"]</var> as appropriate for the generated
												title.</p>
										</li>
									</ul>
								</li>
								<li>Set <var>data["name"]</var> to the <a href="https://infra.spec.whatwg.org/#list"
										>list</a>: <code>«&#160;<var>title</var>&#160;»</code>.</li>
							</ul>
							<details>
								<summary>Explanation</summary>
								<p>This step adds the content of the <code>title</code> element of <var>document</var>
									when the <code>name</code> property is not specified in the manifest. For
									example:</p>
								<pre class="example">&lt;html&gt;
&lt;head lang="en"&gt;
    &lt;title&gt;The Golden Bough&lt;/title&gt;
    …
    &lt;script type="application/ld+json"&gt;
    {
        "@context" : ["https://schema.org","https://www.w3.org/ns/pub-context"],
        …
    }
    &lt;/script&gt;</pre>
								<p>yields:</p>
								<pre class="example">«[
    …
    "name" → «
        «[
            "value"    → "The Golden Bough",
            "language" → "en"
        ]»
    »,
    …
]»</pre>
							</details>
						</li>

						<li id="processing-defaults-reading-order">
							<p>(<a href="#default-reading-order"></a> and <a href="#manifest-link"></a>) If
									<var>data["readingOrder"]</var> is not set:</p>
							<ul>
								<li>
									<p>if either <var>document</var> or <a data-cite="!dom#concept-document-url"
												><var>document.URL</var></a> is not set, <a>fatal error</a>, return
										failure.</p>
								</li>
								<li>
									<p>set <var>data["readingOrder"]</var> to an empty <a
											href="https://infra.spec.whatwg.org/#list">list</a> and <a
											href="https://infra.spec.whatwg.org/#list-append">append</a> the <a
											href="https://infra.spec.whatwg.org/#ordered-map">map</a>
										<code>«[&#160;"url" → <a data-cite="!dom#concept-document-url"
													><var>document.URL</var></a>&#160;]»</code>.</p>
								</li>
								<li>
									<p><a href="https://infra.spec.whatwg.org/#set-append">append</a>
										<a data-cite="!dom#concept-document-url"><var>document.URL</var></a> to
											<var>data["uniqueResources"]</var>.</p>
								</li>
							</ul>
							<details>
								<summary>Explanation</summary>
								<p>If the Digital Publication consists only of the referencing document, the default
									reading order can be omitted; it will consist, automatically, of that single
									resource. </p>
							</details>
						</li>

						<li id="processing-defaults-extension">
							<p>If a <a>profile</a> specifies default values the user agent has to generate, those steps
								are executed at this point.</p>
						</li>

						<li id="processing-defaults-linking-resource">
							<p>(<a href="#manifest-link"></a>) If <a data-cite="!dom#concept-document-url"
										><var>document.URL</var></a> is set and <var>data["uniqueResources"]</var> does
								not <a href="https://infra.spec.whatwg.org/#list-contain">contain</a>
								<var>document.URL</var>, <a>validation error</a>.</p>
							<details>
								<summary>Explanation</summary>
								<p>If the page that links to the manifest is not listed as a unique resource of the
									publication after processing core and extension default value rules, an error is
									raised as it has to be a publication resource.</p>
							</details>
						</li>

						<li>
							<p>Return <var>data</var>.</p>
						</li>
					</ol>
				</section>
			</section>
		</section>
		<section id="extensions">
			<h2>Modular Extensions</h2>

			<p>The manifest format defined in this specification is designed to be implemented and extended by
				publishing communities in the production of new <a>profiles</a> (e.g., audiobooks and scholarly
				publications). The flexibility the manifest format offers allows it to be tailored to each community's
				specific needs while also providing a common base for user agents that need to process the profiles
				(i.e., minimizing the differences between each profile and simplifying interoperability).</p>

			<p>For a profile to be compatible with this specification, the following conditions MUST be met: </p>

			<ol>
				<li>It MUST adhere to the requirements for constructing a manifest as defined in <a href="#manifest"
					></a>.</li>
				<li>It MUST define a unique conformance URL and require that conforming publications include this URL in
					their <a href="#profile-conformance"><code>conformsTo</code> property</a>.</li>
				<li>One or both <a href="#manifest-link">linking methods</a> MUST be used in the discovery of the
					manifest.</li>
				<li>The generic processing steps described in <a href="#manifest-processing"></a> MUST remain valid for
					the extended manifest. To achieve this, and if new terms are added to the general manifest, then: <ul>
						<li>The term SHOULD be categorized, if applicable, to one or more of the general term categories
							used in the algorithm (e.g., <a href="#value-array">array</a> or <a
								href="#value-localizable-string">localizable string</a>). This means the relevant
							processing steps will be automatically executed for those terms </li>
						<li>If necessary, the profile MAY define its own processing step(s), to be executed at the
							designated extension points within the <a href="#manifest-processing">processing
								algorithm</a>. Such extra steps MUST NOT invalidate the results of any of the steps
							defined for the <a href="#manifest-processing">processing algorithm</a> in general.</li>
					</ul>
				</li>
			</ol>
			<p class="ednote"> Adding an example of a term added by, e.g., the audiobook profile would be a good idea,
				when available. </p>
		</section>
		<section id="security-privacy">
			<h2>Security and Privacy Considerations</h2>

			<p>As the manifest is expressed using JSON-LD, the <a href="https://www.w3.org/TR/json-ld11/#privacy"
					>privacy</a> and <a href="https://www.w3.org/TR/json-ld11/#iana-considerations">security
					considerations</a> [[!json-ld11]] detailed in that specification are applicable to all <a
					href="#extensions">profiles</a> of the manifest.</p>

			<p>Some additional general considerations for profiles include:</p>

			<ul>
				<li>The location of resources is not defined at the manifest level, so profiles that allow references to
					remotely hosted resources will need to be concerned with Web security principles (e.g., cross-origin
					resource sharing).</li>
				<li>The ability to <a href="#links">link to external resources</a> potentially exposes users to
					malicious content.</li>
				<li>The manifest allows personally identifiable information about a digital publication's creator(s)
					(e.g., names, identifying URLs) to be included, so authoring tools could expose unexpected
					information if explicit author approval of metadata is not required.</li>
			</ul>

			<p>More specific security and privacy considerations are left to each profile to detail, as these will vary
				depending on the nature of the <a>digital publication</a> format.</p>
		</section>
		<section id="app-internal-rep-data-model" class="appendix informative">
			<h2>Internal Representation Data Model</h2>

			<p>The manifest includes several authoring conveniences, such as default values, the ability to use strings
				where objects would normally be required, and the automatic compilation of information from other
				sources (e.g., for the <a href="#pub-title">title</a> and <a href="#default-reading-order">reading
					order</a>). The <a href="#manifest-processing">processing of the manifest</a> normalizes these
				conveniences and results in a consistent data set for user agents (the <a>internal representation</a>),
				but this set is not easily visualized from the processing algorithm.</p>

			<p>This appendix provides an informative abstract data model using [[WebIDL]] that describes the resulting
				data structure. This definition expresses the expected names, datatypes, and possible restrictions for
				each member of the manifest after <a href="#manifest-processing">processing</a>.</p>

			<p class="note">The choice of WebIDL is only for illustrative purposes. This specification does not define
				an API for exposing the manifest data.</p>

			<section id="webidl-wpm">
				<h3>The <code>PublicationManifest</code> Dictionary</h3>

				<pre id="wpm">
dictionary PublicationManifest {
             sequence&lt;DOMString>         type = "CreativeWork";
    required DOMString                   profile;
             sequence&lt;DOMString>         conformsTo;
             DOMString                   id;
             boolean                     abridged;
             sequence&lt;DOMString>         accessMode;
             sequence&lt;DOMString>         accessModeSufficient;
             sequence&lt;DOMString>         accessibilityFeature;
             sequence&lt;DOMString>         accessibilityHazard;
             sequence&lt;LocalizableString> accessibilitySummary;
             sequence&lt;Entity>            artist;
             sequence&lt;Entity>            author;
             sequence&lt;Entity>            colorist;
             sequence&lt;Entity>            contributor;
             sequence&lt;Entity>            creator;
             sequence&lt;Entity>            editor;
             sequence&lt;Entity>            illustrator;
             sequence&lt;Entity>            inker;
             sequence&lt;Entity>            letterer;
             sequence&lt;Entity>            penciler;
             sequence&lt;Entity>            publisher;
             sequence&lt;Entity>            readBy;
             sequence&lt;Entity>            translator;
             sequence&lt;DOMString>         url;
             DOMString                   duration;
             sequence&lt;DOMString>         inLanguage;
             DOMString                   dateModified;
             DOMString                   datePublished;
             TextDirection               readingProgression = "ltr";
    required sequence&lt;LocalizableString> name;
    required sequence&lt;LinkedResource>    readingOrder;
             sequence&lt;LinkedResource>    resources;
             sequence&lt;LinkedResource>    links;
             sequence&lt;DOMString>         uniqueResources;
};

enum TextDirection {
    "ltr",
    "rtl"
};
</pre>
				<section id="LinkedResource">
					<h4>The <code>LinkedResource</code> Dictionary</h4>

					<pre>
dictionary LinkedResource {
    required DOMString                   url;
             DOMString                   encodingFormat;
             sequence&lt;LocalizableString> name;
             sequence&lt;LocalizableString> description;
             sequence&lt;DOMString>         rel;
             DOMString                   integrity;
             DOMString                   duration;
             sequence&lt;LinkedResource>    alternate;
};</pre>
				</section>

				<section id="Entity">
					<h4>The <code>Entity</code> Dictionary</h4>

					<pre>
dictionary Entity {
             sequence&lt;DOMString>         type;
    required sequence&lt;LocalizableString> name;
             DOMString                   id;
             DOMString                   url;
             sequence&lt;DOMString>         identifier;
};
</pre>
				</section>

				<section id="LocalizableString">
					<h4>The <code>LocalizableString</code> Dictionary</h4>

					<pre>
dictionary LocalizableString {
    required DOMString                   value;
             DOMString                   language;
             TextDirection               direction;
};
</pre>
				</section>
			</section>
		</section>
		<section id="app-select-alternate" class="appendix">
			<h3>Selecting an Alternate Resource</h3>

			<p>
				<em>This appendix depends on the Infra Standard [[!infra]].</em>
			</p>

			<p>To <dfn>select an alternate resource</dfn> for a <a><code>LinkedResource</code></a>
				<var>resource</var>, run the following steps.</p>

			<p>If successful, this algorithm returns an alternate resource. Otherwise, it returns failure.</p>

			<ol>
				<li id="select-alt-var">
					<p>Let <var>possibleAlternates</var> be an empty <a href="https://infra.spec.whatwg.org/#list"
							>list</a>.</p>
				</li>
				<li id="select-alt-none">
					<p>If <var>resource["alternate"]</var> is not set, return failure.</p>
				</li>
				<li id="select-alt-iterate">
					<p><a href="https://infra.spec.whatwg.org/#list-iterate">For each</a>
						<var>alternate</var> of <var>resource["alternate"]</var>:</p>
					<ol>
						<li id="select-alt-supported">
							<p>if <var>alternate["encodingFormat"]</var> is set and the user agent supports the
								specified media type, <a href="https://infra.spec.whatwg.org/#list-append">append</a> to
									<var>possibleAlternates</var>.</p>
						</li>
						<li id="select-alt-ext">
							<p>otherwise, if a <a>profile</a> defines additional selection criteria, evaluate
									<var>alternate</var> against them in this extension step.</p>
						</li>
						<li id="select-alt-inspect">
							<p>otherwise, optionally inspect <var>alternate["url"]</var> for clues about the media type.
								If the resource appears to be supported, <a
									href="https://infra.spec.whatwg.org/#list-append">append</a>
								<var>alternate</var> to <var>possibleAlternates</var>.</p>
						</li>
					</ol>
				</li>
				<li id="select-alt-no-match">
					<p>If <var>possibleAlternates</var> is an empty <a href="https://infra.spec.whatwg.org/#list"
							>list</a>, return failure.</p>
				</li>
				<li id="select-alt-multi-strong">
					<p>Otherwise, if the <a href="https://infra.spec.whatwg.org/#list-size">size</a> of
							<var>possibleAlternates</var> is 1, return the resource from
						<var>possibleAlternates</var>.</p>
				</li>
				<li id="select-alt-multi-weak">
					<p>Otherwise, return a resource from <var>possibleAlternates</var> as determined by the user
						agent.</p>
				</li>
			</ol>
			<details>
				<summary>Explanation</summary>
				<p>This function iterates the alternative formats for a resource and compiles a list of possibilities.
					If more than one possibility is found, the user agent determines how to prioritize and select the
					best alternative.</p>
				<p>User agents are not required to add alternatives to the list of possibilities if they do not specify
					an explicit media type.</p>
			</details>
		</section>
		<section id="app-toc-structure" class="appendix">
			<h2>Machine-Processable Table of Contents</h2>

			<section id="app-toc-html-intro" class="informative">
				<h3>Introduction</h3>

				<p>To facilitate navigation within pages and across sites, HTML uses the <a
						href="https://html.spec.whatwg.org/multipage/sections.html#the-nav-element"><code>nav</code>
						element</a>&#160;[[html]] to express lists of links. Although generic in nature by default, the
					purpose of a <code>nav</code> element can be more specifically identified by use of the <a
						href="https://html.spec.whatwg.org/multipage/dom.html#wai-aria"><code>role</code>
					attribute</a>&#160;[[html]]. In particular, the <code>doc-toc</code> role from the [[dpub-aria-1.0]]
					vocabulary identifies the <code>nav</code> element as the <a>digital publication's</a> table of
					contents.</p>

				<p>Including an identifiable table of contents is an accessible way to produce any <a>digital
						publication</a>, but due to the flexibility of HTML markup, it also presents challenges for user
					agents trying to extract a meaningful hierarchy of links (e.g., to provide a custom view available
					from any page). To avoid duplicating the tables of contents for different uses, this section defines
					a syntax that is both human friendly and commonly used while still providing enough structure for
					user agent extraction.</p>

				<p>Authors have a choice of lists (ordered or unordered) to construct their table of contents. By
					tagging each link within these lists in anchor tags (<a
						href="https://html.spec.whatwg.org/multipage/text-level-semantics.html#the-a-element"
							><code>a</code> elements</a>), user agents can easily differentiate the information they
					need from any peripheral content (asides) or stylistic tagging that has also been added. The table
					of contents can consist of both active links (with an <code>href</code> attribute) and inactive
					links (excluding the <code>href</code> attribute), providing additional flexibility in how the table
					of contents is constructed (e.g., to omit links to certain headings or only link to certain content
					in a preview).</p>

				<p>Note, however, that user agents are <strong>not required</strong> to preserve the presentational
					aspects of the table of contents (i.e., the user agent is typically extracting the information in
					order to present it in a common way across all publications). User agents are only expected to
					retain the text content of the link elements, for example, so text styling, inline images and other
					non-text content might be lost. Similarly, list styling and even how many levels deep of linking to
					display are at the discretion of the user agent. For this reason, linking to the presentational
					table of contents so that users are not limited to the machine-processed one is advised.</p>
			</section>

			<section id="app-toc-html">
				<h3>HTML Structure</h3>

				<p>The table of contents is expressed via an [[!html]]&#160;element (typically a <a
						href="https://html.spec.whatwg.org/multipage/sections.html#the-nav-element"><code>nav</code>
						element</a>). This element MUST be identified by the <code>role</code> attribute&#160;[[!html]]
					value "<code>doc-toc</code>"&#160;[[!dpub-aria-1.0]], and MUST be the first element in the document
					in <a href="https://dom.spec.whatwg.org/#concept-tree-order">document tree order</a>&#160;[[!dom]]
					with that <code>role</code> value. The element MAY be hidden from users.</p>

				<p>The manifest SHOULD <a href="#contents">identify the resource</a> that contains the table of
					contents.</p>

				<p>Although the content model of the <code>nav</code> element is not restricted, user agents will only
					be able to extract a usable table of contents when the following markup guidelines are followed:</p>

				<dl>
					<dt>Table of Contents Title</dt>
					<dd>
						<p>Although a title for the table of contents is optional, to avoid having a user agent generate
							a placeholder title when one is needed, it is advised to add one. Titles are specified using
							any of the [[!html]]&#160;<a
								href="https://html.spec.whatwg.org/multipage/sections.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements"
									><code>h1</code> through <code>h6</code> elements</a>. Note that only the first such
							element is recognized as the title. If a heading element is not found before the <a
								href="#toc-list-links">list of links</a>, user agents will assume that one has not been
							specified.</p>
					</dd>
					<dt id="toc-list-links">List of Links</dt>
					<dd>
						<p>The first [[!html]]&#160;<a
								href="https://html.spec.whatwg.org/multipage/grouping-content.html#the-ol-element"
									><code>ol</code></a> or <a
								href="https://html.spec.whatwg.org/multipage/grouping-content.html#the-ul-element"
									><code>ul</code></a> list element encountered in the <code>nav</code> element is
							assumed to contain the list that defines the links into the content. This list will be found
							even if it is nested inside of <a
								href="https://html.spec.whatwg.org/multipage/grouping-content.html#the-div-element"
									><code>div</code></a> elements, for example, as the algorithm <a
								href="#toc-ignored-elements">ignores elements</a> that are not relevant to its
							processing. The list cannot occur inside of any <a href="#toc-skipped-elements">skipped
								elements</a>, however, since their internal contents are not evaluated.</p>
						<p>If the <code>nav</code> element does not contain one of these elements, then user agents will
							not register the digital publication as containing a usable table of contents (e.g., a
							machine-rendered option will not be available).</p>
					</dd>
					<dt id="toc-branches">Branches</dt>
					<dd>
						<p>If the table of contents is considered as a tree of links, then each list item (<a
								href="https://html.spec.whatwg.org/multipage/grouping-content.html#the-li-element"
									><code>li</code> element</a>) inside of the <a href="#toc-list-links">list of
								links</a> represents one branch. Each of these branches has to have a name and optional
							destination in order to be presented to users, and this information is obtained from the
							first <a
								href="https://html.spec.whatwg.org/multipage/text-level-semantics.html#the-a-element"
									><code>a</code> element</a> found within the list item, <a
								href="#toc-ignored-elements">wherever it is nested</a> (again, excluding any
								<code>a</code> elements inside of <a href="#toc-skipped-elements">skipped
							elements</a>.)</p>
						<p>The link destination for the branch is obtained from the <code>a</code> element's
								<code>href</code> attribute, when specified. This attribute can be omitted if a link is
							not available (e.g., in a preview) or not relevant (e.g., a grouping header). When providing
							a link into the content, it is also possible to specify the relation of the linked document
							(in a <code>rel</code> attribute) and the media type of the linked resource (in a
								<code>type</code> attribute).</p>
						<p>After finding the <code>a</code> element that labels the branch, user agents will continue to
							inspect the markup for another list element (i.e., sub-branches). If a list is found, it is
							similarly processed to extract its links, and so on, until there are no more nested branches
							left to process.</p>
					</dd>
					<dt id="toc-skipped-elements">Skipped Elements</dt>
					<dd>
						<p>A small set of elements are ignored when the parsing table of contents to avoid
							misinterpretation. These are the [[!html]]&#160;<a
								href="https://html.spec.whatwg.org/multipage/dom.html#sectioning-content-2">sectioning
								content elements</a> and <a
								href="https://html.spec.whatwg.org/multipage/sections.html#sectioning-root">sectioning
								root elements</a>. The reason they are ignored is because they can define their own
							outlines (i.e., they can represent embedded content that is self-contained and not
							necessarily related to the structure of content links).</p>
						<p>Any element that has its <a
								href="https://html.spec.whatwg.org/multipage/interaction.html#the-hidden-attribute"
									><code>hidden</code> attribute</a> set is also skipped, since hidden elements are
							not intended to be directly accessed by users.</p>
						<p>Although these elements can be included in the <code>nav</code> element, care has to be taken
							not to embed important content within them (e.g., do not wrap a <code>section</code> element
							around the list item that contains all the links into the content).</p>
					</dd>
					<dt id="toc-ignored-elements">Ignored Elements</dt>
					<dd>
						<p>All elements that are not relevant to extracting the table of contents, and are not <a
								href="#toc-skipped-elements">skipped</a>, are ignored. Unlike skipped elements, ignoring
							means that user agents will continue to search inside them for relevant content, allowing
							greater flexibility in terms of the tagging that can be used.</p>
					</dd>
				</dl>

				<section id="app-toc-html-examples" class="informative">
					<h4>Examples</h4>

					<aside class="example" title="A basic multi-level table of contents.">
						<p>Note that different list types can be used for the different levels.</p>
						<pre>&lt;nav role="doc-toc">
   &lt;h2>Contents&lt;/h2>

   &lt;ol>
      &lt;li>
        &lt;a href="discourses.html">ZARATHUSTRA'S DISCOURSES.&lt;/a>
         &lt;ul>
            &lt;li>&lt;a href="discourses.html#s01">THE THREE METAMORPHOSES.&lt;/a>&lt;/li>
            &lt;li>&lt;a href="discourses.html#s02">THE ACADEMIC CHAIRS OF VIRTUE.&lt;/a>&lt;/li>
            &lt;li>&lt;a href="discourses.html#s03">BACKWORLDSMEN.&lt;/a>&lt;/li>
            …
         &lt;/ul>
      &lt;/li>
      …
   &lt;/ol>
&lt;/nav></pre>
					</aside>

					<aside class="example" title="A table of contents with ignored content.">
						<p>The supplementary descriptive information is ignored by user agents.</p>
						<pre>&lt;nav role="doc-toc">
   &lt;h2>Contents&lt;/h2>

   &lt;ol>
      &lt;li>
         &lt;div class="title">&lt;a href="c01.html">CHAPTER I&lt;/a>&lt;/div>
         &lt;div class="description">Biographical and Introductory.&lt;/div>
      &lt;/li>
      &lt;li>
         &lt;div class="title">&lt;a href="c02.html">CHAPTER II&lt;/a>&lt;/div>
         &lt;div class="description">A New System of Alternating Current Motors and Transformers.&lt;/div>
      &lt;/li>
      …
   &lt;/ol>
&lt;/nav></pre>
					</aside>

					<aside class="example" title="A table of contents for a preview.">
						<p>The <code>a</code> elements that link to content the user does not have access to do not
							include <code>href</code> attributes.</p>
						<pre>&lt;nav role="doc-toc">
   &lt;h2>Contents&lt;/h2>

  &lt;ol>
     &lt;li>&lt;a href="xmas_carol.html">Marley's Ghost&lt;/a>&lt;/li>
     &lt;li>&lt;a>The First of Three Spirits&lt;/a>&lt;/li>
     &lt;li>&lt;a>The Second of Three Spirits&lt;/a>&lt;/li>
     &lt;li>&lt;a>The Last of the Spirits&lt;/a>&lt;/li>
     &lt;li>&lt;a>The End of It&lt;/a>&lt;/li>
  &lt;/ol>

   …
&lt;/nav></pre>
					</aside>

					<aside class="example" title="A table of contents with unlinked headings.">
						<p>In this example, the author names are not relevant link locations so <code>href</code>
							attributes are not included on their enclosing <code>a</code> elements.</p>
						<pre>&lt;nav role="doc-toc">
   &lt;h2>Contents&lt;/h2>

   &lt;ol>
      &lt;li>
         &lt;a>Faraday, Michael&lt;/a>
         &lt;ol>
            &lt;li>&lt;a href="faraday.html#s01">Experimental Researches in Electricity&lt;/a>&lt;/li>
            &lt;li>&lt;a href="faraday.html#s02">The Chemical History of a Candle&lt;/a>&lt;/li>
         &lt;/ol>
      &lt;/li>
      &lt;li>
         &lt;a>Forel, Auguste&lt;/a>
         &lt;ol>
            &lt;li>&lt;a href="forel.html">The Senses of Insects&lt;/a>&lt;/li>
         &lt;/ol>
      &lt;/li>
      …
   &lt;/ol>
&lt;/nav></pre>
					</aside>

				</section>
			</section>

			<section id="app-toc-ua">
				<h3>User Agent Processing</h3>

				<p>
					<em>This section depends on the Infra Standard [[!infra]].</em>
				</p>

				<p>This section defines an algorithm for extracting a table of contents from a <code>nav</code> element.
					It is defined in terms of a walk over the nodes of a DOM tree, in <a
						href="https://dom.spec.whatwg.org/#concept-tree-order">tree order</a>&#160;[[!dom]], with each
					node being visited when it is <em>entered</em> and when it is <em>exited</em> during the walk. Each
					time a node is visited, it can be seen as triggering an <em>enter</em> or <em>exit</em> event. In
					some steps, user agents are provided a choice in how to process the content to provide flexibility
					for different presentation models.</p>

				<p class="note">This algorithm is not defined in purely event driven terms, as inspecting all descendant
					nodes is not always necessary to obtain the needed information from the DOM. In some cases, an
					element, and all its descendants, is skipped immediately after it is processed on <em>enter</em>. An
					event approach could be applied but would require modifying the algorithm to process/ignore the
					skipped nodes.</p>


				<p class="note">User agents can process and internalize the resulting structure using any language that
					can represent the final form of the data.</p>

				<p>For the purposes of this algorithm, a <dfn>list element</dfn> is defined as either an
						[[!html]]&#160;<a
						href="https://html.spec.whatwg.org/multipage/grouping-content.html#the-ol-element"
							><code>ol</code></a> or <a
						href="https://html.spec.whatwg.org/multipage/grouping-content.html#the-ul-element"
							><code>ul</code></a> element.</p>

				<p>The following algorithm MUST be applied to a walk of a DOM subtree rooted at the first element in
					document order with the <code>role</code> attribute value <code>doc-toc</code>, regardless of
					whether the element has been <a
						href="https://html.spec.whatwg.org/multipage/interaction.html#the-hidden-attribute"
						>declaratively hidden</a>&#160;[[!html]] or styled by CSS not to be visible:</p>

				<p class="note">The rules for locating the resource containing the table of contents element are defined
					in <a href="#contents"></a>.</p>

				<p>If a table of contents element is not found, the publication does not have a table of contents that
					can be used for machine rendering purposes.</p>

				<ol>
					<li id="toc-initialize-toc">
						<p>Let <var>toc</var> be the <a href="https://infra.spec.whatwg.org/#ordered-map">map</a>
							<code>«[ "name" → "", "entries" → « » ]»</code> representing the table of contents.</p>
						<details>
							<summary>Explanation</summary>
							<p>This step initializes the map that will store the title and the branches of the table of
								contents. In this map:</p>
							<ol>
								<li><var>toc["name"]</var> represents the title of the table of contents.</li>
								<li><var>toc["entries"]</var> represents the branches of the table of contents.</li>
							</ol>
						</details>
					</li>

					<li id="toc-initialize-branches">
						<p>Initialize the <a href="https://infra.spec.whatwg.org/#stack">stack</a>
							<var>branches</var> to hold branches of the table of contents as they are created.</p>
						<details>
							<summary>Explanation</summary>
							<p>The stack is used to hold branches that are not yet complete. As a new sub-branch is
								encountered, the parent gets pushed onto the stack so it can be retrieved later.</p>
						</details>
					</li>

					<li id="toc-initialize-current">
						<p>Let <var>current_toc_node</var> be a variable set to <a
								href="https://infra.spec.whatwg.org/#nulls">null</a>.</p>
						<details>
							<summary>Explanation</summary>
							<p><var>current_toc_node</var> is used to hold the map that represents the branch of the
								table of contents that is currently being processed.</p>
						</details>
					</li>

					<li id="toc-walk-dom">
						<p>Walk over the DOM in <a href="https://dom.spec.whatwg.org/#concept-tree-order">tree
							order</a>&#160;[[!dom]], starting with the element the table of contents is being built
							from, and trigger the first relevant step below for each element as the walk enters and
							exits it.</p>
						<ol>
							<li id="toc-dom-enter-heading">
								<p>
									<strong>When entering a <a
											href="https://html.spec.whatwg.org/multipage/dom.html#heading-content-2"
											>heading content</a> element:</strong>
								</p>
								<p>Run these steps:</p>
								<ol>
									<li>
										<p>If <var>branches</var> is empty, and <var>toc["name"]</var> is an empty <a
												href="https://infra.spec.whatwg.org/#string">string</a>, set
												<var>toc["name"]</var> to one of the following:</p>
										<ul>
											<li>the descendant content of the element (to preserve any HTML tags);</li>
											<li>the text string obtained from the descendant content (e.g., by
												calculating the <a
													href="https://www.w3.org/TR/accname-1.1/#mapping_additional_nd_te"
													>accessible name</a>&#160;[[accname-1.1]] of the element).</li>
										</ul>
										<p>If the resulting value of <var>toc["name"]</var> is an empty <a
												href="https://infra.spec.whatwg.org/#string">string</a> (e.g., after
											removing any presentational elements and trimming all leading and trailing
											whitespace), set <var>toc["name"]</var> either to a placeholder value or to
												<a href="https://infra.spec.whatwg.org/#nulls">null</a>.</p>
									</li>
									<li>Skip further processing of the element and continue to the next.</li>
								</ol>
								<details>
									<summary>Explanation</summary>
									<p>This step identifies the heading for the table of contents. A heading is only
										processed if the value of <var>toc["name"]</var> is an empty string (i.e., no
										headings have yet been encountered).</p>
									<p>Whether a user agent sets <var>name</var> to the descendant content of the
										heading element, or generates a text string from it, depends on whether it will
										re-use any descendant tagging in the presentation (e.g., to retain images,
										MathML, ruby and other content that does not translate to text easily).</p>
									<pre class="example" title="Visualization of the toc object with a heading.">«[
    "name"    → "Contents",
    "entries" → « »
]»</pre>
									<p>If <var>name</var> is not an empty string, or is <code>null</code>, then a
										previous heading has already been encountered or content has been encountered
										that indicates the <code>nav</code> element does not have a heading (e.g., a
										list has already been processed, since the heading would not follow the list of
										links).</p>
									<pre class="example" title="Visualization of the toc object without a heading.">«[
    "name"    → null,
    "entries" → « »
]»</pre>
									<p>If a heading is not specified, the user agent can provide its own for later
										use.</p>
								</details>
							</li>

							<li id="toc-dom-enter-list">
								<p>
									<strong>When entering a <a>list element</a>:</strong>
								</p>
								<p>Run these steps:</p>
								<ol>
									<li>
										<p>If the <var>toc["name"]</var> is an empty <a
												href="https://infra.spec.whatwg.org/#string">string</a>, set
												<var>toc["name"]</var> to <a href="https://infra.spec.whatwg.org/#nulls"
												>null</a>.</p>
									</li>
									<li>
										<p>If <em>current_toc_node</em> is not <a
												href="https://infra.spec.whatwg.org/#nulls">null</a>:</p>
										<ol>
											<li>If <var>current_toc_node["entries"]</var> is <a
													href="https://infra.spec.whatwg.org/#nulls">null</a> or a non-empty
													<a href="https://infra.spec.whatwg.org/#list">list</a>, skip further
												processing of the element and continue to the next.</li>
											<li>Otherwise, <a href="https://infra.spec.whatwg.org/#stack-push">push</a>
												<var>current_toc_node</var> onto <var>branches</var> and then set
													<var>current_toc_node</var> to <a
													href="https://infra.spec.whatwg.org/#nulls">null</a>.</li>
										</ol>
									</li>
									<li>
										<p>Otherwise, if <var>branches</var> is empty:</p>
										<ol>
											<li>If <var>toc["entries"]</var> is <a
													href="https://infra.spec.whatwg.org/#nulls">null</a> or a non-empty
													<a href="https://infra.spec.whatwg.org/#list">list</a>, skip further
												processing of the element and continue to the next.</li>
											<li>Otherwise, do nothing.</li>
										</ol>
									</li>
								</ol>
								<details>
									<summary>Explanation</summary>
									<p>This algorithm does not process multiple lists in a single branch or at the root
										of the <code>nav</code> element, so if a list has already been encountered (the
											<var>entries</var> property contains one or more branches or is set to <a
											href="https://infra.spec.whatwg.org/#nulls">null</a>), this list is
										skipped.</p>
									<p>If a list is encountered and the table of contents (<var>toc</var>) still does
										not have a name (i.e., no heading element has been encountered), the table of
										contents is assumed to not have a heading (i.e., the heading for the table of
										contents cannot appear after the first list of entries). The value of the
											<var>name</var> property is changed from an empty string to <a
											href="https://infra.spec.whatwg.org/#nulls">null</a> as no further headings
										encountered apply, either.</p>
								</details>
							</li>

							<li id="toc-dom-exit-list">
								<p>
									<strong>When exiting a <a>list element</a>:</strong>
								</p>
								<ol>
									<li>
										<p>If <var>branches</var> is not empty, <a
												href="https://infra.spec.whatwg.org/#stack-pop">pop</a> the top <a
												href="https://infra.spec.whatwg.org/#ordered-map">map</a> from
												<var>branches</var> and set <var>current_toc_node</var> to it.</p>
									</li>
									<li>
										<p>Otherwise, if <var>toc.entries</var> contains an empty <a
												href="https://infra.spec.whatwg.org/#list">list</a>, set it to <a
												href="https://infra.spec.whatwg.org/#nulls">null</a>.</p>
									</li>
								</ol>
								<details>
									<summary>Explanation</summary>
									<p>This step resets <var>current_toc_node</var> back to the parent object after all
										of its child branches have been processed.</p>
									<p>If there are no branches in the stack, the <var>toc.entries</var> is set to null
										if it doesn't contain any items (to avoid processing any further lists at the
										root level).</p>
								</details>
							</li>

							<li id="toc-dom-enter-li">
								<p>
									<strong>When entering a <a
											href="https://html.spec.whatwg.org/multipage/grouping-content.html#the-li-element"
											>list item</a> element, set <var>current_toc_node</var> to the following <a
											href="https://infra.spec.whatwg.org/#ordered-map">map</a>:</strong>
								</p>
								<pre>«[
    "name" → null,
    "url"  → null,
    "type" → null,
    "rel"  → null,
    "entries" → « »
]»</pre>
								<details>
									<summary>Explanation</summary>
									<p>Each list item represents a possible new branch in the table of contents, so
										whenever one is encountered a new blank object is created in
											<var>current_toc_node</var>.</p>
									<p>This object gets populated with information as a descendant <code>a</code>
										element and list are encountered.</p>
								</details>
							</li>

							<li id="toc-dom-exit-li">
								<p>
									<strong>When exiting a <a
											href="https://html.spec.whatwg.org/multipage/grouping-content.html#the-li-element"
											>list item</a> element:</strong>
								</p>
								<p>Run these steps:</p>
								<ol>
									<li>
										<p>If <var>current_toc_node["entries"]</var> contains an empty <a
												href="https://infra.spec.whatwg.org/#list">list</a>, set it to <a
												href="https://infra.spec.whatwg.org/#nulls">null</a>.</p>
									</li>
									<li>
										<p>If <var>current_toc_node["name"]</var> is <a
												href="https://infra.spec.whatwg.org/#nulls">null</a> or an empty
											string:</p>
										<ol>
											<li>if <var>current_toc_node["entries"]</var> is not <a
													href="https://infra.spec.whatwg.org/#nulls">null</a>, set
													<var>current_toc_node["name"]</var> to a placeholder value or <a
													href="https://infra.spec.whatwg.org/#nulls">null</a>;</li>
											<li>otherwise, set <var>current_toc_node</var> to <a
													href="https://infra.spec.whatwg.org/#nulls">null</a> and exit this
												processing step.</li>
										</ol>
									</li>
									<li>
										<p>If <var>branches</var> is not empty, <a
												href="https://infra.spec.whatwg.org/#list-append">append</a>
											<var>current_toc_node</var> to the <var>entries</var> property of the <a
												href="https://infra.spec.whatwg.org/#ordered-map">map</a> at the top of
												<var>branches</var>. Otherwise, <a
												href="https://infra.spec.whatwg.org/#list-append">append</a>
											<var>current_toc_node</var> to <var>toc["entries"]</var>.</p>
									</li>

									<li>
										<p>Set <var>current_toc_node</var> to <a
												href="https://infra.spec.whatwg.org/#nulls">null</a>.</p>
									</li>
								</ol>
								<details>
									<summary>Explanation</summary>
									<p>Exiting a list item indicates that processing of the current branch is complete.
										Before adding this branch to its parent's <var>entries</var> array, the branch
										needs to be tested to see if it has a name and/or any sub-branches. If it does
										not have a name but has sub-branches, the branch is kept. The user agent can
										either supply a placeholder value of its own creation or set the value to null.
										If it does not have a name or any branches, it is invalid and is discarded.</p>
									<p>To determine where to merge the branch, the stack is checked. If there are no
										items in the stack, it is added into the <var>entries</var> property of the root
											<em>toc</em> object (i.e., it is a top-level branch). Otherwise, it gets
										added into the <var>entries</var> property of the object immediately preceding
										it in the stack.</p>
									<p>As a final step, <var>current_toc_node</var> is reset back to
										<code>null</code>.</p>
									<aside class="example" title="Visualization of a branch merge.">
										<p>If the following map is in <var>branches</var>:</p>
										<pre>«[
    "name"    → "Section 1",
    "url"     → "http://example.com/contents.html#s1",
    "type"    → "text/html",
    "rel"     → null,
    "entries" → « »
]»</pre>
										<p>And the following map is in <var>current_toc_node:</var></p>
										<pre>«[
    "name"    → "Section 1.1",
    "url"     → "http://example.com/contents.html#s1.1",
    "type"    → "text/html",
    "rel"     → null,
    "entries" → null
]»</pre>
										<p>Then only the following single object remains after merging:</p>
										<pre>«[
    "name"    → "Section 1",
    "url"     → "http://example.com/contents.html#s1",
    "type"    → "text/html",
    "rel"     → null,
    "entries" → «
        «[
            "name"    → "Section 1.1",
            "url"     → "http://example.com/contents.html#s1.1",
            "type"    → "text/html",
            "rel"     → null,
            "entries" → null
        ]»
    »
]»</pre>
									</aside>
								</details>
							</li>

							<li id="toc-dom-enter-a">
								<p>
									<strong>When entering an <a
											href="https://html.spec.whatwg.org/multipage/text-level-semantics.html#the-a-element"
											>anchor</a> element and <var>current_toc_node</var> is not <a
											href="https://infra.spec.whatwg.org/#nulls">null</a>:</strong>
								</p>
								<p>Run these steps:</p>
								<ol>
									<li>
										<p>If <var>current_toc_node["name"]</var> is not <a
												href="https://infra.spec.whatwg.org/#nulls">null</a>, do nothing.</p>
									</li>
									<li>
										<p>Otherwise:</p>
										<ol>
											<li>
												<p>Set <var>current_toc_node["name"]</var> to one of the following:</p>
												<ul>
													<li>the descendant content of the anchor element (to preserve any
														HTML tags);</li>
													<li>the text string obtained from the descendant content (e.g., by
														calculating the <a
															href="https://www.w3.org/TR/accname-1.1/#mapping_additional_nd_te"
															>accessible name</a>&#160;[[accname-1.1]] of the
														element).</li>
												</ul>
											</li>
											<li>If the element has an <code>href</code> attribute and the URL in the
												attribute resolves to a resource in <a href="#reslist-end"
													>uniqueResources</a>, set <var>current_toc_node["url"]</var> to the
												value.</li>
											<li>If the element has a <code>type</code> attribute, and the value of the
												attribute is not an empty string after trimming leading and trailing
												white space, set <var>current_toc_node["type"]</var> to the trimmed
												value.</li>
											<li>If the element has a <code>rel</code> attribute, and the value of the
												attribute is not an empty string after trimming leading and trailing
												white space, split the trimmed value on whitespace and set
													<var>current_toc_node["rel"]</var> to the resulting <a
													href="https://infra.spec.whatwg.org/#list">list</a> of tokens.</li>
										</ol>
										<p>Skip further processing of the element and continue to the next.</p>
									</li>
								</ol>
								<details>
									<summary>Explanation</summary>
									<p>This step processes anchor tags to obtain values for the <var>name</var> and
											<var>url</var> properties of a branch.</p>
									<p>If the name of the current branch is already defined, then processing of this
										element is terminated (i.e., to avoid processing multiple links for a single
										branch).</p>
									<p>Whether a user agent sets the <var>name</var> of the entry to the descendant
										content of the <code>a</code> element, or generates a text string from it,
										depends on whether it will re-use any descendant tagging in the presentation
										(e.g., to retain images, MathML, ruby and other content that does not translate
										to text easily).</p>
									<p>In addition to having an <code>href</code> attribute specified, it is necessary
										that it resolve to a resource that belongs to the digital publication to meet
										the requirements of this specification. If not, the branch is retained but the
										entry will not be linkable.</p>
									<p>Additional information about the target of the link — the type of resource and
										its relation — is also retained.</p>
									<pre class="example" title="Visualization of a link to an SVG image.">«[
    "name"    → "In the Beginning",
    "url"     → "http://example.com/page1.svg",
    "type"    → "image/svg",
    "rel"     → null,
    "entries" → « »
]»</pre>
								</details>
							</li>

							<li id="toc-dom-enter-sectioning">
								<p>
									<strong>When entering a <a
											href="https://html.spec.whatwg.org/multipage/dom.html#sectioning-content-2"
											>sectioning content</a> element, a <a
											href="https://html.spec.whatwg.org/multipage/sections.html#sectioning-root"
											>sectioning root</a> element, or an element with a <a
											href="https://html.spec.whatwg.org/multipage/interaction.html#the-hidden-attribute"
											>hidden</a> attribute:</strong>
								</p>
								<p>Skip further processing of the element and continue to the next.</p>
								<details>
									<summary>Explanation</summary>
									<p>As sectioning and sectioning root elements can define their own outlines,
										descending into them poses problems for generating the table of contents (i.e.,
										they may contain content that is not directly related). As a result, they are
										skipped over when encountered to prevent their child content from being
										processed.</p>
								</details>
							</li>

							<li id="toc-dom-skip">
								<p>
									<strong>Otherwise: do nothing.</strong>
								</p>
								<details>
									<summary>Explanation</summary>
									<p>For all other elements, this step allows their descendant elements to continue to
										be processed.</p>
								</details>
							</li>
						</ol>
					</li>

					<li id="toc-finish">
						<p>After completing the DOM walk, if <var>toc["entries"]</var> contains a non-empty <a
								href="https://infra.spec.whatwg.org/#list">list</a>, return <var>toc</var>. Otherwise,
							return <code>null</code>.</p>
						<details>
							<summary>Explanation</summary>
							<p>If the <code>entries</code> array in the root <em>toc</em> object does not contain any
								branches (either because no list was found in the <code>nav</code> element or the list
								did not contain any conforming list items), then the algorithm did not produce a usable
								table of contents.</p>
						</details>
					</li>
				</ol>
			</section>
		</section>
		<section id="change-log">
			<h2>Change Log</h2>

			<p>Substantive changes since the <a href="https://www.w3.org/TR/2019/WD-pub-manifest-20190827/">First Public
					Working Draft</a>:</p>

			<ul>
				<li>14-Sept-2020: Several minor fixes to correct variable names in the processing algorithm. See pull
					requests <a href="https://github.com/w3c/pub-manifest/pull/232">232</a>, <a
						href="https://github.com/w3c/pub-manifest/pull/233">233</a> and <a
						href="https://github.com/w3c/pub-manifest/pull/234">234</a>.</li>
				<li>4-Sept-2020: Updated the reference to ISO 8601:2004 to the revised ISO 8601-1:2019. See <a
						href="https://github.com/w3c/audiobooks/issues/65">issue 65</a> (Audiobooks tracker).</li>
				<li>27-July-2020: Updated the reference schema URL to a W3C address. See <a
						href="https://github.com/w3c/pub-manifest/issues/226">issue 226</a>.</li>
				<li>30-Apr-2020: Noted the issue with the author and creator properties being synonyms in schema.org.
					See <a href="https://github.com/w3c/pub-manifest/issues/203#issuecomment-614004609">issue
					203</a>.</li>
				<li>16-Apr-2020: Changed the recommendation that a privacy policy and accessibility report be resources
					of a publication to best practice to match with the examples where these are listed as links. Adding
					as links should not generate warnings. See <a href="https://github.com/w3c/pub-manifest/issues/207"
						>issue 207</a>.</li>
				<li>15-Apr-2020: Removed the bullet from the LocalizableString definition allowing an array of values,
					as this creates an invalid nesting of arrays when paired with the value categories. See <a
						href="https://github.com/w3c/pub-manifest/issues/205">issue 205</a>.</li>
				<li>12-Feb-2020: The prose requirements for the resource that links to the manifest to be a publication
					resource and to be automatically added to the reading order (when one is not present) were restored
					to align with the algorithm steps. An additional check was also included in the algorithm to warn if
					the linking resource is not a publication resource. See <a
						href="https://github.com/w3c/pub-manifest/issues/198">issue 198</a>.</li>
				<li>12-Feb-2020: The table of contents algorithm was fixed to capture branches without a title, not just
					those without any text content. See <a href="https://github.com/w3c/pub-manifest/issues/195">issue
						195</a>.</li>
				<li>07-Feb-2020: Clarified that rel values are case insensitive and must be compared as such. See <a
						href="https://github.com/w3c/pub-manifest/issues/196">issue 196</a>.</li>
				<li>04-Feb-2020: The note about registering the publication rel value has been removed as it is now
					officially registered with IANA. See <a href="https://github.com/w3c/pub-manifest/pull/194">pull
						request 194</a>.</li>
				<li>28-Jan-2020: Reverted to using only role=doc-toc to identify the table of contents due to problems
					with using fragments identifiers. See <a href="https://github.com/w3c/pub-manifest/issues/176">issue
						176</a>.</li>
				<li>28-Jan-2020: Clarified that visual hiding does not affect the selection of the table of contents.
					See <a href="https://github.com/w3c/pub-manifest/issues/176">issue 176</a>.</li>
				<li>28-Jan-2020: Added an extension point for profiles to add processing requirements for the context.
					See <a href="https://github.com/w3c/pub-manifest/issues/186">issue 186</a>.</li>
				<li>27-Jan-2020: The table of contents processing algorithm has been updated to fix several bugs and
					editorial issues in the expected outcomes. See <a
						href="https://github.com/w3c/pub-manifest/issues/177">issue 177</a> and <a
						href="https://github.com/w3c/pub-manifest/issues/179">issue 179</a>, as well as <a
						href="https://github.com/w3c/pub-manifest/pull/180">pull request 180</a> and <a
						href="https://github.com/w3c/pub-manifest/pull/182">pull request 182</a> for more details.</li>
			</ul>
			<p>For a complete list of issues addressed, refer to the <a
					href="https://github.com/w3c/pub-manifest/issues?q=is%3Aissue+is%3Aclosed+sort%3Aupdated-desc"
					>GitHub tracker</a>.</p>
		</section>
		<section id="iana-consideration" class="appendix informative">
			<h2>IANA considerations</h2>

			<section>
				<h3>Link relation type registration</h3>
				<dl>
					<dt>Relation Name:</dt>
					<dd>publication</dd>
					<dt>Description:</dt>
					<dd>Links to a publication <a>manifest</a>. A manifest represents structured information about a
						publication, such as informative metadata, a list of resources, and a default reading order. </dd>
					<dt>Reference:</dt>
					<dd>
						<a href="https://www.w3.org/TR/pub-manifest/">https://www.w3.org/TR/pub-manifest</a>
					</dd>
					<dt>Notes:</dt>
					<dd>Please refer to the steps in <a href="#manifest-discovery"></a> for details on how to access,
						and <a href="#manifest-processing"></a> on how to process a <a>manifest</a>.</dd>
				</dl>
			</section>


		</section>
		<section id="app-manifest-examples" class="appendix informative">
			<h2>Manifest Examples</h2>

			<section>
				<h3>Basic Manifest</h3>

				<p>The following is a manifest with a basic set of metadata for an example book profile.</p>

				<p>A <a href="https://w3c.github.io/pub-manifest/experiments/separate_manifest/mobydick.jsonld">JSON
						encoding of the internal representation</a> of this manifest is also available.</p>

				<pre class="example" data-include="experiments/separate_manifest/mobydick-simple.jsonld" data-include-format="text"></pre>
			</section>

			<section>
				<h3>Single-Document Publication</h3>

				<p>The following is a manifest for an example article profile. The article consists only of the document
					the manifest is embedded in. The title and reading order are omitted from the manifest, as these
					properties are automatically generated during <a href="#manifest-processing">processing</a> from the
					title and URL of the containing document, respectively.</p>

				<p>A <a href="https://w3c.github.io/pub-manifest/experiments/w3c_rec/simple-canonical.jsonld">JSON
						encoding of the internal representation</a> of the manifest is also available, as well as a <a
						href="https://github.com/w3c/pub-manifest/blob/master/experiments/w3c_rec/full_version.html"
						>more elaborate version</a> for the same document.</p>

				<pre class="example" data-include="experiments/w3c_rec/simple_version.html" data-include-format="text"></pre>
			</section>

			<section>
				<h3>Audiobook</h3>

				<p>The following example shows a manifest that conforms to the <a
						href="https://www.w3.org/TR/audiobooks/">Audiobooks profile</a> [[audiobooks]].</p>

				<p>A <a href="https://w3c.github.io/pub-manifest/experiments/audiobook/flatland-canonical.json">JSON
						encoding of the internal representation</a> of this manifest is also available.</p>

				<pre class="example" data-include="experiments/audiobook/flatland.json" data-include-format="text"></pre>
			</section>
		</section>
		<section id="app-properties-index" class="appendix informative">
			<h4>Properties Index</h4>

			<p>The following table identifies where manifest properties are defined and extended.</p>

			<table class="zebra">
				<thead>
					<tr>
						<th>Name</th>
						<th>Publication Manifest</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>
							<code>abridged</code>
						</td>
						<td>
							<a href="#abridged"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>accessMode</code>
						</td>
						<td>
							<a href="#accessibility"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>accessModeSufficient</code>
						</td>
						<td>
							<a href="#accessibility"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>accessibilityFeature</code>
						</td>
						<td>
							<a href="#accessibility"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>accessibilityHazard</code>
						</td>
						<td>
							<a href="#accessibility"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>accessibilitySummary</code>
						</td>
						<td>
							<a href="#accessibility"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>artist</code>
						</td>
						<td>
							<a href="#creators"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>author</code>
						</td>
						<td>
							<a href="#creators"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>conformsTo</code>
						</td>
						<td>
							<a href="#profile-conformance"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>@context</code>
						</td>
						<td>
							<a href="#manifest-context"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>contributor</code>
						</td>
						<td>
							<a href="#creators"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>creator</code>
						</td>
						<td>
							<a href="#creators"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>dateModified</code>
						</td>
						<td>
							<a href="#last-modification-date"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>datePublished</code>
						</td>
						<td>
							<a href="#publication-date"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>direction</code>
						</td>
						<td>
							<a href="#manifest-lang-dir-global"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>duration</code>
						</td>
						<td>
							<a href="#duration"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>editor</code>
						</td>
						<td>
							<a href="#creators"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>id</code>
						</td>
						<td>
							<a href="#canonical-identifier"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>illustrator</code>
						</td>
						<td>
							<a href="#creators"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>inker</code>
						</td>
						<td>
							<a href="#creators"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>inLanguage</code>
						</td>
						<td>
							<a href="#inLanguage"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>language</code>
						</td>
						<td>
							<a href="#manifest-lang-dir-global"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>letterer</code>
						</td>
						<td>
							<a href="#creators"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>link</code>
						</td>
						<td>
							<a href="#links"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>name</code>
						</td>
						<td>
							<a href="#pub-title"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>penciler</code>
						</td>
						<td>
							<a href="#creators"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>publisher</code>
						</td>
						<td>
							<a href="#creators"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>readBy</code>
						</td>
						<td>
							<a href="#creators"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>readingOrder</code>
						</td>
						<td>
							<a href="#default-reading-order"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>readingProgression</code>
						</td>
						<td>
							<a href="#reading-progression-direction"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>resources</code>
						</td>
						<td>
							<a href="#resource-list"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>translator</code>
						</td>
						<td>
							<a href="#creators"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>type</code>
						</td>
						<td>
							<a href="#publication-types"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>url</code>
						</td>
						<td>
							<a href="#address"></a>
						</td>
					</tr>
				</tbody>
			</table>
		</section>
		<section id="app-rel-index" class="appendix informative">
			<h4>Resource Relations Index</h4>

			<p>The following table identifies where the use of resource relations is defined.</p>

			<table class="zebra">
				<thead>
					<tr>
						<th>Name</th>
						<th>Publication Manifest</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>
							<code>accessibility-report</code>
						</td>
						<td>
							<a href="#accessibility-report"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>contents</code>
						</td>
						<td>
							<a href="#contents"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>cover</code>
						</td>
						<td>
							<a href="#cover"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>pagelist</code>
						</td>
						<td>
							<a href="#page-list"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>privacy-policy</code>
						</td>
						<td>
							<a href="#privacy-policy"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>preview</code>
						</td>
						<td>
							<a href="#preview"></a>
						</td>
					</tr>
				</tbody>
			</table>
		</section>
		<section id="ack" data-include="common/html/acknowledgements.html" data-include-replace="true"></section>
	</body>
</html>
