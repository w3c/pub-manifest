<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
	<head>
		<meta charset="utf-8" />
		<title>Publication Manifest</title>
		<script src="https://www.w3.org/Tools/respec/respec-w3c-common" class="remove" defer="defer"></script>
		<script src="common/js/biblio.js" class="remove"></script>
		<script src="common/js/pub.js" class="remove"></script>
		<script src="common/js/idllink.js" class="remove"></script>
		<script src="https://unpkg.com/reqlist/lib/reqlist.js" class="remove"></script>
		<link href="https://unpkg.com/reqlist/lib/reqlist.css" class="removeOnSave" rel="stylesheet" type="text/css" />
		<link href="common/css/common.css" rel="stylesheet" type="text/css" />
		<script class="remove">
			// <![CDATA[
			var respecConfig = {
				preProcess: [
					prepare_reqlist
				],
				postProcess: [
					create_manifest,
					convert_dfn_to_link,
					add_reqlist_button
				],
				wg: "Publishing Working Group",
				specStatus: "ED",
				shortName: "pub-manifest",
				previousPublishDate: "2019-09-11",
				previousMaturity: "WD",
				edDraftURI: "https://w3c.github.io/pub-manifest/",
				editors: [
					{
						"name": "Matt Garrish",
						"company": "DAISY Consortium",
						"companyURL": "http://www.daisy.org",
						"w3cid": 51655
					},
					{
						"name": "Ivan Herman",
						"url": "https://www.w3.org/People/Ivan/",
						"company": "W3C",
						"w3cid": 7382,
						"orcid": "0000-0003-0782-2704",
						"companyURL": "https://www.w3.org",
					}
				],
				processVersion: 2018,
				includePermalinks: false,
				permalinkEdge:     true,
				permalinkHide:     false,
				pluralize:         true,
				diffTool:          "http://www.aptest.com/standards/htmldiff/htmldiff.pl",
				wgURI:             "https://www.w3.org/publishing/groups/publ-wg/",
				wgPublicList:      "public-publ-wg",
				wgPatentURI:       "https://www.w3.org/2004/01/pp-impl/100074/status",
				github:			 {
					repoURL: "https://github.com/w3c/pub-manifest/",
					branch: "master"
				},
				localBiblio: biblio
			};
			// ]]>
	  </script>
		<style>
			var {
				color: brown;
			}
			code.json {
				color: teal;
			}</style>
	</head>
	<body>
		<section id="abstract">
			<p>This specification defines a general manifest format for expressing information about a digital
				publication. It uses [[schema.org]] metadata augmented to include various structural properties about
				publications, serialized in [[json-ld11]], to enable interoperability between publishing formats while
				accommodating variances in the information that needs to be expressed.</p>
		</section>
		<section id="sotd"></section>
		<section id="intro">
			<h2>Introduction</h2>

			<section id="scope">
				<h3>Scope</h3>

				<p>This specification defines a general manifest format to describe publications. It does not attempt to
					constrain the nature of the publications that use the manifest. Rather, it is designed to be
					adaptable to the needs of specific areas of publishing, such as audiobook production, by specifying
					a modular approach for creating specializations.</p>

				<p>This specification is also intended to facilitate different user agent architectures. While it is
					expected that traditional Web user agents (browsers) will be able to consume a publication manifest,
					this should not limit the capabilities of any other possible type of user agent (e.g., applications,
					whether standalone or running within a user agent, or even publications that include their own user
					interface).</p>

				<p>This specification does not define how user agents are expected to render publications that use the
					manifest format.</p>
			</section>

			<section id="terminology">
				<h3>Terminology</h3>

				<p>This specification depends on the Infra Standard [[!infra]].</p>

				<dl>
					<dt>
						<dfn>Bounds</dfn>
					</dt>
					<dd>
						<p>A <a>digital publication</a> consists of a finite set of resources that represent its
							content. This extent is known as its bounds and is defined within its manifest — it is
							obtained from the union of resources listed in the <a href="#default-reading-order">default
								reading order</a> and <a href="#resource-list">resource list</a>.</p>
					</dd>

					<dt>
						<dfn data-lt="digital publications|digital publication's">Digital Publication</dfn>
					</dt>
					<dd>
						<p>The term digital publication refers to a publication authored in a format that uses a
								<a>profile</a> of the <a>manifest</a>.</p>
					</dd>

					<dt>
						<dfn>Internal Representation</dfn>
					</dt>
					<dd>
						<p>The internal representation of a manifest is the data structure created by user agents when
							they <a href="#manifest-processing">process the manifest</a> and remove all possible
							ambiguities and incorporate any missing values that can be inferred from another source.</p>
						<p>It is possible for the information expressed in the manifest to be the equivalent of the
							internal representation created by user agents if there are no ambiguities or missing
							information.</p>
					</dd>

					<dt>
						<dfn data-lt="Manifests">Manifest</dfn>
					</dt>
					<dd>
						<p>A manifest represents structured information about a publication, such as informative
							metadata, a <a href="#resource-list">list of resources</a>, and a <a>default reading
								order</a>.</p>
					</dd>

					<dt>
						<dfn>Non-empty</dfn>
					</dt>
					<dd>
						<p>For the purposes of this specification, non-empty is used to refer to an element, attribute
							or property whose text content or value consists of one or more characters after whitespace
							normalization, where whitespace normalization rules are defined per the host format.</p>
					</dd>

					<dt>
						<dfn data-lt="profiles|profile(s)">Profile</dfn>
					</dt>
					<dd>
						<p>Profiles are publication formats (e.g., audiobooks) that use the <a>manifest</a> format
							defined in this specification to describe their <a>bounds</a> and content. These formats can
							extend the core definition in this specification with profile-specific terms and/or new
							requirements.</p>
						<p>Although profiles can differ in their structural and content requirements, such variances are
							restricted to maintain a high degree of predictabibility between formats. (See <a
								href="#extensions"></a>.)</p>
					</dd>
				</dl>
			</section>

			<section id="conformance"></section>
		</section>
		<section id="manifest">
			<h2>Publication Manifest</h2>

			<section id="manifest-intro">
				<h3>Introduction</h3>

				<section id="manifest-format" class="informative">
					<h4>Manifest Format</h4>

					<p>A <a>digital publication</a> is described by its <a>manifest</a>, which provides a set of
						properties expressed using a specific shape of JSON-LD&#160;[[json-ld11]] (a variant of
						JSON&#160;[[ecma-404]] for linked data).</p>

					<p>The manifest is what enables user agents to understand the <a>bounds</a> of <a>digital
							publication</a> and the connection between its resources. It includes metadata that
						describes the digital publication, as a publication has an identity and nature beyond its
						constituent resources. The manifest also provides a list of all the resources that belong to the
						digital publication and a default reading order, which is how it connects resources into a
						single contiguous work.</p>

					<p>The properties of the manifest describe the basic information a user agent requires to process
						and render a publication. For ease of understanding, these properties are categorized as
						follows:</p>

					<dl>
						<dt>
							<a href="#descriptive-properties">Descriptive properties</a>
						</dt>
						<dd>
							<p>Descriptive properties describe aspects of a digital publication, such as its <a
									href="#pub-title">title</a>, <a href="#creators">creator</a>, and <a
									href="inLanguage">language</a>.</p>
						</dd>
						<dt>
							<a href="#resource-categorization-properties">Resource categorization properties</a>
						</dt>
						<dd>
							<p>Resource categorization properties describe or identify common sets of resources, such as
								the <a href="#resource-list">resource list</a> and <a href="#default-reading-order"
									>default reading order</a>. These properties refer to one or more resources, such as
								HTML documents, images, scripts, and metadata records.</p>
						</dd>
					</dl>

					<p>The <a>manifest</a> also identifies key resources of a digital publication through the use of
						link relations. These relations are applied to the <a href="#linkedresource-rel"
								><code>rel</code> property</a> of <a><code>LinkedResource</code></a> objects (e.g., the
						links found in the <a href="#pub-table-of-contents">table of contents</a> and <a
							href="#resource-list">resource list</a>).</p>

					<p>The types of resources these relations identify are categorized as follows:</p>

					<dl>
						<dt>
							<a href="#informative-rel">Informative resources</a>
						</dt>
						<dd>
							<p>Informative resources are resources that contain additional information about the
								publication, such as its <a href="#privacy-policy">privacy policy</a>, <a
									href="#accessibility-report">accessibility report</a>, or <a href="#preview"
									>preview</a>.</p>
						</dd>
						<dt>
							<a href="#structural-rel">Structural resources</a>
						</dt>
						<dd>
							<p>Structural resources are key meta structures of the publication, such as the <a
									href="#cover">cover image</a>, <a href="#table-of-contents">table of contents</a>,
								and <a href="#page-list">page list</a>.</p>
						</dd>
					</dl>

					<p class="note">These categorizations have no relevance outside this specification (i.e., the
						properties are not actually grouped together in the manifest).</p>
				</section>

				<section id="manifest-jsonld">
					<h4>JSON-LD Authoring and Processing</h4>

					<p>This specification defines the publication manifest as a specific "shape" of [[!json-ld11]]. This
						means that the manifest SHOULD be expressed using only the syntactic constructions defined in
						this specification, as opposed to all the possibilities offered by the JSON-LD syntax.</p>

					<p class="note">This shape is also defined, informally, through a JSON schema&#160;[[json-schema]]
						that expresses the constraints defined in this specification. This schema is maintained at <a
							href="https://github.com/w3c/pub-manifest/blob/master/schema/publication.schema.json"
							>https://github.com/w3c/pub-manifest/blob/master/schema/publication.schema.json</a>.</p>

					<p>The publication manifest also has a number of authoring flexibilities and compact authoring
						expressions. For example, it is not always required that object types be explicitly authored, as
						these are automatically generated during processing when missing (see <a
							href="#explicit-implied-objects"></a> for more information). An <a>internal
							representation</a> of the manifest data is defined separately; see the separate section on
							<a href="#internal-rep-data-model"></a> for further details.</p>

					<p>As a consequence, a user agent does not have to be a full JSON-LD processor. User agents only
						need to be able to read the manifest's specific shape and internalize the data.</p>
				</section>

				<section id="manifest-schemaorg">
					<h4>Relationship to Schema.org</h4>

					<p>Manifest properties, in particular those categorized as <a href="#descriptive-properties"
							>descriptive properties</a>, are primarily drawn from <a href="https://schema.org"
							>schema.org</a> and its <a href="https://schema.org/docs/schemas.html">hosted
						extensions</a>&#160;[[!schema.org]]. As a consequence, these properties inherit their syntax and
						semantics from schema.org, making manifest authoring compatible with schema.org authoring.</p>

					<p>When a manifest item corresponds to a schema.org property, its <a href="#manifest-properties"
							>property definition</a> identifies its mapping and includes the defining type (e.g., <a
							href="https://schema.org/CreativeWork">CreativeWork</a> or <a href="https://schema.org/Book"
							>Book</a>) in parentheses.</p>

					<p>Schema.org additionally includes a large number of properties that, though relevant for
						publishing, are not mentioned in this specification. These properties MAY be used in a manifest
						as this document defines only the minimal set of manifest items.</p>

					<p>When using additional schema.org properties, ensure that they are valid for the <a
							href="#publication-types">type of publication</a> specified in the manifest. Properties are
						often available in many schema.org types, as a result of the inheritance model used by the
						vocabulary, but not all properties are available for all types. For more detailed information
						about which types accept which properties, refer to [[!schema.org]].</p>

					<p>More information about using additional schema.org properties is also available in <a
							href="#publication-types"></a> and <a href="#extensibility-manifest-properties"></a></p>
				</section>
			</section>

			<section id="manifest-requirements">
				<h5>Requirements</h5>

				<p>The following properties MUST be set in the manifest:</p>

				<ul>
					<li>
						<a href="#manifest-context">context</a>
					</li>
					<li>
						<a href="#profile-conformance">conformsTo</a>
					</li>
				</ul>

				<p>The priority of all other <a href="#manifest-properties">properties</a> and <a href="#manifest-rel"
						>resource relations</a> is OPTIONAL, but MAY be modified by implementations of the manifest
					format.</p>

				<p class="note">Some properties are implicitly required, as they are compiled from alternative
					information when not explicitly authored. See <a href="#internal-rep-data-model"></a> for more
					information.</p>
			</section>

			<section id="properties-value-categories">
				<h3>Value Categories</h3>

				<p>This section describes the categories of values that can be used with properties of the publication
					manifest.</p>

				<section id="value-literal">
					<h4>Literals</h4>

					<p>When a <a href="#manifest-properties">manifest</a> property expects a literal text string as its
						value &#8212; one that is not language-dependent, such as a code value or date &#8212; its value
						MUST be expressed as a [[!json]] <a href="https://tools.ietf.org/html/rfc4627#section-2.5"
							>string</a>.</p>

					<p>Literal values are not changed <a href="#manifest-processing">during processing of the
							manifest</a>, unlike other values which might be, for example, <a
							href="#explicit-implied-objects">converted to objects</a>.</p>
				</section>

				<section id="value-number">
					<h4>Numbers</h4>

					<p>When a <a href="#manifest-properties">manifest</a> property expects a number as its value, the
						value MUST be expressed as a [[!json]] <a href="https://tools.ietf.org/html/rfc4627#section-2.4"
							>number</a>.</p>
				</section>

				<section id="value-boolean">
					<h4>Booleans</h4>

					<p>When a <a href="#manifest-properties">manifest</a> property expects a boolean as its value, the
						value MUST be expressed as an [[!ecmascript]]&#160;<a
							data-cite="ecmascript#sec-terms-and-definitions-boolean-value">Boolean value</a>
							(<code>true</code> or <code>false</code>).</p>
				</section>

				<section id="explicit-implied-objects">
					<h4>Explicit and Implied Objects</h4>

					<p>Various manifest properties are expected to be expressed as [[!json]]&#160;<a
							href="https://tools.ietf.org/html/rfc4627#section-2.2">objects</a>. Although the use of
						objects is usually recommended, the following sections identify cases where it is also
						acceptable to use string values that are interpreted as objects depending on the context. The
						exact mapping of text values to objects is part of the property or object definitions.</p>

					<section id="value-localizable-string">
						<h5>Localizable Strings</h5>

						<p>When a <a href="#manifest-properties">manifest</a> property expects a localizable text string
							as its value, the value MUST be expressed either as:</p>

						<ul>
							<li>a [[!json]] <a href="https://tools.ietf.org/html/rfc4627#section-2.5">string</a>
								value;</li>
							<li>a <a><code>LocalizableString</code></a>; or</li>
							<li>an <a href="#value-array">Array</a> of <a><code>LocalizableStrings</code></a>.</li>
						</ul>

						<p>A single string value represents an implied object whose <code>value</code> property is the
							string's text and whose language is determined from other information in the manifest.</p>

						<p>Although only a single string or object has to be authored, properties that accept
							localizable strings are always converted to <a href="#value-array">arrays</a>.</p>

						<p>A <dfn data-lt="LocalizableStrings|localizable string"><code>LocalizableString</code></dfn>
							is a [[!json]]&#160;<a href="https://tools.ietf.org/html/rfc4627#section-2.2">object</a>
							consisting of the following properties:</p>

						<table class="zebra">
							<thead>
								<tr>
									<th>Term</th>
									<th>Description</th>
									<th>Required Value</th>
									<th>Value Category</th>
									<th>[[!schema.org]] Mapping</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>
										<code>value</code>
									</td>
									<td>The value of the localizable string. REQUIRED.</td>
									<td>Text.</td>
									<td><a href="#value-literal">Literal</a></td>
									<td>(None)</td>
								</tr>
								<tr>
									<td>
										<code>language</code>
									</td>
									<td>The language of the value. OPTIONAL.</td>
									<td>A <a href="https://tools.ietf.org/html/bcp47#section-2.2.9">well-formed language
											tag</a>&#160;[[!bcp47]].</td>
									<td><a href="#value-literal">Literal</a></td>
									<td>(None)</td>
								</tr>
								<tr>
									<td>
										<code>direction</code>
									</td>
									<td>The base direction of the value. OPTIONAL.</td>
									<td><code>ltr</code> or <code>rtl</code></td>
									<td><a href="#value-literal">Literal</a></td>
									<td>(None)</td>
								</tr>
							</tbody>
						</table>

						<p>The meaning of the base direction values are:</p>

						<ul>
							<li><code>ltr</code>: indicates that the textual value is explicitly directionally set to
								left-to-right text;</li>
							<li><code>rtl</code>: indicates that the textual value is explicitly directionally set to
								right-to-left text;</li>
						</ul>

						<p> A missing base direction value means that that the textual value is explicitly directionally
							set to the direction of the first character with a strong directionality, following the
							rules of the Unicode Bidirectional Algorithm&#160;[[!bidi]]. </p>

						<aside class="example" title="Set the language of a string">
							<pre>{
    "value"     : "孔子",
    "language"  : "zh"
}</pre>
						</aside>
						<aside class="example" title="Set the language and the base direction of a string">
							<pre>{
    "value"     : "<bdo dir="ltr">HTML היא שפת סימון.</bdo>",
    "language"  : "he",
    "direction" : "rtl"
}</pre>
						</aside>
						<div class="note">
							<p> If the base direction value were not set in the last example, the text would be
								displayed, following the Unicode Bidirectional Algorithm&#160;[[bidi]] and due to the
								presence of a Latin character starting the string, as: </p>
							<p dir="ltr">HTML היא שפת סימון.</p>
							<p> However, that would be incorrect. The extra <code>direction</code> value is necessary to
								control the display to yield: </p>
							<p dir="rtl">HTML היא שפת סימון.</p>
							<p>See also the [[string-meta]] document for further explanations and examples.</p>
						</div>


					</section>

					<section id="value-entity">
						<h6>Entities</h6>

						<p>When a <a href="#manifest-properties">manifest</a> property expects an entity (i.e., an
							individual or organization responsible for the various aspects of creation), its value MUST
							be expressed either as:</p>

						<ul>
							<li>a [[!json]] <a href="https://tools.ietf.org/html/rfc4627#section-2.5">string</a> value;
								or</li>
							<li>an <a><code>Entity</code></a>.</li>
						</ul>

						<p>A single string value represents an instance of an <code>Entity</code> object whose
								<code>name</code> property is the string's text and whose <code>type</code> is assumed
							to be <a href="https://schema.org/Person">Person</a>&#160;[[!schema.org]].</p>

						<p>An <dfn data-lt="Entities">Entity</dfn> is defined as an instance of either the
							[[!schema.org]] <a href="https://schema.org/Person"><code>Person</code></a> or <a
								href="https://schema.org/Organization"><code>Organization</code></a> type with the
							following minimal property set:</p>

						<table class="zebra">
							<thead>
								<tr>
									<th>Term</th>
									<th>Description</th>
									<th>Required Value</th>
									<th>Value Category</th>
									<th>[[!schema.org]] Mapping</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td id="entity-type">
										<code>type</code>
									</td>
									<td>The type of creator. OPTIONAL</td>
									<td>One or more Text. Sequence MUST include "<code>Person</code>" or
											"<code>Organization</code>".</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-literal">Literals</a>
									</td>
									<td>(None)</td>
								</tr>
								<tr>
									<td id="entity-name">
										<code>name</code>
									</td>
									<td>Name of the creator. REQUIRED.</td>
									<td>One or more Text.</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-localizable-string"
											>Localizable Strings</a>
									</td>
									<td>
										<a href="https://schema.org/name">
											<code>name</code>
										</a>
									</td>
								</tr>
								<tr>
									<td id="entity-id">
										<code>id</code>
									</td>
									<td>A canonical identifier associated with the creator. OPTIONAL.</td>
									<td>A URL record&#160;[[!url]].</td>
									<td>
										<a href="#value-id">Identifier</a>
									</td>
									<td>(None)</td>
								</tr>
								<tr>
									<td id="entity-url">
										<code>url</code>
									</td>
									<td>An address associated with the creator. OPTIONAL.</td>
									<td>A valid URL string&#160;[[!url]].</td>
									<td>
										<a href="#value-url">URL</a>
									</td>
									<td>
										<a href="https://schema.org/url">
											<code>url</code>
										</a>
									</td>
								</tr>
								<tr>
									<td id="entity-identifier">
										<code>identifier</code>
									</td>
									<td>An identifier associated with the creator (e.g., ORCID). OPTIONAL.</td>
									<td>One or more Text.</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-literal">Literals</a>
									</td>
									<td>
										<a href="https://schema.org/identifier">
											<code>identifier</code>
										</a>
									</td>
								</tr>
							</tbody>
						</table>

						<p>Note that user agents MAY interpret a wider range of creator properties defined by Schema.org
							than the ones in the preceding table.</p>

						<aside class="example" title="Using a string instead of a Person object.">
							<p>The following author name is expressed as a string:</p>

							<pre>{
    …
    "author" : "Edgar Allen Poe",
    …
}</pre>
							<p>but, in the context of <a href="#creators">creators</a>, it is equivalent to:</p>

							<pre>{
    …
    "author" : {
        "type" : "Person",
        "name" : "Edgar Allen Poe"
    },
    …
}</pre>
							<p>(See <a href="#creators"></a> for further details.)</p>
						</aside>
					</section>

					<section id="value-linked-resource">
						<h5>Linked Resources</h5>

						<p>When a manifest property links to one or more resources, it MUST be expressed either as:</p>

						<ol>
							<li>a [[!json]] <a href="https://tools.ietf.org/html/rfc4627#section-2.5">string</a>
								encoding the <a>URL</a> of the resources; or</li>
							<li>an instance of a <a><code>LinkedResource</code></a>.</li>
						</ol>

						<p>A string value represents an implied <code>LinkedResource</code> object whose
								<code>url</code> property is set to the string value.</p>

						<p>A <dfn data-lt="LinkedResources|linked resources"><code>LinkedResource</code></dfn> object is
							defined as follows:</p>

						<table class="zebra">
							<thead>
								<tr>
									<th>Term</th>
									<th>Description</th>
									<th>Required Value</th>
									<th>Value Category</th>
									<th>[[!schema.org]] Mapping</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td id="linkedresource-type">
										<code>type</code>
									</td>
									<td>The type of resource. OPTIONAL</td>
									<td>One or more Text. Sequence MUST include "<code>LinkedResource</code>".</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-literal">Literals</a>
									</td>
									<td>(None)</td>
								</tr>
								<tr>
									<td id="linkedresource-url">
										<code>url</code>
									</td>
									<td>Location of the resource. REQUIRED.</td>
									<td>A valid URL string&#160;[[!url]]. Refer to the property definitions that accept
										this type for additional restrictions.</td>
									<td>
										<a href="#value-url">URL</a>
									</td>
									<td>
										<a href="https://schema.org/url">
											<code>url</code>
										</a>
									</td>
								</tr>
								<tr>
									<td id="linkedresource-encodingformat">
										<code>encodingFormat</code>
									</td>
									<td>Media type of the resource (e.g., <code>text/html</code>). OPTIONAL.</td>
									<td>MIME Media Type&#160;[[!rfc2046]].</td>
									<td>
										<a href="#value-literal">Literal</a>
									</td>
									<td>
										<a href="https://schema.org/encodingFormat">
											<code>encodingFormat</code>
										</a>
									</td>
								</tr>
								<tr>
									<td id="linkedresource-name">
										<code>name</code>
									</td>
									<td>Name of the item. OPTIONAL.</td>
									<td>One or more Text.</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-localizable-string"
											>Localizable Strings</a>
									</td>
									<td>
										<a href="https://schema.org/name">
											<code>name</code>
										</a>
									</td>
								</tr>
								<tr>
									<td id="linkedresource-description">
										<code>description</code>
									</td>
									<td>Description of the item. OPTIONAL.</td>
									<td>One or more Text.</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-localizable-string"
											>Localizable Strings</a>
									</td>
									<td>
										<a href="https://schema.org/description">
											<code>description</code>
										</a>
									</td>
								</tr>
								<tr>
									<td id="linkedresource-rel">
										<code>rel</code>
									</td>
									<td>The relation of the resource to the publication. OPTIONAL.</td>
									<td>
										<p>One or more <a href="#manifest-rel">relations</a>. The values are either the
											relevant relation terms of the IANA link
											registry&#160;[[!iana-link-relations]], or specially-defined URLs if no
											suitable link registry item exists.</p>
									</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-literal">Literals</a>
									</td>
									<td>(None)</td>
								</tr>
								<tr>
									<td id="linkedresource-integrity">
										<code>integrity</code>
									</td>
									<td>A cryptographic hashing of the resource that allows its integrity to be
										verified. OPTIONAL.</td>
									<td><p>One or more whitespace-separated sets of <a
												href="https://www.w3.org/TR/SRI/#dfn-integrity-metadata">integrity
												metadata</a>&#160;[[!sri]]. The value MUST conform to the <a
												href="https://www.w3.org/TR/SRI/#the-integrity-attribute">metadata
												definition</a>&#160;[[!sri]].</p>
										<p>Refer to [[!sri]] for the <a
												href="https://www.w3.org/TR/SRI/#cryptographic-hash-functions">list of
												cryptographic hashing functions</a> that user agents are expected to
											support.</p>
									</td>
									<td>
										<a href="#value-literal">Literal</a>
									</td>
									<td>(None)</td>
								</tr>
								<tr>
									<td id="linkedresource-length">
										<code>length</code>
									</td>
									<td>The total length of a time-based media resource in (possibly fractional)
										seconds. OPTIONAL</td>
									<td>Number</td>
									<td>
										<a href="#value-number">Number</a>
									</td>
									<td>(None)</td>
								</tr>
								<tr>
									<td id="linkedresource-alternate">
										<code>alternate</code>
									</td>
									<td>
										<p>References to one or more reformulation(s) of the resource in alternative
											formats.</p>
										<p>When specified, <code>encodingFormat</code> indicates the format of the
											reformulation.</p>
										<p>Order is not significant.</p>
										<p>OPTIONAL</p>
										<p>One or more of:</p>
										<ul>
											<li>a string, representing the <a>URL</a> of the resource reformulation in
												an alternative format; or</li>
											<li>an instance of a <code>LinkedResource</code> object</li>
										</ul>
										<p>The order of items is <em>not significant</em>. Resources SHOULD be expressed
											as <code>LinkedResource</code> objects with their
												<code>encodingFormat</code> values set.</p>
									</td>
									<td>
										<p>One or more instances of <code>LinkedResource</code> objects.</p>
									</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-linked-resource">Linked
											Resources</a>
									</td>
									<td> (None) </td>
								</tr>
							</tbody>
						</table>

						<p>Although user agent support for the <code>integrity</code> property is OPTIONAL, user agents
							that support cryptographic hashing comparisons using this property MUST do so in accordance
							with [[!sri]].</p>

						<pre class="example" title="A resource with a SHA-256 hashing of its content.">{
    "type"           : "LinkedResource",
    "url"            : "chapter1.html",
    "encodingFormat" : "text/html",
    "name"           : "Chapter 1 - Loomings",
    "integrity"      : "sha256-13AE04E21177BABEDFDE721577615A638341F963731EA936BBB8C3862F57CDFC"
}</pre>

						<pre class="example" title="A resource with its alternate formats.">{
    "type"           : "LinkedResource",
    "url"            : "chapter1.mp3",
    "encodingFormat" : "audio/mpeg",
    "name"           : "Chapter 1 - Loomings",
    "alternate"      : [
        "chapter1.html",
        {
            "type": "LinkedResource",
            "url": "chapter1.json",
            "encodingFormat": "application/vnd.wp-sync-media+json",
            "length": 1669
        }
    ]
}</pre>

						<p>A string value represents an implied <code>LinkedResource</code> object whose
								<code>url</code> property is set to the string value.</p>

						<pre class="example" title="Resource list that includes one link using a relative URL as a string ('datatypes.svg') and two that display the various properties of the a LinkedResource object.">{
    …
    "resources" : [
        "datatypes.svg",
        {
            "type"            : "LinkedResource",
            "url"             : "test-utf8.csv",
            "encodingFormat"  : "text/csv",
            "name"            : "Test Results",
            "description"     : "CSV file containing the full data set used."
        },
        {
            "type"            : "LinkedResource",
            "url"             : "terminology.html",
            "encodingFormat"  : "text/html",
            "rel"             : "glossary"
        }
    ],
    …
}</pre>
					</section>

					<section id="value-object">
						<h3>Objects</h3>

						<p>When a manifest property expects a type of object not defined in this section, or by a
								<a>profile</a>, it MUST be expressed as a [[!json]] <a
								href="https://tools.ietf.org/html/rfc4627#section-2.2">object</a> (i.e., the property's
							value will not be processed to create an object).</p>
					</section>
				</section>

				<section id="value-url">
					<h4>URLs</h4>

					<p><dfn data-lt="URL">URLs</dfn> are used to identify resources associated with a <a>digital
							publication</a>. When a property expects a URL value, it MUST be a <a
							href="https://url.spec.whatwg.org/#absolute-url-string">valid URL
						string</a>&#160;[[!url]].</p>

					<p>Manifest URLs are restricted to only the <code>http</code> and <code>https</code>
						<a href="https://url.spec.whatwg.org/#concept-url-scheme">schemes</a>&#160;[[!url]].</p>

					<p>In the case of <a href="https://url.spec.whatwg.org/#relative-url-string">relative-URL
							strings</a>, these are resolved to <a
							href="https://url.spec.whatwg.org/#absolute-url-string">absolute-URL strings</a> using a <a
							href="https://url.spec.whatwg.org/#concept-base-url">base URL</a>&#160;[[!url]].</p>

					<p>The <dfn>base URL</dfn> for relative-URL strings is determined as follows:</p>

					<ul>
						<li>In the case of an <a href="#manifest-embed">embedded manifest</a>, it is the <a
								href="https://www.w3.org/TR/json-ld11/#inheriting-base-iri-from-html-s-base-element"
								>document base URL of the embedding document</a>&#160;[[!json-ld11]];</li>
						<li>In the case of a <a href="#manifest-link">linked manifest</a>, it is the URL of the manifest
							resource.</li>
						<li>In the case of a digital publication format that uses <a href="#manifest-other-discovery"
								>another means of discovering the manifest</a>, it is defined by the format.</li>
					</ul>

					<p>By consequence, relative-URL strings in embedded manifests are resolved against the URL of the
						document that references the manifest <em>unless</em> the document declares a base URL (i.e., in
						a <a data-cite="!html#the-base-element"><code>&lt;base&gt;</code> element</a> in its
						header).</p>

					<p class="note">URLs allow for the usage of characters from Unicode following&#160;[[rfc3987]]. See
							<a href="https://www.w3.org/TR/html/references.html#biblio-url">the note in the HTML5
							specification</a> for further details.</p>
				</section>

				<section id="value-id">
					<h4>Identifiers</h4>

					<p>Identifiers are used to refer to a <a>digital publication</a> and the <a href="#value-entity"
							>entities</a> reponsible for its creation in a persistent and unambiguous manner. <abbr
							title="Uniform Resource Locators">URLs</abbr>, <abbr title="Uniform Resource Names"
							>URNs</abbr>, <abbr title="Digital Object Identifiers">DOIs</abbr>, <abbr
							title="International Standard Book Numbers">ISBNs</abbr>, and <abbr
							title="Persistent Uniform Resource Locators">PURLs</abbr> are all examples of persistent
						identifiers frequently used in publishing.</p>

					<p>Identifiers MUST be expressed as <a href="https://url.spec.whatwg.org/#concept-url">URL
							records</a>&#160;[[!url]]</p>
				</section>

				<section id="value-array">
					<h4>Arrays</h4>

					<p>When a <a href="#manifest-properties">manifest property</a> allows one or more value of their
						respective type (e.g., <a href="#value-literal">literal</a>, <a href="#explicit-implied-objects"
							>object</a>, or <a href="#value-url">URL</a>), these values are expressed as [[!json]] <a
							href="https://tools.ietf.org/html/rfc4627#section-2.3">arrays</a>. When a property value is
						a single element, however, the array syntax MAY be omitted.</p>

					<aside class="example" title="Using a text string instead of an array.">
						<p>As a digital publication typically contains many resources, this declaration of a single
							resource:</p>

						<pre>{
    …
    "resources" : "datatypes.svg",
    …
}</pre>
						<p>is equivalent to the array:</p>

						<pre>{
    …
    "resources" : ["datatypes.svg"],
    …
}</pre>
					</aside>
				</section>
			</section>

			<section id="manifest-context">
				<h3>Manifest Contexts</h3>

				<p>A <a>manifest</a> MUST set its JSON-LD context&#160;[[!json-ld11]] with the following two components,
					in the specified order:</p>

				<ol>
					<li>the [[!schema.org]] context: <code>https://schema.org</code></li>
					<li>the <dfn>publication context</dfn>: <code>https://www.w3.org/ns/pub-context</code></li>
				</ol>

				<pre class="example" title="Setting the context declaration.">{
    "@context" : [
        "https://schema.org",
        "https://www.w3.org/ns/pub-context"
    ],
    …
}</pre>

				<p>The publication context document adds features to the properties defined in Schema.org (e.g., the
					requirement for the <a href="https://schema.org/creator">creator</a> property to be order
					preserving).</p>

				<p>Although Schema.org is often referenced using the <code>http</code> URI scheme, <a
						href="https://schema.org/docs/faq.html#19">the vocabulary is being migrated</a> to use the
					secure <code>https</code> scheme as its default. The use of <code>https</code> when referencing
					Schema.org in the manifest is REQUIRED by this specification.</p>

				<p>The context can be extended by including additional paramaters &#8212; such as the <a
						href="#manifest-context">global language and direction declarations</a> &#8212; in an object
					following the publication context.</p>

				<pre class="example">{
    "@context" : [
        "https://schema.org",
        "https://www.w3.org/ns/pub-context",
        {
            "language" : "es"
        }
    ],
    …
}</pre>
			</section>

			<section id="manifest-lang-dir">
				<h3>Manifest Language and Direction</h3>

				<p>Each <a href="#value-localizable-string">natural language property value</a> in a manifest (e.g., <a
						href="#pub-title">title</a>, <a href="#creators">creators</a>) has a default natural
						<dfn>language</dfn>, which is the language that it is expressed in (e.g., English, French,
					Chinese). It also has a natural <dfn>base direction</dfn> in which it is written — the display
					direction, either left-to-right or right-to-left.</p>

				<p> The digital publication manifest provides the ability to set both these concepts <a
						href="#manifest-lang-dir-global">globally</a> as well as on <a href="#manifest-lang-dir-local"
						>individual items</a> to aid user agents in interpreting and presenting the metadata. </p>

				<p class="note"> The ability to set the base direction is a JSON-LD&#160;1.1&#160;[[json-ld11]] feature.
					In other words, the Publication Manifest has a dependency on that version of the JSON-LD
					specification (as opposed to the earlier 1.0&#160;[[json-ld10]] version). </p>

				<section id="manifest-lang-dir-global">
					<h4>Global Declarations</h4>

					<p> The default language for natural language manifest properties is set by including a global
						language and/or a global base direction declaration in the context using the <a
							href="https://w3c.github.io/json-ld-syntax/#syntax-tokens-and-keywords"
								><code>language</code></a>, respectively the <a
							href="https://w3c.github.io/json-ld-syntax/#syntax-tokens-and-keywords"
								><code>direction</code></a>, keywords&#160;[[!json-ld11]]. It is used to expand simple
						string values into <a href="#value-localizable-string">localizable strings</a> during the <a
							href="#manifest-processing">processing of the manifest</a>, as well as to provide a language
						and the base direction for localizable strings that omit one. </p>

					<p> The value of <code>language</code> MUST be a <a
							href="https://tools.ietf.org/html/bcp47#section-2.2.9">well-formed language
						tag</a>&#160;[[!bcp47]]. </p>

					<p>The value of <code>direction</code> MUST have one of the following values:</p>

					<ul>
						<li><code>"ltr"</code>: indicates that the textual values are explicitly directionally set to
							left-to-right text;</li>
						<li><code>"rtl"</code>: indicates that the textual values are explicitly directionally set to
							right-to-left text;</li>
					</ul>

					<aside class="example" title="Declaring French as the default language for the manifest.">
						<pre>{
    "@context": [
        "https://schema.org",
        "https://www.w3.org/ns/pub-context", 
        {
            "language": "fr"
        }
    ],
    …
}</pre>
					</aside>

					<aside class="example"
						title="Declaring Azeri as the default language and with the base direction to right-to-left.">
						<pre>{
    "@context": [
        "https://schema.org",
        "https://www.w3.org/ns/pub-context", 
        {
            "language": "az",
            "direction": "rtl"
        }
    ],
    …
}</pre>
					</aside>


					<p>The global language and base direction declaration, when present, MUST follow the <a>publication
							context</a>.</p>

					<p>Default values are not specified for the global language or base direction.</p>
				</section>

				<section id="manifest-lang-dir-local">
					<h4>Item-Specific Declarations</h4>

					<p>It is possible to set the language or a base direction locally for any natural language value in
						the manifest using a <a>localizable string</a>:</p>


					<aside class="example" title="Providing the author name in English for a Chinese publication.">
						<pre>{
    "@context" : [
        "https://schema.org",
        "https://www.w3.org/ns/pub-context",
        {
            "language": "zh"
        }
    ],
    "type"     : "Book",
    &#8230;
    "author" : {
        "type" : "Person"
        "name" : [
            "孔子",
            {
                "value" : "Confucius",
                "language" : "en"				
            }
        ]
    }
}
</pre>
					</aside>


					<aside class="example" title="A publication in Arabic with the title also given in English.">
						<pre>{
    "@context" : [
        "https://schema.org",
        "https://www.w3.org/ns/pub-context",
        {
            "language": "ar"
        }
    ],
    "type"     : "Book",
    &#8230;
    "name" : [
        {
            "value": "<span lang="ar" dir="rtl">HTML و CSS: تصميم و إنشاء مواقع الويب</span>",
            "direction": "rtl"
        }
        {
            "value"    : "HTML and CSS: Design and Build Websites",
            "language" : "en"
        }
    ]
}
</pre>
					</aside>
					<div class="note">
						<p>The extra base direction setting for the Arabic title is necessary to yield the correct
							display, i.e.,:</p>
						<p lang="ar" dir="rtl">HTML و CSS: تصميم و إنشاء مواقع الويب</p>
					</div>

					<p> The possible values of the <a
							href="https://w3c.github.io/json-ld-syntax/#syntax-tokens-and-keywords"
								><code>language</code></a> and <a
							href="https://w3c.github.io/json-ld-syntax/#syntax-tokens-and-keywords"
								><code>direction</code></a> keywords&#160;[[!json-ld11]] are the same as for the <a
							href="#manifest-lang-dir-global">global declaration</a>. Furthermore, both values can also
						be the (JSON) value of <code>null</code>, indicating that no explicit language, respectively
						direction, is set. </p>

					<p class="note"> Setting the value of <code>language</code> to <code>null</code> can be useful if a
						value (e.g., the name of an organization) is commonly used without any associated language
						(e.g., "Google"). </p>

					<p>A local declaration of the language, respectively the base direction, takes precedence over a <a
							href="#manifest-lang-dir-global">global declaration</a>.</p>

				</section>
			</section>

			<section id="publication-types">
				<h4>Publication Types</h4>

				<p>A <a>digital publication's</a>
					<a>manifest</a> defines its <dfn>Publication Type</dfn> using the <code>type</code>
					keyword&#160;[[!json-ld11]]. The type MAY be mapped onto any [[!schema.org]] type, but <a
						href="https://schema.org/CreativeWork"><code>CreativeWork</code></a> is <a href="#validate-type"
						>assumed as the default</a> when no type is specified.</p>

				<pre class="example" title="Setting a publication's type to CreativeWork.">{
    "@context" : ["https://schema.org", "https://www.w3.org/ns/pub-context"],
    "type"     : "CreativeWork",
    …
}</pre>

				<p>More specific subtypes of <code>CreativeWork</code>, such as <a href="https://schema.org/Article"
							><code>Article</code></a>, <a href="https://schema.org/Book"><code>Book</code></a>, <a
						href="https://schema.org/TechArticle"><code>TechArticle</code></a>, and <a
						href="https://schema.org/Course"><code>Course</code></a> can be used instead of, or in addition
					to, <code>CreativeWork</code>.</p>

				<pre class="example" title="Setting a publication's type to Book.">{
    "@context" : ["https://schema.org", "https://www.w3.org/ns/pub-context"],
    "type"     : "Book",
    …
}</pre>

				<p>Each schema.org type defines a set of properties that are valid for use with it. To ensure that the
					manifest can be validated and processed by schema.org-aware processors, the manifest SHOULD contain
					only the properties associated with the selected type.</p>

				<p>If properties from more than one type are needed, the manifest MAY include multiple type
					declarations.</p>

				<pre class="example" title="Setting the type property for a publication that combines properties from Book and VisualArtwork.">{
    "@context" : ["https://schema.org", "https://www.w3.org/ns/pub-context"],
    "type"     : ["Book", "VisualArtwork"],
    …
}</pre>

				<p>User agents SHOULD NOT fail to process manifests that are not valid to their declared schema.org
					type(s).</p>

				<p class="note">Refer to the schema.org site for the complete <a
						href="https://schema.org/CreativeWork#subtypes">list of <code>CreativeWork</code>
					subtypes</a>.</p>
			</section>

			<section id="profile-conformance">
				<h3>Profile Conformance</h3>

				<p>A <a>digital publication</a> indicates the <a>profile</a> its manifest and content are in conformance
					with using the <code>conformsTo</code> property.</p>

				<table class="zebra">
					<thead>
						<tr>
							<th>Term</th>
							<th>Description</th>
							<th>Required Value</th>
							<th>Value Category</th>
							<th>[[!dcterms]] Mapping</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td>
								<code> conformsTo </code>
							</td>
							<td>URL of the profile.</td>
							<td>An <a href="https://url.spec.whatwg.org/#absolute-url-with-fragment-string"
									>absolute-URL-with-fragment string</a>&#160;[[!url]].</td>
							<td><a href="#value-array">Array</a> of <a href="#value-literal">Literals</a></td>
							<td><a
									href="https://www.dublincore.org/specifications/dublin-core/dcmi-terms/#terms-conformsTo"
									>conformsTo</a></td>
						</tr>
					</tbody>
				</table>

				<p>The URL to use for each profile is defined in its respective specification.</p>

				<p class="note">The <code>conformsTo</code> property can also be used to indicate conformance to other
					specifications and standards (e.g., to [[WCAG21]]).</p>

				<pre class="example" title="Identify that a digital publication conforms to the W3C Audiobooks specification.">{
    …
    "conformsTo" : "https://www.w3.org/TR/audiobooks",
    …
}</pre>
			</section>

			<section id="manifest-properties">
				<h3>Properties</h3>

				<section id="descriptive-properties">
					<h4>Descriptive Properties</h4>

					<section id="abridged">
						<h5>Abridged</h5>

						<p>The <code>abridged</code> property provides information on whether or not a <a>digital
								publication</a> has been shortened from its original form.</p>

						<table class="zebra">
							<thead>
								<tr>
									<th>Term</th>
									<th>Description</th>
									<th>Required Value</th>
									<th>Value Category</th>
									<th>[[!schema.org]] Mapping</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>
										<code>abridged</code>
									</td>
									<td>Indicates whether the book is an abridged edition.</td>
									<td>Either <code>true</code> or <code>false</code>.</td>
									<td><a href="#value-boolean">Boolean</a></td>
									<td>
										<a href="https://schema.org/abridged"><code>abridged</code></a> (<a
											href="https://schema.org/Book">Book</a>) </td>
								</tr>
							</tbody>
						</table>

						<pre class="example" title="Setting that a publication is abridged.">{
    …
    "abridged" : true,
    …
}</pre>
					</section>

					<section id="accessibility">
						<h5>Accessibility</h5>

						<p>The accessibility properties provide information about the suitability of a <a>digital
								publication</a> for consumption by users with different preferred reading modalities.
							These properties typically supplement an evaluation against established accessibility
							criteria, such as those provided in [[wcag21]].</p>

						<p>The following properties are categorized as accessibility properties:</p>

						<table class="zebra">
							<thead>
								<tr>
									<th>Term</th>
									<th>Description</th>
									<th>Required Value</th>
									<th>Value Category</th>
									<th>[[!schema.org]] Mapping</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td id="accessMode">
										<code>accessMode</code>
									</td>
									<td>The human sensory perceptual system or cognitive faculty through which a person
										may process or perceive information. </td>
									<td>One or more Text.</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-literal">Literals</a>
									</td>
									<td>
										<a href="https://schema.org/accessMode"><code>accessMode</code></a> (<a
											href="https://schema.org/CreativeWork">CreativeWork</a>) </td>
								</tr>
								<tr>
									<td id="accessModeSufficient">
										<code>accessModeSufficient</code>
									</td>
									<td> A list of single or combined access modes that are sufficient to understand all
										the intellectual content of a resource. </td>
									<td> One or more <a href="https://schema.org/ItemList">ItemList</a>.</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-object">Object</a>
									</td>
									<td>
										<a href="https://schema.org/accessModeSufficient"
												><code>accessModeSufficient</code></a> (<a
											href="https://schema.org/CreativeWork">CreativeWork</a>) </td>
								</tr>
								<tr>
									<td id="accessibilityFeature">
										<code>accessibilityFeature</code>
									</td>
									<td> Content features of the resource, such as accessible media, alternatives and
										supported enhancements for accessibility. </td>
									<td> One or more Text.</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-literal">Literals</a>
									</td>
									<td>
										<a href="https://schema.org/accessibilityFeature"
												><code>accessibilityFeature</code></a> (<a
											href="https://schema.org/CreativeWork">CreativeWork</a>) </td>
								</tr>
								<tr>
									<td id="accessibilityHazard">
										<code>accessibilityHazard</code>
									</td>
									<td> A characteristic of the described resource that is physiologically dangerous to
										some users. </td>
									<td> One or more Text.</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-literal">Literals</a>
									</td>
									<td>
										<a href="https://schema.org/accessibilityHazard"
												><code>accessibilityHazard</code></a> (<a
											href="https://schema.org/CreativeWork">CreativeWork</a>) </td>
								</tr>
								<tr>
									<td id="accessibilitySummary">
										<code>accessibilitySummary</code>
									</td>
									<td>A human-readable summary of specific accessibility features or deficiencies that
										is consistent with the other accessibility metadata. </td>
									<td>Text.</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-localizable-string"
											>Localizable Strings</a>
									</td>
									<td>
										<a href="https://schema.org/accessibilitySummary"
												><code>accessibilitySummary</code></a> (<a
											href="https://schema.org/CreativeWork">CreativeWork</a>) </td>
								</tr>
							</tbody>
						</table>

						<p class="note">Detailed descriptions of these properties, including the expected values to use
							with them, are available at [[webschemas-a11y]].</p>

						<p class="note">A reference to a detailed <a href="#accessibility-report">accessibility
								report</a> can also be provided if more information is needed than can be expressed by
							these properties.</p>

						<pre class="example" title="Setting accessiblity metadata for a publication that provides alternative text and long descriptions appropriate for each image, enabling it to be read in purely textual form.">{
    …
    "accessMode"              : ["textual", "visual"],
    "accessibilityFeature"    : ["alternativeText", "longDescription"]
    "accessModeSufficient"    : [
        {
            "type"            : "ItemList",
            "itemListElement" : ["textual", "visual"]
        },
        {
            "type"            : "ItemList",
            "itemListElement" : ["textual"]
        }
    ],
    …
}</pre>

					</section>

					<section id="address">
						<h4>Address</h4>

						<p>An <dfn>address</dfn> is a <a>URL</a> that identifies the source location of a <a>digital
								publication</a>. It is expressed using the <code>url</code> property.</p>

						<table class="zebra">
							<thead>
								<tr>
									<th>Term</th>
									<th>Description</th>
									<th>Required Value</th>
									<th>Value Category</th>
									<th>[[!schema.org]] Mapping</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>
										<code>url</code>
									</td>
									<td>URL of the publication.</td>
									<td>A valid URL string&#160;[[!url]].</td>
									<td><a href="#value-array">Array</a> of <a href="#value-url">URLs</a></td>
									<td>
										<a href="https://schema.org/url"><code>url</code></a> (<a
											href="https://schema.org/Thing">Thing</a>) </td>
								</tr>
							</tbody>
						</table>

						<p>A digital publication MAY have more than one address, but all the addresses MUST resolve to
							the same document.</p>

						<div class="note">The publication's address can also be used as value for an identifier link
							relation&#160;[[link-relation]].</div>

						<pre class="example" title="Setting the address of the publication.">{
    …
    "url" : "https://publisher.example.org/frankenstein",
    …
}</pre>
					</section>

					<section id="canonical-identifier">
						<h5>Canonical Identifier</h5>

						<p>A <a>digital publication's</a>
							<dfn>canonical identifier</dfn> property provides a unique identifier for a <a>digital
								publication</a>. It is expressed using the <code>id</code> property.</p>

						<table class="zebra">
							<thead>
								<tr>
									<th>Term</th>
									<th>Description</th>
									<th>Required Value</th>
									<th>Value Category</th>
									<th>[[!schema.org]] Mapping</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>
										<code>id</code>
									</td>
									<td>Preferred version of the publication.</td>
									<td>A URL record&#160;[[!url]].</td>
									<td><a href="#value-id">Identifier</a></td>
									<td>(None)</td>
								</tr>
							</tbody>
						</table>

						<p class="note">Ensuring uniqueness of canonical identifiers is outside the scope of this
							specification. The actual achievable uniqueness depends on such factors as the conventions
							of the identifier scheme used and the degree of control over assignment of identifiers.</p>

						<p>If a canonical identifier is not provided in the manifest, or the value is an invalid URL,
							the digital publication does not have a canonical identifier. User agents MUST NOT attempt
							to construct a canonical identifier from any other identifiers provided in the manifest.</p>

						<p>The specification of the canonical identifier MAY be complemented by the inclusion of
							additional types of identifiers using the <a href="https://schema.org/identifier"
									><code>identifier</code> property</a>&#160;[[!schema.org]] and/or its subtypes.</p>

						<pre class="example" title="Setting the canonical identifier and the address as URLs.">{
    …
    "id"  : "http://www.w3.org/TR/tabular-data-model/",
    "url" : "http://www.w3.org/TR/2015/REC-tabular-data-model-20151217/",
    …
}</pre>

						<pre class="example" title="Using a URN for the canonical identifier.">{
    …
    "id"  : "urn:isbn:9780123456789",
    "url" : "https://publisher.example.org/wuthering-heights",
    …
}</pre>
					</section>

					<section id="creators">
						<h5>Creators</h5>

						<p>A <dfn>creator</dfn> is an individual or organization responsible for the creation of a
								<a>digital publication</a>.</p>

						<p>The following properties are categorized as creators:</p>

						<table class="zebra">
							<thead>
								<tr>
									<th>Term</th>
									<th>Description</th>
									<th>Required Value</th>
									<th>Value Category</th>
									<th>[[!schema.org]] Mapping</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td id="artist">
										<code>artist</code>
									</td>
									<td>The primary artist for the publication, in a medium other than pencils or
										digital line art.</td>
									<td>One or more <a href="https://schema.org/Person"><code>Person</code></a>.</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-entity">Entities</a>
									</td>
									<td>
										<a href="https://bib.schema.org/artist"><code>artist</code></a> (<a
											href="https://schema.org/VisualArtwork">VisualArtwork</a>) </td>
								</tr>
								<tr>
									<td id="author">
										<code>author</code>
									</td>
									<td>The author of the publication.</td>
									<td>One or more <a href="https://schema.org/Person"><code>Person</code></a> and/or
											<a href="https://schema.org/Organization"
										><code>Organization</code></a>.</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-entity">Entities</a>
									</td>
									<td>
										<a href="https://schema.org/author"><code>author</code></a> (<a
											href="https://schema.org/CreativeWork">CreativeWork</a>) </td>
								</tr>
								<tr>
									<td id="colorist">
										<code>colorist</code>
									</td>
									<td>The individual who adds color to inked drawings.</td>
									<td>One or more <a href="https://schema.org/Person"><code>Person</code></a>.</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-entity">Entities</a>
									</td>
									<td>
										<a href="https://bib.schema.org/colorist"><code>colorist</code></a> (<a
											href="https://schema.org/VisualArtwork">VisualArtwork</a>) </td>
								</tr>
								<tr>
									<td id="contributor">
										<code>contributor</code>
									</td>
									<td>Contributor whose role does not fit to one of the other roles in this
										table.</td>
									<td>One or more <a href="https://schema.org/Person"><code>Person</code></a> and/or
											<a href="https://schema.org/Organization"
										><code>Organization</code></a>.</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-entity">Entities</a>
									</td>
									<td>
										<a href="https://schema.org/contributor"><code>contributor</code></a> (<a
											href="https://schema.org/CreativeWork">CreativeWork</a>) </td>
								</tr>
								<tr>
									<td id="creator">
										<code>creator</code>
									</td>
									<td>The creator of the publication.</td>
									<td>One or more <a href="https://schema.org/Person"><code>Person</code></a> and/or
											<a href="https://schema.org/Organization"
										><code>Organization</code></a>.</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-entity">Entities</a>
									</td>
									<td>
										<a href="https://schema.org/creator"><code>creator</code></a> (<a
											href="https://schema.org/CreativeWork">CreativeWork</a>) </td>
								</tr>
								<tr>
									<td id="editor">
										<code>editor</code>
									</td>
									<td>The editor of the publication.</td>
									<td>One or more <a href="https://schema.org/Person"><code>Person</code></a>.</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-entity">Entities</a>
									</td>
									<td>
										<a href="https://schema.org/editor"><code>editor</code></a> (<a
											href="https://schema.org/CreativeWork">CreativeWork</a>) </td>
								</tr>
								<tr>
									<td id="illustrator">
										<code>illustrator</code>
									</td>
									<td>The illustrator of the publication.</td>
									<td>One or more <a href="https://schema.org/Person"><code>Person</code></a>.</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-entity">Entities</a>
									</td>
									<td>
										<a href="https://schema.org/illustrator"><code>illustrator</code></a> (<a
											href="https://schema.org/Book">Book</a>) </td>
								</tr>
								<tr>
									<td id="inker">
										<code>inker</code>
									</td>
									<td>The individual who traces over the pencil drawings in ink.</td>
									<td>One or more <a href="https://schema.org/Person"><code>Person</code></a>.</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-entity">Entities</a>
									</td>
									<td>
										<a href="https://bib.schema.org/inker"><code>inker</code></a> (<a
											href="https://schema.org/VisualArtwork">VisualArtwork</a>) </td>
								</tr>
								<tr>
									<td id="letterer">
										<code>letterer</code>
									</td>
									<td>The individual who adds lettering, including speech balloons and sound effects,
										to artwork.</td>
									<td>One or more <a href="https://schema.org/Person"><code>Person</code></a>.</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-entity">Entities</a>
									</td>
									<td>
										<a href="https://bib.schema.org/letterer"><code>letterer</code></a> (<a
											href="https://schema.org/VisualArtwork">VisualArtwork</a>) </td>
								</tr>
								<tr>
									<td id="penciler">
										<code>penciler</code>
									</td>
									<td>The individual who draws the primary narrative artwork.</td>
									<td>One or more <a href="https://schema.org/Person"><code>Person</code></a>.</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-entity">Entities</a>
									</td>
									<td>
										<a href="https://bib.schema.org/penciler"><code>penciler</code></a> (<a
											href="https://schema.org/VisualArtwork">VisualArtwork</a>) </td>
								</tr>
								<tr>
									<td id="publisher">
										<code>publisher</code>
									</td>
									<td>The publisher of the publication.</td>
									<td>One or more <a href="https://schema.org/Person"><code>Person</code></a> and/or
											<a href="https://schema.org/Organization"
										><code>Organization</code></a>.</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-entity">Entities</a>
									</td>
									<td>
										<a href="https://schema.org/publisher"><code>publisher</code></a> (<a
											href="https://schema.org/CreativeWork">CreativeWork</a>) </td>
								</tr>
								<tr>
									<td id="readBy">
										<code>readBy</code>
									</td>
									<td>A person who reads (performs) the publication (for audiobooks).</td>
									<td>One or more <a href="https://schema.org/Person"><code>Person</code></a>. </td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-entity">Entities</a>
									</td>
									<td>
										<a href="https://bib.schema.org/readBy"><code>readBy</code></a> (<a
											href="https://bib.schema.org/Audiobook">Audiobook</a>) </td>
								</tr>
								<tr>
									<td id="translator">
										<code>translator</code>
									</td>
									<td>The translator of the publication.</td>
									<td>One or more <a href="https://schema.org/Person"><code>Person</code></a> and/or
											<a href="https://schema.org/Organization"><code>Organization</code></a>. </td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-entity">Entities</a>
									</td>
									<td>
										<a href="https://schema.org/translator"><code>translator</code></a> (<a
											href="https://schema.org/CreativeWork">CreativeWork</a>) </td>
								</tr>
							</tbody>
						</table>

						<p>Creators MUST be represented either as:</p>

						<ol>
							<li>a [[!json]] <a href="https://tools.ietf.org/html/rfc4627#section-2.5">string</a>
								encoding the name of a <a href="https://schema.org/Person"
								><code>Person</code></a>&#160;[[!schema.org]]; or</li>
							<li>an instance of a <a href="https://schema.org/Person"><code>Person</code></a> or <a
									href="https://schema.org/Organization"
								><code>Organization</code></a>&#160;[[!schema.org]].</li>
						</ol>

						<p>A single string value is a shorthand for a [[!schema.org]] <code>Person</code> whose
								<code>name</code> property is set to that string value. (See also <a
								href="#value-entity"></a>.)</p>

						<p>When compiling each set of creator information from a [[!schema.org]] <a
								href="https://schema.org/Person"><code>Person</code></a> or <a
								href="https://schema.org/Organization"><code>Organization</code></a> type, user agents
							MUST retain the properties defined for the <a href="#value-entity">Entity type</a>, when
							available.</p>

						<p>The manifest MAY include more than one of each type of creator.</p>

						<pre class="example" title="Setting the author of a book.">{
    …
    "url"      : "https://publisher.example.org/alice-in-wonderland",
    "author"   : {
        "type"  : "Person",
        "name"  : "Lewis Carroll"
    }
}</pre>
						<pre class="example" title="Separating editors, authors, and publisher. Some persons expressed as simple strings instead of objects.">{
    …
    "author"     : [
        "Jeni Tennison",
        {
            "type"       : "Person",
            "name"       : "Gregg Kellogg",
        },
        {
            "type"       : "Person",
            "name"       : "Ivan Herman",
            "id"         : "https://www.w3.org/People/Ivan/"
            "identifier" : "0000-0003-0782-2704",
        }
    ],
    "editor"    : [
        "Jeni Tennison",
        {
            "type" : "Person",
            "name" : "Gregg Kellogg",
        }
    ],
    "publisher" : {
        "type" : "Organization",
        "name" : "World Wide Web Consortium",
        "id"   : "https://www.w3.org/"
    }
    …
}</pre>
					</section>

					<section id="duration">
						<h5>Duration</h5>

						<p> The <dfn>global duration</dfn> indicates the overall length of a <em>time-based</em>
							<a>digital publication</a> (e.g., an audiobook or a book consisting of a series of video
							clips). It is expressed using the <code>duration</code> property.</p>

						<table class="zebra">
							<thead>
								<tr>
									<th>Term</th>
									<th>Description</th>
									<th>Required Value</th>
									<th>Value Category</th>
									<th>[[!schema.org]] Mapping</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>
										<code>duration</code>
									</td>
									<td>Overall duration of a time-based publication.</td>
									<td>Duration value as defined by&#160;[[!iso8601]].</td>
									<td>
										<a href="#value-literal">Literal</a>
									</td>
									<td>
										<a href="https://schema.org/duration"><code>duration</code></a> (<a
											href="https://schema.org/Property">Property</a>) </td>
								</tr>
							</tbody>
						</table>

						<pre class="example" title="Setting the global duration in seconds.">{
    …
    "type"     : "Audiobook",
    "id"       : "https://example.org/flatland-a-romance-of-many-dimensions/",
    "url"      : "https://w3c.github.io/pub-manifest/experiments/audiobook/",
    "name"     : "Flatland: A Romance of Many Dimensions",
    …
    "duration" : "PT15153S",
    …
}</pre>

						<p class="note"> The <a href="https://en.wikipedia.org/wiki/ISO_8601#Durations">relevant
								Wikiepedia page</a> gives a concise description of the ISO duration syntax. </p>
					</section>

					<section id="last-modification-date">
						<h5>Last Modification Date</h5>

						<p>The <dfn>last modification date</dfn> is the date when a <a>digital publication</a> was last
							updated (i.e., whenever changes were last made to any of the resources of the publication,
							including the <a>manifest</a>). It is expressed using the <code>dateModified</code>
							property.</p>
						<table class="zebra">
							<thead>
								<tr>
									<th>Term</th>
									<th>Description</th>
									<th>Required Value</th>
									<th>Value Category</th>
									<th>[[!schema.org]] Mapping</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>
										<code>dateModified</code>
									</td>
									<td>Last modification date of the publication.</td>
									<td>A <a href="https://schema.org/Date"><code>Date</code></a> or <a
											href="https://schema.org/DateTime"><code>DateTime</code></a>
										value&#160;[[!schema.org]], both expressed in ISO 8601 Date, or Date Time
										formats, respectively&#160;[[!iso8601]].</td>
									<td>
										<a href="#value-literal">Literal</a>
									</td>
									<td>
										<a href="https://schema.org/dateModified"><code>dateModified</code></a> (<a
											href="https://schema.org/CreativeWork">CreativeWork</a>) </td>
								</tr>
							</tbody>
						</table>
						<p>The last modification date does not necessarily reflect all changes to a publication (e.g.,
							if a digital publication format allows references to third-party content). User agents
							SHOULD check the last modification date of individual resources to determine if they have
							changed and need updating.</p>

						<pre class="example" title="Setting the last modification date of the publication.">{
    …
    "dateModified" : "2015-12-17",
    …
}</pre>
					</section>

					<section id="publication-date">
						<h5>Publication Date</h5>

						<p>The <dfn>publication date</dfn> is the date on which a <a>digital publication</a> was
							originally published. It represents a static event in the lifecycle of a publication and
							allows subsequent revisions to be identified and compared. It is expressed using the
								<code>datePublished</code> property.</p>

						<table class="zebra">
							<thead>
								<tr>
									<th>Term</th>
									<th>Description</th>
									<th>Required Value</th>
									<th>Value Category</th>
									<th>[[!schema.org]] Mapping</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>
										<code>datePublished</code>
									</td>
									<td>Creation date of the publication.</td>
									<td>A <a href="https://schema.org/Date"><code>Date</code></a> or <a
											href="https://schema.org/DateTime"><code>DateTime</code></a>, both expressed
										in ISO 8601 Date, or Date Time formats, respectively&#160;[[!iso8601]].</td>
									<td>
										<a href="#value-literal">Literal</a>
									</td>
									<td>
										<a href="https://schema.org/datePublished"><code>datePublished</code></a> (<a
											href="https://schema.org/CreativeWork">CreativeWork</a>) </td>
								</tr>
							</tbody>
						</table>

						<p>The exact moment of publication is intentionally left open to interpretation: it could be
							when the publication is first made available or could be a point in time before publication
							when the publication is considered final.</p>

						<pre class="example" title="Setting the creation and modification date of the publication.">{
    …
    "datePublished" : "2015-12-17",
    "dateModified"  : "2016-01-30",
    …
}</pre>
					</section>

					<section id="inLanguage">
						<h5>Publication Language</h5>

						<p>A <a>digital publication</a> has at least one natural language, which is the language that
							the content is expressed in (e.g., English, French, Chinese). The manifest includes the
							following property to set this concept, which can influence, for example, the behavior of a
							user agent (e.g., to preload a dictionary or text-to-speech engine).</p>

						<table class="zebra">
							<thead>
								<tr>
									<th>Term</th>
									<th>Description</th>
									<th>Required Value</th>
									<th>Value Category</th>
									<th>[[!schema.org]] Mapping</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>
										<code>inLanguage</code>
									</td>
									<td>Default <a>language</a> for the publication.</td>
									<td>One or more <a href="https://tools.ietf.org/html/bcp47#section-2.2.9"
											>well-formed language tags</a>&#160;[[!bcp47]].</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-literal">Literals</a>
									</td>
									<td>
										<a href="https://schema.org/inLanguage"><code>inLanguage</code></a> (<a
											href="https://schema.org/Property">Property</a>) </td>
								</tr>
							</tbody>
						</table>

						<p>The natural language MUST be a <a href="https://tools.ietf.org/html/bcp47#section-2.2.9"
								>well-formed language tag</a> &#160;[[!bcp47]].</p>

						<p>If a user agent requires the publication language and it is not available in the manifest, or
							the obtained value is not <a href="https://tools.ietf.org/html/bcp47#section-2.2.9"
								>well-formed</a>&#160;[[!bcp47]], the user agent MAY attempt to determine the
							publication language when <a href="#manifest-processing">generating its internal
								representation</a>. This specification does not mandate how such a language tag is
							created. The user agent might:</p>

						<ul>
							<li>use the <a>non-empty</a>
								<a href="#manifest-lang-dir">language declaration of the manifest</a>;</li>
							<li>use the first non-empty language declaration found in a resource in the <a>default
									reading order</a>;</li>
							<li>calculate the language using its own algorithm.</li>
						</ul>

						<p>If a user agent requires a primary language for the publication and more than one language is
							specified, the first entry in the <code>inLanguage</code> array MUST be recognized as the
							primary.</p>

						<p class="note">It is important to differentiate the language <em>of the publication</em> from
							the language of the individual resources that compose it. If such resources are, for
							example, in HTML, the language needs to be set in those resources, too. The language of the
							publication is not inherited.</p>
					</section>

					<section id="reading-progression-direction">
						<h5>Reading Progression Direction</h5>

						<p>The <dfn data-lt="ProgressionDirection">reading progression direction</dfn> establishes the
							reading direction from one resource to the next within a <a>digital publication</a>. It is
							used to adapt such publication-level interactions as menu position, touch gestures, swap
							direction, and tap zones for next and previous page. The reading progression is expressed
							using the <code>readingDirection</code> property.</p>

						<table class="zebra">
							<thead>
								<tr>
									<th>Term</th>
									<th>Description</th>
									<th>Required Value</th>
									<th>Value Category</th>
									<th>[[!schema.org]] Mapping</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>
										<code>readingProgression</code>
									</td>
									<td>Reading progression direction from one resource to the other.</td>
									<td>One of: <code>ltr</code> or <code>rtl</code>.</td>
									<td>
										<a href="#value-literal">Literal</a>
									</td>
									<td>(None)</td>
								</tr>
							</tbody>
						</table>

						<p>The value of this property MUST be either:</p>

						<ul>
							<li><code>ltr</code>: left-to-right;</li>
							<li><code>rtl</code>: right-to-left.</li>
						</ul>

						<p>The default value is <code>ltr</code>. If the <code>readingProgression</code> is not set,
							user agents MUST use the default value when generating their <a>internal
							representation</a>.</p>

						<p>This property has <em>no effect</em> on the rendering of the individual primary resources; it
							is only relevant for the progression direction from one resource to the other.</p>

						<pre class="example" title="Setting the reading progression explicitly to ltr (left-to-right).">{
    …
    "readingProgression" : "ltr",
    …
}</pre>
					</section>

					<section id="pub-title">
						<h5>Title</h5>

						<p>The title provides the human-readable name of a <a>digital publication</a>. It is expressed
							using the <code>name</code> property.</p>

						<table class="zebra">
							<thead>
								<tr>
									<th>Term</th>
									<th>Description</th>
									<th>Required Value</th>
									<th>Value Category</th>
									<th>[[!schema.org]] Mapping</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>
										<code>name</code>
									</td>
									<td>Human-readable title of the publication.</td>
									<td>One or more Text.</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-localizable-string"
											>Localizable Strings</a>
									</td>
									<td>
										<a href="https://schema.org/name"><code>name</code></a> (<a
											href="https://schema.org/Thing">Thing</a>) </td>
								</tr>
							</tbody>
						</table>

						<p id="generate_title">If a title is not included in the manifest, and a <a>digital
								publication</a> does not define alternative rules for obtaining one, the user agent MUST
							create one. This specification does not specify what heuristics to use to generate such a
							title.</p>

						<p class="note">A user agent is not expected to produce a <a data-cite="wcag21#page-titled"
								>meaningful title</a>&#160;[[wcag21]] for a publication when one is not specified. </p>

						<pre class="example" title="Setting the title of a book explicitly.">{
    …
    "name" : "Heart of Darkness",
    …
}</pre>
					</section>
				</section>

				<section id="resource-categorization-properties">
					<h4>Resource Categorization Properties</h4>

					<p>Publication resources are specified via the <a>default reading order</a>, the <a>resource
							list</a>, and the <a>links</a>, as defined in this section. These lists contain references
						to <a href="#informative-rel">informative resources</a> like the <a href="#privacy-policy"
							>privacy policy</a>, and <a href="#structural-rel">structural resources</a> like the <a
							href="#table-of-contents">table of contents</a>.</p>

					<p>Note that a particular resource's <a>URL</a> MUST NOT appear in more than one of these lists, and
						a URL MUST NOT be repeated within a list.</p>

					<p>The manifest MUST NOT include a reference to itself within any of these lists.</p>

					<section id="default-reading-order">
						<h5>Default Reading Order</h5>

						<p>The <dfn>default reading order</dfn> is a specific progression through a set of <a>digital
								publication</a> resources. A user might follow alternative pathways through the content,
							but in the absence of such interaction the default reading order defines the expected
							progression from one resource to the next.</p>

						<p>The default reading order is expressed using the <code>readingOrder</code> property.</p>

						<table class="zebra">
							<thead>
								<tr>
									<th>Term</th>
									<th>Description</th>
									<th>Required Value</th>
									<th>Value Category</th>
									<th>[[!schema.org]] Mapping</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>
										<code>readingOrder</code>
									</td>
									<td>Order of progression through the resources of a digital publication.</td>
									<td>
										<p>One or more <a><code>LinkedResource</code></a>.</p>
									</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-linked-resource">Linked
											Resources</a>
									</td>
									<td>(None)</td>
								</tr>
							</tbody>
						</table>

						<p>Each element of the <code>readingOrder</code> property MUST be expressed either as:</p>

						<ul>
							<li>a [[!json]] <a href="https://tools.ietf.org/html/rfc4627#section-2.5">string</a>
								representing the <a>URL</a> of the resource; or</li>
							<li>an instance of a <a><code>LinkedResource</code></a> object.</li>
						</ul>

						<p>A single string value represents an instance of a <code>LinkedResource</code> object whose
								<code>url</code> property is the string's text.</p>

						<p>The order of items is <em>significant</em>.</p>

						<p>The URLs expressed in the reading order MUST NOT include fragment identifiers. Non-HTML
							resources SHOULD be expressed as <code>LinkedResource</code> objects with their
								<code>encodingFormat</code> values set.</p>

						<p>The default reading order MUST include at least one resource.</p>

						<pre class="example" title="Expressing the reading order as a simple list of URLs.">{
    …
    "readingOrder" : [
        "html/title.html",
        "html/copyright.html",
        "html/introduction.html",
        "html/epigraph.html",
        "html/c001.html",
        …
    ],
    …
}</pre>
						<pre class="example" title="Expressing the reading order as LinkedResource objects to provide more information.">{
    …
    "readingOrder" : [
        {
            "type"           : "LinkedResource",
            "url"            : "html/title.html",
            "encodingFormat" : "text/html",
            "name"           : "Title page"
        },
        {
            "type"           : "LinkedResource",
            "url"            : "html/copyright.html",
            "encodingFormat" : "text/html",
            "name"           : "Copyright page"
        },
        …
    ],
    …
}</pre>
					</section>

					<section id="resource-list">
						<h5>Resource List</h5>

						<p>The <dfn>resource list</dfn> enumerates any additional resources used in the processing or
							rendering of a <a>digital publication</a> that are not already listed in the <a>default
								reading order</a>. It is expressed using the <code>resources</code> property.</p>

						<table class="zebra">
							<thead>
								<tr>
									<th>Term</th>
									<th>Description</th>
									<th>Required Value</th>
									<th>Value Category</th>
									<th>[[!schema.org]] Mapping</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>
										<code>resources</code>
									</td>
									<td>List of additional publication resources used in the processing or rendering of
										a publication.</td>
									<td>
										<p>One or more <a><code>LinkedResource</code></a>.</p>
									</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-linked-resource">Linked
											Resources</a>
									</td>
									<td>(None)</td>
								</tr>
							</tbody>
						</table>

						<p>Each element of the <code>resources</code> property MUST be expressed either as:</p>

						<ul>
							<li>a [[!json]] <a href="https://tools.ietf.org/html/rfc4627#section-2.5">string</a>
								representing the <a>URL</a> of the resource; or</li>
							<li>an instance of a <a><code>LinkedResource</code></a> object.</li>
						</ul>

						<p>A single string value represents an instance of a <code>LinkedResource</code> object whose
								<code>url</code> property is the string's text.</p>

						<p>The order of items is <em>not significant</em>.</p>

						<p>The URLs MUST NOT include fragment identifiers. It is RECOMMENDED to use
								<code>LinkedResource</code> objects with their <code>encodingFormat</code> values
							set.</p>

						<p>The completeness of the resource list can affect the usability of a digital publication in
							certain reading scenarios (e.g., the ability to read it offline). For this reason, it is
							strongly RECOMMENDED to provide a comprehensive list of all of the publication's constituent
							resources beyond those listed in the <a>default reading order</a>.</p>

						<p>In some cases, a comprehensive list of these resources might not be easily achieved (e.g.,
							third-party scripts that reference resources from deep within their source), but a user
							agent SHOULD still be able to render a publication even if some of these resources are not
							identified as belonging to the publication (e.g., if it is taken offline without them).</p>

						<pre class="example" title="Expressing the list of resources via a combination of simple URL strings and LinkedResource objects.">{
    …
    "resources"  : [
        "datatypes.html",
        "datatypes.svg",
        "datatypes.png",
        "diff.html",
        {
            "type"           : "LinkedResource",
            "url"            : "test-utf8.csv",
            "encodingFormat" : "text/csv"
        },
        {
            "type"           : "LinkedResource",
            "url"            : "test-utf8-bom.csv",
            "encodingFormat" : "text/csv"
        },
        …
    ],
    …
}</pre>

					</section>

					<section id="links">
						<h5>Links</h5>

						<p>The <dfn>Links</dfn> list is used to provide a list of resources that are <em>not</em>
							required for the processing and rendering of a <a>digital publication</a> (i.e., the content
							of the publication remains unaffected even if these resources are not available). Links are
							expressed using the <code>links</code> property.</p>

						<table class="zebra">
							<thead>
								<tr>
									<th>Term</th>
									<th>Description</th>
									<th>Required Value</th>
									<th>Value Category</th>
									<th>[[!schema.org]] Mapping</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>
										<code>links</code>
									</td>
									<td>List of resources associated with a publication but not required for its
										processing or rendering.</td>
									<td>
										<p>One or more <a><code>LinkedResource</code></a>.</p>
									</td>
									<td>
										<a href="#value-array">Array</a> of <a href="#value-linked-resource">Linked
											Resources</a>
									</td>
									<td>(None)</td>
								</tr>
							</tbody>
						</table>

						<p>Each element of the <code>links</code> property MUST be expressed either as:</p>

						<ul>
							<li>a [[!json]] <a href="https://tools.ietf.org/html/rfc4627#section-2.5">string</a>
								representing the <a>URL</a> of the resource; or</li>
							<li>an instance of a <a><code>LinkedResource</code></a> object.</li>
						</ul>

						<p>A single string value represents an instance of a <code>LinkedResource</code> object whose
								<code>url</code> property is the string's text.</p>

						<p>The order of items is <em>not significant</em>.</p>

						<p>It is RECOMMENDED to use <code>LinkedResource</code> objects with their
								<code>encodingFormat</code> and <code>rel</code> values set.</p>

						<p>Linked resources are typically made available to user agents to augment or enhance the
							processing or rendering, such as:</p>

						<ul>
							<li>a privacy policy or license that the user agent can offer a link to from a shelf;</li>
							<li>a metadata record that the user agent can use to discover and display more information
								about the publication;</li>
							<li>a dictionary of terms the user agent can process to provide enhanced language help;</li>
						</ul>

						<p>Links can also be used to identify resources used in the online rendering of a publication,
							but that are not essential to include when the publication is taken offline or packaged
							(e.g., to minimize the size). These include:</p>

						<ul>
							<li>large font files that enhance the appearance of the publication but are not vital to its
								display (i.e., a fallback font will suffice);</li>
							<li>third-party scripts that are not intended for use when a publication is taken offline or
								packaged (e.g., tracking scripts).</li>
						</ul>

						<p>The <code>links</code> list SHOULD include resources necessary to render a linked resource
							(e.g., scripts, images, style sheets).</p>

						<p>Resources listed in the <code>links</code> list MUST NOT be listed in the <a
								href="#default-reading-order">default reading order</a> or <a href="#resource-list"
								>resource list</a>.</p>

						<p>User agents MAY ignore linked resources, and are not required to take them offline with a
							publication. These resources SHOULD NOT be included when packaging a publication.</p>

					</section>
				</section>

				<section id="extensibility">
					<h4>Extensibility</h4>

					<p>The manifest is designed to provide a basic set of properties for use by user agents in
						presenting and rendering a <a>digital publication</a>, but MAY be extended in the following
						ways:</p>

					<ol>
						<li>by the provision of <a href="#extensibility-linked-records">linked metadata
							records</a>.</li>
						<li>through the inclusion of <a href="#extensibility-manifest-properties">additional properties
								in the manifest</a>;</li>
					</ol>

					<p>Although both methods are valid, the use of linked records is RECOMMENDED.</p>

					<p>This specification does not define how such additional properties are compiled, stored or exposed
						by user agents in their <a>internal representation</a> of the manifest. A user agent MAY ignore
						some or all extended properties.</p>

					<section id="extensibility-linked-records">
						<h4>Linked records</h4>

						<p>Extending the manifest through links to a record, such as an ONIX&#160;[[onix]] or
							BibTeX&#160;[[bibtex]] file, MUST be expressed using a <a><code>LinkedResource</code></a>
							object, where:</p>
						<ul>
							<li>the <a href="#linkedresource-rel"><code>rel</code> property</a> of the
									<code>LinkedResource</code> SHOULD include a relevant identifier defined by IANA or
								by other organizations; if the link record contains descriptive metadata it MUST include
								the <code>describedby</code> (IANA) identifier; </li>
							<li>the value of the <code>encodingFormat</code> in the link MUST use the MIME media
								type&#160;[[!rfc2046]] defined for that particular type of record, if applicable.</li>
						</ul>

						<p>Linked records MUST be included in the <a href="#resource-list">resource list</a> when they
							are part of the publication (i.e., are needed for more than just manifest extensibility).
							Otherwise, they MUST be included in the <a href="#links">links list</a>.</p>

						<pre class="example" title="Linking to an external ONIX for Books metadata record.">{
    …
    "links"  : [
        {
            "type"            : "LinkedResource",
            "url"             : "https://www.publisher.example.org/time-machine/onix.xml",
            "encodingFormat"  : "application/onix+xml",
            "rel"             : "describedby"
        },
        …
    ],
    …
}</pre>
						<p class="ednote">The <code>application/onix+xml</code> MIME type has not yet been registered by
							IANA at the time of writing this document, and is included in the example for illustrative
							purposes only.</p>
					</section>

					<section id="extensibility-manifest-properties">
						<h4>Additional Manifest Properties</h4>

						<p>Additional properties MAY be included directly in the manifest. It is RECOMMENDED that these
							properties be taken from public schemes like [[schema.org]] or [[dcterms]] and use values
							from controlled vocabularies whenever possible. Proprietary terms MAY be used, but it is
							RECOMMENDED that such terms be included using <a
								href="https://www.w3.org/TR/json-ld/#compact-iris">Compact IRIs</a>&#160;[[!json-ld11]],
							with prefixes defined as part of the context.</p>

						<pre class="example" title="Extending the basic data set using a vocabulary prefix declaration.">{
    "@context" : [
        "https://schema.org",
        "https://www.w3.org/ns/pub-context",
        {
            "language" : "en",
            "ex"       : "https://example.org/vocab"
        }
    ],
    …
    "ex:region" : "North America",
    …
}</pre>

						<p class="note">The <a href="https://schema.org/docs/jsonldcontext.json">schema.org context
								file</a> [[schema.org]] defines a number of prefixes for commonly used vocabularies,
							such as the Dublin Core Terms (`dcterms`) [[dcterms]] and Element Set (`dc`) [[dc11]], the
							FOAF vocabulary (`foaf`) [[foaf]], and the Bibliographic Ontology (`bibo`) [[bibo]].
							Properties from these vocabularies can be used without their prefixes having to be
							declared.</p>

						<pre class="example" title="Extending the basic data using the schema.org 'copyrightYear' and 'copyrightHolder' terms.">{
    …
    "copyrightYear"   : "2015",
    "copyrightHolder" : "World Wide Web Consortium",
    …
}</pre>

						<pre class="example" title="Extending the basic data set using the Dublin Core 'subject' term with the 2012 ACM Classification terms.">{
    …
    "dcterms:subject" : ["Web data description languages","Data integration","Data Exchange"],
    …
}</pre>
					</section>
				</section>
			</section>

			<section id="manifest-rel">
				<h3>Resource Relations</h3>

				<section id="informative-rel">
					<h4>Informative Resources</h4>

					<section id="accessibility-report">
						<h5>Accessibility Report</h5>

						<p>An accessibility report provides information about the suitability of a <a>digital
								publication</a> for consumption by users with varying preferred reading modalities.
							These reports typically identify the result of an evaluation against established
							accessibility criteria, such as those provided in [[wcag21]], and are an important source of
							information in determining the usability of a publication.</p>

						<p>An accessibility report is identified using the <code>accessibility-report</code> link
							relation.</p>

						<p class="ednote">The <code>accessibility-report</code> term is not currently registered in the
							IANA link relations but the Working Group expects to add it.</p>

						<p>The manifest SHOULD include a link to an accessibility report when one is available for a
							publication. It is RECOMMENDED that the report be included as a resource of the
							publication.</p>

						<p>It is also RECOMMENDED that the accessibility report be provided in a human-readable format,
							such as HTML [[!html]]. Augmenting these reports with machine-processable metadata, such as
							provided in schema.org&#160;[[!schema.org]], is also RECOMMENDED.</p>

						<pre class="example" title="Setting a link to an accessibility report.">{
    …
    "links" : [
        {
            "type" : "LinkedResource",
            "url"  : "https://www.publisher.example.org/sherlock-holmes-accessibility.html",
            "rel"  : "accessibility-report"
        },
        …
    ],
    …
}</pre>
					</section>

					<section id="preview">
						<h5>Preview</h5>

						<p>Not all <a>digital publications</a> will be available to all users (e.g., they might be
							restricted to registered users of a site). In such cases, the publisher might wish to
							provide a preview of the content in order to entice users to access the full version.</p>

						<p>A <dfn data-lt="preview">preview</dfn> is identified using the <code>preview</code> link
							relation&#160;[[!iana-link-relations]].</p>

						<p>Previews MAY be located externally or included as resources of digital publications.</p>

						<pre class="example" title="Identifying a preview as an audio resource of a digital publication.">{
    …
    "links" : [
        {
            "type"           : "LinkedResource",
            "url"            : "preview.mp3",
            "encodingFormat" : "audio/mpeg",
            "rel"            : "preview"
        },
        …
    ],
    …
}</pre>

						<pre class="example" title="Identifying a preview via an external link.">{
    …
    "links" : [
        {
            "type"           : "LinkedResource",
            "url"            : "https://publisher.example.org/jekyll-hyde-preview.html",
            "encodingFormat" : "text/html",
            "rel"            : "preview"
        },
    	…
    ],
    …
}</pre>
					</section>

					<section id="privacy-policy">
						<h5>Privacy Policy</h5>

						<p>Users often have the legal right to know and control what information is collected about
							them, how such information is stored and for how long, whether it is personally
							identifiable, and how it can be expunged. Including a statement that addresses such privacy
							concerns is consequently an important part of publishing <a>digital publications</a>. Even
							if no information is collected, such a declaration increases the trust users have in the
							content.</p>

						<p>A link to a privacy policy can be included in the manifest for this purposes. It is
							RECOMMENDED that the privacy policy be included as a resource of the publication.</p>

						<p>A <dfn data-lt="privacyPolicy">privacy policy</dfn> is identified using the
								<code>privacy-policy</code> link relation&#160;[[!iana-link-relations]].</p>

						<pre class="example" title="Identifying a privacy policy via an external link.">{
    …
    "links"  : [
        {
            "type"           : "LinkedResource",
            "url"            : "https://www.w3.org/Consortium/Legal/privacy-statement-20140324",
            "encodingFormat" : "text/html",
            "rel"            : "privacy-policy"
        },
        …
    ],
    …
}</pre>
					</section>
				</section>

				<section id="structural-rel">
					<h4>Structural Resources</h4>

					<section id="cover">
						<h5>Cover</h5>

						<p>The <dfn>cover</dfn> is a resource that user agents can use to present a <a>digital
								publication</a> (e.g., in a library or bookshelf, or when initially loading the
							publication).</p>

						<p>The cover is identified by the <code>cover</code> link relation. The <a href="#value-url"
								>URL</a> expressed in the <code>url</code> term MUST NOT include a fragment
							identifier.</p>

						<p class="ednote">The <code>cover</code> term is not currently registered in the IANA link
							relations but the Working Group expects to add it.</p>

						<p>If the cover is in an image format, a <code>title</code> and <code>description</code> SHOULD
							be provided. User agents can use these properties to provide alternative text and
							descriptions when necessary for accessibility.</p>

						<p>More than one cover MAY be referenced from the manifest (e.g., to provide alternative formats
							and sizes for different device screens). If multiple covers are specified, each instance
							MUST define at least one unique property to allow user agents to determine its usability
							(e.g., a different format, height, width or relation).</p>

						<pre class="example" title="Identifying an HTML cover page.">{
    …
    "resources" : [
        {
            "type"           : "LinkedResource",
            "url"            : "cover.html",
            "encodingFormat" : "text/html",
            "rel"            : "cover"
        },
        …
    ],
    …
}</pre>

						<pre class="example" title="Identifying a cover image. Alternative text and a description are provided in the name and description properties, respectively.">{
    …
    "resources" : [
        {
            "type"           : "LinkedResource",
            "url"            : "whale-image.jpg",
            "encodingFormat" : "image/jpeg",
            "rel"            : "cover",
            "name"           : "Moby Dick attacking hunters",
            "description"    : "A white whale is seen surfacing from the water to attack a small whaling boat"
        },
        …
    ],
    …
}</pre>

						<pre class="example" title="Providing a cover image in JPEG and SVG formats.">{
    …
    "resources" : [
        {
            "type"           : "LinkedResource",
            "url"            : "lilliput.jpg",
            "encodingFormat" : "image/jpeg",
            "rel"            : "cover"
        },
        {
            "type"           : "LinkedResource",
            "url"            : "lilliput.svg",
            "encodingFormat" : "image/svg+xml",
            "rel"            : "cover"
        },
        …
    ],
    …
}</pre>
					</section>

					<section id="page-list">
						<h5>Page List</h5>

						<p>The page list is a navigational aid that contains a list of static page demarcation points
							within a <a>digital publication</a>.</p>

						<p>The page list is identified by the <code>pagelist</code> link relation. The <a
								href="#value-url">URL</a> expressed in the <code>url</code> term of the resource that
							identifies the page list MUST NOT include a fragment identifier.</p>

						<p class="ednote">The <code>pagelist</code> term is not currently registered in the IANA link
							relations but the Working Group expects to add it.</p>

						<p>The link to the page list MUST NOT be specified in the <a href="#links">links list</a>.</p>

						<pre class="example" title="Identifying the resource that contains the page list.">{
    …
    "resources" : [
        {
            "type" : "LinkedResource",
            "url"  : "toc_file.html",
            "rel"  : "pagelist"
        },
        …
    ],
    …
}</pre>
					</section>

					<section id="pub-table-of-contents">
						<h5>Table of Contents</h5>

						<p>The table of contents is a navigational aid that provides links to the majort structural
							sections of a <a>digital publication</a>.</p>

						<p>The <dfn data-lt="toc">table of contents</dfn> is identified by the <code>contents</code>
							link relation&#160;[[!iana-link-relations]]. The <a href="#value-url">URL</a> expressed in
							the <code>url</code> term of the resource that identifies the table of contents MUST NOT
							include a fragment identifier.</p>

						<p>The link to the table of contents MUST NOT be specified in the <a
								href="#default-reading-order">links list</a>.</p>

						<p>The RECOMMENDED structure and processing model for the table of contents is defined in <a
								href="#app-toc-structure"></a>.</p>

						<pre class="example" title="Identifying the resource that contains the table of contents.">{
    …
    "resources" : [
        {
            "type" : "LinkedResource",
            "url"  : "toc_file.html",
            "rel"  : "contents"
        },
        …
    ],
    …
}</pre>
					</section>
				</section>

				<section id="rel-extensions">
					<h4>Extensions</h4>

					<p>If additional relations beyond those defined in this specification need to be expressed, the <a
							href="#linkedresource-rel"><code>rel</code> property</a> can be extended in one of the
						following ways:</p>

					<ul>
						<li>through the use of relations defined in [[!iana-relations]]; or</li>
						<li>through the use of <a href="https://tools.ietf.org/html/rfc8288#section-2.1.2">extension
								relation types</a>&#160;[[!rfc8288]].</li>
					</ul>

					<p>Use of relations from [[!iana-relations]] is RECOMMENDED.</p>
				</section>
			</section>
		</section>
		<section id="manifest-discovery">
			<h2>Manifest Discovery</h2>

			<section id="manifest-link">
				<h3>Linking</h3>

				<p>Links to the manifest MUST take one or both of the following forms:</p>

				<ul>
					<li>
						<p>An HTTP <code>Link</code> header field&#160;[[!rfc5988]] with its <code>rel</code> parameter
							set to the value "<code>publication</code>".</p>
						<pre class="example">Link: &lt;https://example.com/webpub/manifest>; rel=publication</pre>
					</li>
					<li>
						<p>A <code>link</code> element&#160;[[!html]] with its <code>rel</code> attribute set to the
							value "<code>publication</code>".</p>
						<pre class="example">&lt;link href="https://example.com/webpub/manifest" rel="publication"/></pre>
					</li>
				</ul>

				<p>When a manifest is <a href="#manifest-embed">embedded within an HTML document</a>, the link MUST
					include a fragment identifier that references the <code>script</code> element that contains the
					manifest (see <a href="#manifest-embed"></a>).</p>

				<pre class="example" title="Linking to a manifest within the same HTML resource.">
    &lt;link href="#example_manifest" rel="publication"&gt;
    …
    &lt;script id="example_manifest" type="application/ld+json"&gt;
    {
        "@context" : ["https://schema.org", "https://www.w3.org/ns/pub-context"],
        …
    }
    &lt;/script&gt;
</pre>

			</section>

			<section id="manifest-embed">
				<h3>Embedding</h3>

				<p>When a <a>digital publication</a> format allows manifests to be embedded within an HTML document, the
					manifest MUST be included in a <a
						href="https://www.w3.org/TR/html5/semantics-scripting.html#the-script-element"
							><code>script</code> element</a>&#160;[[!html]] whose <a
						href="https://www.w3.org/TR/json-ld11/#embedding-json-ld-in-html-documents"><code>type</code>
						attribute is set to <code>application/ld+json</code></a>&#160;[[!json-ld11]].</p>

				<pre class="example" title="Script tag for a publication manifest embedded in an HTML document.">
&lt;script type="application/ld+json"&gt;
    {
        "@context" : ["https://schema.org", "https://www.w3.org/ns/pub-context"],
        …
    }
&lt;/script&gt;
</pre>
			</section>

			<section id="manifest-other-discovery">
				<h3>Other Discovery Methods</h3>

				<p><a>Digital publication</a> formats MAY define alternative methods of discovering a manifest that do
					no involve linking to, or embedding, a manifest (e.g., that manifest could be discovered through the
					use of a restricted name and/or location). This specification does not add any restrictions on such
					methods.</p>
			</section>
		</section>
		<section id="manifest-processing">
			<h2>Processing a Manifest</h2>

			<p><em>This section depends on the Infra Standard [[!infra]].</em></p>

			<section id="processing-intro" class="informative">
				<h3>Introduction</h3>

				<p>Although a <a>digital publication</a>'s manifest is authored as [[json-ld11]], the steps for
					processing a manifest decribed in this section detail how a user agent processes the manifest into
					its <a>internal representation</a> of the data. The algorithm describes the process using the
					terminology and data types defined in [[infra]], and, if successful results in an [[infra]] <a
						href="https://infra.spec.whatwg.org/#ordered-map">map</a> of the data being returned.</p>

				<p class="note">An actual implementation of this algorithm will use the corresponding constructs and
					data types of whatever language is used.</p>
			</section>

			<section id="processing-errors">
				<h3>Error Handling</h3>

				<p>The following error types are used in the <a>processing algorithm</a>:</p>

				<ul>
					<li><dfn data-lt="validation errors">validation error</dfn> &#8212; a non-terminating error that
						occurs when the <a href="https://infra.spec.whatwg.org/#map-value">value</a> of a <a
							href="https://infra.spec.whatwg.org/#map-key">key</a> does match its expected input.</li>
					<li><dfn data-lt="fatal errors">fatal error</dfn> &#8212; a terminating error that results, for
						example, when a manifest cannot be processed or does not match critical validity
						constraints.</li>
				</ul>

				<p>User agents SHOULD expose both validation and fatal errors, but this specification does not prescribe
					the manner in which this is done.</p>
			</section>

			<section id="processing-algorithm">
				<h3>Generating the Internal Reperentation</h3>

				<p>This algorithm takes the following arguments:</p>

				<ul>
					<li><var>text</var>: a UTF-8 string representing the manifest;</li>
					<li><var>base</var>: a URL string that represents the <a>base URL</a> for the manifest.</li>
					<li><var>document</var>: the <a data-cite="html#the-document-object">HTML Document (DOM)
						Node</a>&#160;[[!html]] of the document that <a href="#manifest-discovery">references the
							manifest</a>, when available.</li>
				</ul>

				<p class="note">This algorithm does not define how the manifest is discovered and obtained. The steps by
					which to do so are defined by each <a>digital publication</a> format.</p>

				<p>Some steps in this algorithm depend on the expected value category of a term, so the context in which
					a term is used can affect processing (e.g., a <a href="#address"><code>url</code></a> expects an <a
						href="#value-array">Array</a> (of URLs) only when the direct property of the Publication
					Manifest). To differentiate these uses a <dfn>context</dfn> is provided to certain function calls.
					This context is set to the term that initiates the processing call, allowing the different contexts
					to be determined.</p>

				<p>To <dfn data-lt="processing algorithm|processing the manifest|processing a manifest">process a
						manifest</dfn>, run the following steps:</p>

				<ol>
					<li id="processing-create-processed">
						<p>Let <var>processed</var> be an empty <a href="https://infra.spec.whatwg.org/#ordered-map"
								>map</a> that will contain the <a href="#dfn-internal-representation">internal
								representation</a> of the manifest.</p>
					</li>

					<li id="processing-json-infra">
						<p>Let <var>manifest</var> be the result of parsing <a
								href="https://infra.spec.whatwg.org/#parse-json-into-infra-values">JSON into Infra
								values</a> given <var>text</var>. If <var>manifest</var> is not a <a
								href="https://infra.spec.whatwg.org/#ordered-map">map</a>, <a>fatal error</a>, return
							failure.</p>
						<details>
							<summary>Explanation</summary>
							<p>Publication manifests have to be expressed as JSON objects, not arrays. After converting
								the manifest to [[infra]] types, an additional check is made that the resulting
								structure is a <a href="https://infra.spec.whatwg.org/#ordered-map">map</a>.</p>
						</details>
					</li>

					<li id="processing-context">
						<p>(<a href="#manifest-context"></a>) If <var>manifest["context"]</var> is not set to a <a
								href="https://infra.spec.whatwg.org/#list">list</a>, or the first and second <a
								href="https://infra.spec.whatwg.org/#list-item">items</a> in
								<var>manifest["@context"]</var> are not the <a
								href="https://infra.spec.whatwg.org/#string">string</a> values
								"<code>https://schema.org</code>" and "<code>https://www.w3.org/ns/pub-context</code>",
							in this order, <a>fatal error</a>, return failure.</p>
						<details>
							<summary>Explanation</summary>
							<p>If the context URLs are not set as expected, the JSON data does not represent a
								publication manifest.</p>
						</details>
					</li>

					<li id="processing-conformance">
						<p>(<a href="#profile-conformance"></a>) Let <var>processed["profile"]</var> be the
								<a>profile</a> the manifest conforms to. Set <var>processed["profile"]</var> as
							follows:</p>
						<ol>
							<li>
								<p>If <var>manifest["conformsTo"]</var> is not set, or does not include a profile the
									user agent recognizes as capable of processing and/or rendering, the user agent
									SHOULD inspect the media type(s) of the resources in the reading order to determine
									if the publication matches a profile it is capable of processing or rendering. If
									so, <a>validation error</a>, set <var>processed["profile"]</var> to the matching
									profile. Otherwise, <a>fatal error</a>, return failure.</p>
							</li>
							<li>
								<p>Otherwise, set <var>processed["profile"]</var> to the first URL in
										<var>manifest["conformsTo"]</var> the user agent is capable of processing and/or
									rendering.</p>
							</li>
						</ol>
						<p class="note">The value of <var>manifest["conformsTo"]</var> could be a <a
								href="https://infra.spec.whatwg.org/#string">string</a> or a <a
								href="https://infra.spec.whatwg.org/#list">list</a> at this step in the process.</p>
						<details>
							<summary>Explanation</summary>
							<p>The profile the publication conforms to determines any additional extension steps that
								have to be performed during processing. These steps are defined by their respective
								specifications.</p>
							<p>The new term <var>profile</var> is created because <var>conformsTo</var> is not
								restricted to profile identifiers (i.e., the new term provides a persistent identifier
								of the profile within the internal representation).</p>
						</details>
					</li>

					<li id="processing-lang-dir">
						<p>(<a href="#manifest-lang-dir-global"></a>) Let <var>lang</var> be the global language and
								<var>dir</var> be the global direction obtained from this step. Set each initially to an
							empty <a href="https://infra.spec.whatwg.org/#string">string</a>.</p>
						<p><a href="https://infra.spec.whatwg.org/#list-iterate">For each</a>
							<var>context</var> of <var>manifest["@context"]</var>, moving from the last <a
								href="https://infra.spec.whatwg.org/#list-item">item</a> to the first:</p>
						<ol>
							<li>if <var>lang</var> is an empty <a href="https://infra.spec.whatwg.org/#string"
									>string</a> and <var>context</var> is a <a
									href="https://infra.spec.whatwg.org/#ordered-map">map</a> that contains a
									<var>language</var>
								<a href="https://infra.spec.whatwg.org/#map-key">key</a>, set <var>lang</var> to
									<var>context["language"]</var>;</li>
							<li>if <var>dir</var> is an empty <a href="https://infra.spec.whatwg.org/#string">string</a>
								and <var>context</var> is a <a href="https://infra.spec.whatwg.org/#ordered-map">map</a>
								that contains a <var>direction</var>
								<a href="https://infra.spec.whatwg.org/#map-key">key</a>, set <var>dir</var> to
									<var>context["direction"]</var>;</li>
							<li>if both <var>lang</var> and <var>dir</var> are not empty <a
									href="https://infra.spec.whatwg.org/#string">strings</a>, then <a
									href="https://infra.spec.whatwg.org/#iteration-break">break</a>.</li>
						</ol>
						<p>If the value of <var>lang</var> is neither an empty <a
								href="https://infra.spec.whatwg.org/#string">string</a> nor a <a
								href="https://tools.ietf.org/html/bcp47#section-2.2.9">well-formed</a>&#160;[[!bcp47]]
							language tag, <a>validation error</a>, set <var>lang</var> to an empty string.</p>
						<p>If the value of <var>dir</var> is neither an empty <a
								href="https://infra.spec.whatwg.org/#string">string</a> nor one of the values
								"<code>ltr</code>" or "<code>rtl</code>", <a>validation error</a>, set <var>dir</var> to
							an empty string.</p>
						<details>
							<summary>Explanation</summary>
							<p>The global language and direction declarations obtained here are used to set the language
								and base direction, respectively, for localizable strings without a declaration.</p>
							<p>The iterator moves backwards through <var>@context</var> as the last language and
								direction declarations override any earlier ones.</p>
						</details>
					</li>

					<li id="processing-normalize">
						<p><a href="https://infra.spec.whatwg.org/#map-iterate">For each</a>
							<var>term</var> → <var>value</var> of <var>manifest</var>, set <var>processed[term]</var> to
							the result, when successful, of calling <a>normalize data</a> given <var>term</var>,
								<var>value</var>, <var>lang</var>, <var>dir</var> and <var>base</var>, and using
								<var>term</var> as the context. If failure is returned, do not add <var>term</var> to
								<var>processed</var>.</p>
						<details>
							<summary>Explanation</summary>
							<p>The data normalization steps standardize the incoming manifest data to remove any
								authoring conveniences, such as the ability to use strings where objects or arrays are
								expected. The resulting processed data are added to the <var>processed</var> variable
								and are operated on in subsequent steps.</p>
						</details>
					</li>

					<li id="processing-checks">
						<p>Set <var>processed</var> to the result of running <a>data validation</a> given
								<var>processed</var>.</p>
						<details>
							<summary>Explanation</summary>
							<p>The data validation checks ensure that the incoming data matches its expected value
								categories. Any restrictions on the expected values are also enforced at this step, and
								any invalid data is removed from the final representation.</p>
						</details>
					</li>

					<li id="processing-defaults">
						<p>Set <var>processed</var> to the result of running <a>add HTML defaults</a>, when successful,
							given <var>processed</var> and <var>document</var>. Otherwise, terminate processing, return
							failure.</p>
						<details>
							<summary>Explanation</summary>
							<p>The final step is to check if any information missing from the manifest can be obtained
								from the HTML document that links to the manifest (e.g., the title and reading
								order).</p>
						</details>
					</li>

					<li id="processing-end">
						<p>Return <var>processed</var>.</p>
					</li>
				</ol>

				<p class="note">For a visualization of the resulting structure, see <a href="#internal-rep-data-model"
					></a>.</p>

				<section id="normalize-data">
					<h4>Normalize Data</h4>

					<p>To <dfn>normalize data</dfn> for a property <var>term</var>'s <var>value</var>, with the <a
							href="#manifest-lang-dir-global">global language</a>
						<var>lang</var>, <a href="#manifest-lang-dir-global">global direction</a>
						<var>dir</var>, <a>base URL</a>
						<var>base</var>, and <a>context</a>
						<var>context</var> run these steps:</p>

					<ol>
						<li id="normalize-init">
							<p>Let <var>normalized</var> be the value of <var>value</var>.</p>
							<details>
								<summary>Explanation</summary>
								<p>The data normalization steps are performed on the copy of the incoming value held in
									the <var>normalized</var> variable defined in this step. This variable is returned
									at the end of a successful normalization process.</p>
							</details>
						</li>

						<li id="normalize-context">
							<p>(<a href="#manifest-context"></a>) If <var>term</var> is <var>@context</var>, return
								failure.</p>
							<details>
								<summary>Explanation</summary>
								<p><var>@context</var> provides information for the initial processing of the manifest,
									but is not retained in the internal data representation. Returning a failure signals
									to remove the term.</p>
							</details>
						</li>

						<li id="normalize-arrays">
							<p>(<a href="#value-array"></a>) If, depending on <var>context</var>, <var>term</var>
								expects an <a href="#value-array">array</a> and <var>value</var> is a <a
									href="https://infra.spec.whatwg.org/#string">string</a>, <a
									href="https://infra.spec.whatwg.org/#boolean">boolean</a>, number, null, or <a
									href="https://infra.spec.whatwg.org/#ordered-map">map</a>, set <var>normalized</var>
								to «&#160;<var>value</var>&#160;».</p>
							<details>
								<summary>Explanation</summary>
								<p>A number of terms require their values to be arrays, but, for the sake of
									convenience, authors are allowed to use a single value instead of a one element
									array. For example,</p>
								<pre class="example">{
    …
    "name"   : "Et dukkehjem",
    "author" : "Henrik Ibsen",
    …
}</pre>
								<p>yields:</p>
								<pre class="example">«[
    …
    "name"   → « "Et dukkehjem" »,
    "author" → « "Henrik Ibsen" »,
    …
]»</pre>
							</details>
						</li>

						<li id="normalize-entities">
							<p>(<a href="#value-entity"></a>) If <var>term</var> expects an <a href="#value-array"
									>array</a> of <a href="#value-entity">entities</a>, <a
									href="https://infra.spec.whatwg.org/#list-iterate">for each</a>
								<var>entity</var> of <var>normalized</var>:</p>
							<ol>
								<li>
									<p>if <var>entity</var> is a <a href="https://infra.spec.whatwg.org/#string"
											>string</a>, set <var>entity</var> to the <a
											href="https://infra.spec.whatwg.org/#ordered-map">map</a>:</p>
									<pre>«[
    "type" → « "Person" »,
    "name" → <var>value</var>
]»</pre>
								</li>
								<li>
									<p>otherwise, if <var>entity</var> is <a href="https://infra.spec.whatwg.org/#list"
											>list</a>, number, <a href="https://infra.spec.whatwg.org/#boolean"
											>boolean</a> or <a href="https://infra.spec.whatwg.org/#nulls">null</a>,
											<a>validation error</a>, <a
											href="https://infra.spec.whatwg.org/#list-remove">remove</a>
										<var>entity</var> from <var>normalized</var>.</p>
								</li>
							</ol>
							<details>
								<summary>Explanation</summary>
								<p>Creators (authors, editors, etc.), are expected to be explicitly defined as an
									object, but, for the sake of convenience, only their name has to be specified in the
									manifest. For example:</p>
								<pre class="example">{
    …
    "author": "Ralph Ellison",
    …
}</pre>
								<p>This rule converts such string values to maps with a default type of
										<code>Person</code>, yielding the following for the preceding example:</p>
								<pre class="example">«[
    …
    "author" → « 
        «[
            "type" → « "Person" »
            "name" → "Ralph Ellison"
        ]»
    »,
    …
]»</pre>
								<p class="note">For simplicity, the conversion of <var>name</var> to a localizable
									string is described by a later step.</p>
							</details>
						</li>

						<li id="normalize-localizable-strings">
							<p>(<a href="#value-localizable-string"></a>) If <var>term</var> expects an <a
									href="#value-array">array</a> of <a href="#value-localizable-string">localizable
									strings</a>, <a href="https://infra.spec.whatwg.org/#list-iterate">for each</a>
								<var>item</var> of <var>normalized</var>:</p>
							<ol>
								<li id="ls-value-normalize">
									<p>if <var>itemString</var> is a <a href="https://infra.spec.whatwg.org/#string"
											>string</a>, set <var>item</var> to the <a
											href="https://infra.spec.whatwg.org/#ordered-map">map</a>:</p>
									<pre>«[
    "value" → <var>value</var>,
    "language" → <var>lang</var>,
    "direction" → <var>dir</var>
]»</pre>
									<p>if <var>lang</var> or <var>dir</var> is not set, or is an empty <a
											href="https://infra.spec.whatwg.org/#string">strings</a>, <a
											href="https://infra.spec.whatwg.org/#map-remove">remove</a>
										<var>item["language"]</var> or <var>item["direction"]</var>, respectively.</p>
								</li>
								<li id="ls-error">
									<p>otherwise, if <var>item</var> is a <a href="https://infra.spec.whatwg.org/#list"
											>list</a>, number, <a href="https://infra.spec.whatwg.org/#boolean"
											>boolean</a> or <a href="https://infra.spec.whatwg.org/#nulls">null</a>,
											<a>validation error</a>, remove <var>item</var> from
										<var>normalized</var>.</p>
								</li>
								<li id="ls-map-normalize">
									<p>otherwise, if <var>item</var> is a <a
											href="https://infra.spec.whatwg.org/#ordered-map">map</a>:</p>
									<ol>
										<li>
											<p>if <var>item["language"]</var> is not set, set it to the value of
													<var>lang</var> when <var>lang</var> is set and is not an empty <a
													href="https://infra.spec.whatwg.org/#string">string</a>.</p>
											<p>otherwise, if <var>item["language"]</var> is <a
													href="https://infra.spec.whatwg.org/#nulls">null</a>, <a
													href="https://infra.spec.whatwg.org/#map-remove">remove</a>
												<var>item["language"]</var>.</p>
										</li>
										<li>
											<p>if <var>item["direction"]</var> is not set, set it to the value of
													<var>dir</var> when <var>dir</var> is set and is not an empty <a
													href="https://infra.spec.whatwg.org/#string">string</a>.</p>
											<p>otherwise, if <var>item["direction"]</var> is <a
													href="https://infra.spec.whatwg.org/#nulls">null</a>, <a
													href="https://infra.spec.whatwg.org/#map-remove">remove</a>
												<var>item["direction"]</var>.</p>
										</li>
									</ol>
								</li>
							</ol>
							<details>
								<summary>Explanation</summary>
								<p>Natural language text values are expected to be explicitly designed as localizable
									string objects, but, for the sake of convenience, can be simple strings in the
									manifest. For example, if no language information has been provided via the <a
										href="#manifest-lang-dir-global">global language declaration</a> then:</p>
								<pre class="example">{
    "@context" : ["https://schema.org", "https://www.w3.org/ns/pub-context"],
    "name"     : ["La Comédie humaine"],
    …
}</pre>
								<p>yields:</p>
								<pre class="example">«[
    "@context" → « "https://schema.org", "https://www.w3.org/ns/pub-context" »,
    "name"     → «
        «[
            "value" → "La Comédie humaine"
        ]»
    »,
    …
]»</pre>
								<p>If, however, an explicit language has been provided in the manifest, that language is
									added to the localizable string object. For example,</p>
								<pre class="example">{
    "@context" : [
        "https://schema.org",
        "https://www.w3.org/ns/pub-context",
        {"language": "fr"}
    ],
    "name"     : ["La Comédie humaine"],
    …
}</pre>
								<p>yields:</p>
								<pre class="example">{
    "@context" → « 
        "https://schema.org",
        "https://www.w3.org/ns/pub-context",
        «["language" → "fr"]»
    »,
    "name"     → «
        «[
            "value"    → "La Comédie humaine"
            "language" → "fr"
        ]»
    »,
    …
}</pre>
								<p>A local setting or a local <code>null</code> value prevents the global value from
									taking effect.</p>
								<pre class="example">{
    "@context" : [
        "https://schema.org",
        "https://www.w3.org/ns/pub-context", 
        {"language":"fr"}
    ],
    …
    "name" : [{
        "value" : "La Comédie humaine"
    }],
    "publisher" : [{
        "type":["Organization"],
        "name":[{
            "value": "Hachette",
            "language": null
        }]
    }],
    …
}</pre>
								<p>yields:</p>
								<pre class="example">{
    "@context" → « 
        "https://schema.org",
        "https://www.w3.org/ns/pub-context",
        «["language" → "fr"]»
    »,
    …
    "name"     → «
        «[
            "value"    → "La Comédie humaine"
            "language" → "fr"
        ]»
    »,
    "publisher"    → «
        «[
            "type" → « "Organization" »,
            "name" → «
                «[
                    "value" → "Hachette",
                ]»
        ]»
    »,
    …
}</pre>
							</details>
						</li>

						<li id="normalize-linked-resources">
							<p>(<a href="#value-linked-resource"></a>) If <var>term</var> expects an <a
									href="#value-array">array</a> of <a href="#value-linked-resource"
									>LinkedResources</a>, <a href="https://infra.spec.whatwg.org/#list-iterate">for
									each</a>
								<var>resource</var> of <var>normalized</var>:</p>
							<ol>
								<li>
									<p>if <var>resource</var> is a string, convert <var>resource</var> to the <a
											href="https://infra.spec.whatwg.org/#ordered-map">map</a>:</p>
									<pre>«[
    "type" → « "LinkedResource" »,
    "url" → <var>resource</var>
]»</pre>
								</li>
								<li>
									<p>otherwise, if <var>resource</var> is a <a
											href="https://infra.spec.whatwg.org/#list">list</a>, number, <a
											href="https://infra.spec.whatwg.org/#boolean">boolean</a> or <a
											href="https://infra.spec.whatwg.org/#nulls">null</a>, <a>validation
											error</a>, remove <var>resource</var> from <var>normalized</var>.</p>
								</li>
							</ol>
							<details>
								<summary>Explanation</summary>
								<p>Resource links are expected to be explicitly designed as an object of type
										<code>LinkedResource</code>, but, for the sake of convenience, only their
									absolute or relative URL has to be specified in the manifest. For example,</p>
								<pre class="example">{
    …
    "resources" : [
        "css/book.css",
        …
    ],
    …
}</pre>
								<p>This step converts the string values to objects, yielding the following for the
									preceding example:</p>
								<pre class="example">«[
    …
    "resources" → «
        «[
            "type" → « "LinkedResource" »,
            "url"  → "css/book.css"
        ]»,
        …
    »,
    …
]»</pre>
								<p class="note">For simplicity, the conversion of relative paths to absolute is
									described by a later step.</p>
							</details>
						</li>

						<li id="normalize-urls">
							<p>(<a href="#value-url"></a>) If <var>term</var> expects a <a href="#value-url">URL</a> or
									<a href="#value-array">array</a> of URLs, set <var>normalized</var> to the result of
								running <a>convert to absolute URL</a>, when successful, given <var>normalized</var>.
								Otherwise, return failure.</p>
							<details>
								<summary>Explanation</summary>
								<p>Relative URLs in the manifest are resolved against the base value to obtain absolute
									URLs. For example:</p>
								<pre>"url": "chapter01.html"</pre>
								<p>for a publication hosted at
										<code>https://example.org/publications/wuthering-heights</code> would yield:</p>
								<pre>"url" → "https://example.org/publications/wuthering-heights/chater01.html"</pre>
							</details>
						</li>

						<li id="normalize-extension">
							<p>(<a href="#extensions"></a>, extension point) if a <a>profile</a> defines processing
								steps for profile-specific terms, those steps are executed at this point.</p>
						</li>

						<li id="normalize-recurse">
							<p>Recursively check <var>normalized</var> as follows to ensure that all properties get
								normalized:</p>
							<ol>
								<li>
									<p>if <var>normalized</var> is a <a href="https://infra.spec.whatwg.org/#list"
											>list</a>, <a href="https://infra.spec.whatwg.org/#list-iterate">for
											each</a>
										<var>item</var> of <var>normalized</var> that is a <a
											href="https://infra.spec.whatwg.org/#ordered-map">map</a>, <a
											href="https://infra.spec.whatwg.org/#map-iterate">for each</a>
										<var>key</var> → <var>keyValue</var> of <var>item</var>, set <var>key</var> to
										the result of running <a href="#processing-normalize">normalize data</a> given
											<var>key</var>, <var>keyValue</var>, <var>lang</var>, <var>dir</var>,
											<var>base</var> and using <var>key</var> as the context. If failure is
										returned, remove <var>key</var> from <var>item</var>.</p>
								</li>
								<li>
									<p>if <var>normalized</var> is a <a
											href="https://infra.spec.whatwg.org/#ordered-map">map</a>, <a
											href="https://infra.spec.whatwg.org/#map-iterate">for each</a>
										<var>key</var> → <var>keyValue</var> of <var>normalized</var>, set
											<var>key</var> to the result of running <a href="#processing-normalize"
											>normalize data</a> given <var>key</var>, <var>keyValue</var>,
											<var>lang</var>, <var>dir</var>, <var>base</var> and using <var>key</var> as
										the context. If failure is returned, remove <var>key</var> from
											<var>normalized</var>.</p>
								</li>
							</ol>
							<details>
								<summary>Explanation</summary>
								<p>In order to ensure that all the properties in the manifest get processed, this step
									recursively checks <var>normalized</var> for additional map entries to process. If
										<var>normalized</var> is a list, each item is inspected to determine if it is a
									map that can be processed.</p>
								<p>If a failure is returned, the item is removed from the map.</p>
							</details>
						</li>

						<li id="normalize-end">
							<p>return <var>normalized</var>.</p>
						</li>
					</ol>

					<section id="convert-absolute-url">
						<h4>Convert to Absolute URL</h4>

						<p>To <dfn>convert to absolute URL</dfn>
							<var>value</var>, with a base URL <var>base</var>, run the following steps:</p>

						<ol>
							<li id="abs-url-convert">
								<p>if <var>value</var> is a <a href="https://infra.spec.whatwg.org/#string">string</a>,
									set <var>value</var> to the result of running the <a
										href="https://url.spec.whatwg.org/#concept-url-parser">URL parser</a> with
										<var>value</var> as input and <var>base</var> as the base URL.</p>
							</li>
							<li id="abs-url-recurse">
								<p>otherwise, if <var>value</var> is a <a href="https://infra.spec.whatwg.org/#list"
										>list</a>, <a href="https://infra.spec.whatwg.org/#list-iterate">for each</a>
									<var>item</var> of <var>value</var>, set <var>item</var> to the result of runing
										<a>convert to absolute URL</a>, when successful, given <var>item</var> and
										<var>base</var>. Otherwise, <a href="https://infra.spec.whatwg.org/#list-remove"
										>remove</a>
									<var>item</var> from <var>value</var>.</p>
							</li>
							<li id="abs-url-error">
								<p>otherwise, <a>validation error</a>, return failure.</p>
							</li>
							<li id="abs-url-return">
								<p>Return <var>value</var>.</p>
							</li>
						</ol>
						<details>
							<summary>Explanation</summary>
							<p>This function checks if the value sent into it is a relative URL, and, if so, converts it
								to an absolute URL. If the value is a <a href="https://infra.spec.whatwg.org/#list"
									>list</a>, each item in the list is recursively passed to this function to inspect
								it.</p>
							<p>If the value passed to the function is not a string or a list, a failure is returned.
								Otherwise, the updated value is returned.</p>
						</details>
					</section>
				</section>

				<section id="validate-data">
					<h3>Data Validation</h3>

					<p>To perform <dfn>data validation</dfn> on <a href="https://infra.spec.whatwg.org/#ordered-map"
							>map</a>
						<var>data</var>, run the following steps:</p>

					<ol>
						<li id="validate-general">
							<p><a href="https://infra.spec.whatwg.org/#map-iterate">For each</a>
								<var>term</var> → <var>value</var> of <var>data</var>, set <var>term</var> to the result
								of running the <a>global data checks</a>, when successful, given <var>term</var> and
									<var>value</var>, and using <var>term</var> as the context. If failure is returned,
								remove <var>data[term]</var>.</p>
							<details>
								<summary>Explanation</summary>
								<p>This step passes each entry to a set of global validation checks that need to be run
									on the value and recursively on any properties within the value.</p>
								<p>A failure is returned if the property is invalid and has to be removed.</p>
							</details>
						</li>

						<li id="validate-type">
							<p>(<a href="#publication-types"></a>) If <var>data["type"]</var> is not set or is an empty
									<a href="https://infra.spec.whatwg.org/#list">list</a>, <a>validation error</a>, set
								to <code>«&#160;"CreativeWork"&#160;»</code>.</p>
						</li>

						<!-- handled by category check
						<li id="validate-abridged">
							<p>(<a href="#abridged"></a>) If <var>data["abridged"]</var> is set and is not a <a
									href="https://infra.spec.whatwg.org/#boolean">boolean</a>, <a>validation error</a>,
									<a href="https://infra.spec.whatwg.org/#map-remove">remove</a>
								<var>data["abridged"]</var>.</p>
						</li>-->

						<li id="validate-ams">
							<p>(<a href="#accessibility"></a>) If <var>data["accessModeSufficient"]</var> is set, <a
									href="https://infra.spec.whatwg.org/#list-iterate">for each</a>
								<var>ams</var> of <var>data["accessModeSufficient"]</var>, if <var>ams["type"]</var> is
								not set or is not "<code>ItemList</code>", <a
									href="https://infra.spec.whatwg.org/#list-remove">remove</a>
								<var>ams</var> from <var>data["accessModeSufficient"]</var>.</p>
						</li>

						<li id="validate-duration">
							<p>(<a href="#duration"></a>) If <var>data["duration"]</var> is set and is not a valid
								duration value, per&#160;[[!iso8601]], <a>validation error</a>, <a
									href="https://infra.spec.whatwg.org/#map-remove">remove</a>
								<var>data["duration"]</var>.</p>
						</li>

						<li id="validate-last-mod">
							<p>(<a href="#last-modification-date"></a>) If <var>data["dateModified"]</var> is set and is
								not a valid date or date-time per&#160;[[!iso8601]], <a>validation error</a>, <a
									href="https://infra.spec.whatwg.org/#map-remove">remove</a>
								<var>data["dateModified"]</var>.</p>
						</li>

						<li id="validate-pub-date">
							<p>(<a href="#publication-date"></a>) If <var>data["datePublished"]</var> is set and is not
								a valid date or date-time per&#160;[[!iso8601]], <a>validation error</a>, <a
									href="https://infra.spec.whatwg.org/#map-remove">remove</a>
								<var>data["datePublished"]</var>.</p>
						</li>

						<li id="validate-inlanguage">
							<p>(<a href="#inLanguage"></a>) If <var>data["inLanguage"]</var> is set, <a
									href="https://infra.spec.whatwg.org/#list-iterate">for each</a>
								<var>item</var> of <var>data["inLanguage"]</var>, if <var>item</var> is not <a
									href="https://tools.ietf.org/html/bcp47#section-2.2.9"
								>well-formed</a>&#160;[[!bcp47]], <a>validation error</a>, <a
									href="https://infra.spec.whatwg.org/#list-remove">remove</a>
								<var>item</var> from <var>data["inLanguage"]</var>.</p>
						</li>

						<li id="validate-progression-dir">
							<p>(<a href="#reading-progression-direction"></a>) If <var>data["readingProgression"]</var>
								is not set, set to "<code>ltr</code>". Otherwise, if it is not one of the <a
									href="#reading-progression-direction">required directional values</a>, <a>validation
									error</a>, set to "<code>ltr</code>".</p>
						</li>

						<li id="validate-extension">
							<p>If a <a>profile</a> specifies data validation checks, those steps are executed at this
								point.</p>
						</li>

						<li id="validate-empty-arrays">
							<p><a href="https://infra.spec.whatwg.org/#map-iterate">For each</a>
								<var>term</var> → <var>value</var> of <var>data</var>, if running <a>remove empty
									arrays</a> given the variables <var>term</var> and <var>value</var> returns failure,
									<a href="https://infra.spec.whatwg.org/#map-remove">remove</a>
								<var>data["term"]</var>.</p>
							<details>
								<summary>Explanation</summary>
								<p>As the processing of the manifest involves removing invalid values at various stages,
									the final data structure might end up with some lists that not no longer contain any
									values. This step iterates back over the data and removes any such empty lists.</p>
							</details>
						</li>

						<li id="validate-end">
							<p>Return <var>data</var>.</p>
						</li>
					</ol>

					<section id="global-data-checks">
						<h4>Global Data Checks</h4>

						<p>To process the <dfn>global data checks</dfn> on a property <var>term</var>'s <var>value</var>
							with a <a>context</a>
							<var>context</var>, run these steps:</p>

						<ol>
							<li id="global-value-categories">
								<p>(<a href="#properties-value-categories"></a>) If <var>term</var> has a known <a
										href="#properties-value-categories">value category</a>, set <var>value</var> to
									the result of calling <a>verify value category</a>, when successful, given the
									variables <var>term</var>, <var>value</var> and <var>context</var>. Otherwise,
									return failure.</p>
								<details>
									<summary>Explanation</summary>
									<p>This step verifies that the value of the term matches the expected category
										required for the term. For example, the abridged term requires a boolean value,
										so any other value used with the term will result in a failure.</p>
									<p>If a failure occurs calling the function, this step also returns a failure so
										that the property is removed from the final data set.</p>
								</details>
							</li>

							<li id="global-entities">
								<p>(<a href="#value-entity"></a>) If <var>term</var> expects an <a href="#value-array"
										>array</a> of <a href="#value-entity">entities</a>, <a
										href="https://infra.spec.whatwg.org/#list-iterate">for each</a>
									<var>item</var> of <var>value</var>, check whether <var>item["name"]</var> is
									set:</p>
								<ul>
									<li>
										<p>If not, <a>validation error</a>, <a
												href="https://infra.spec.whatwg.org/#list-remove">remove</a>
											<var>item</var> from <var>value</var>.</p>
									</li>
									<li>If so, <a href="https://infra.spec.whatwg.org/#list-iterate">for each</a>
										<var>name</var> of <var>item["name"]</var>, if <var>name["value"]</var> is not
										set, or is an empty string, <a href="https://infra.spec.whatwg.org/#list-remove"
											>remove</a>
										<var>name</var> from <var>item["name"]</var>.</li>
								</ul>
								<details>
									<summary>Explanation</summary>
									<p>This step ensures that all entities have a name. Entities without a name are
										removed.</p>
								</details>
							</li>

							<li id="global-language">
								<p>(<a href="#manifest-lang-dir-global"></a> and <a href="#manifest-lang-dir-local"
									></a>) If <var>term</var> expects a <a><code>LocalizableString</code></a>:</p>
								<ul>
									<li>
										<p>if <var>value["language"]</var> is set and its value is not <a
												href="https://tools.ietf.org/html/bcp47#section-2.2.9"
											>well-formed</a>&#160;[[!bcp47]], <a>validation error</a>, <a
												href="https://infra.spec.whatwg.org/#map-remove">remove</a>
											<var>value["language"]</var>.</p>
										<p>if <var>value["direction"]</var> is set and its value is not one of
												"<code>ltr</code>" or "<code>rtl</code>", <a>validation error</a>, <a
												href="https://infra.spec.whatwg.org/#map-remove">remove</a>
											<var>value["direction"]</var>.</p>
									</li>
								</ul>
								<details>
									<summary>Explanation</summary>
									<p>This step checks is language declarations are well formed, and removes them if
										not.</p>
									<p>Similarly, it checks that all direction declarations have either the value "ltr"
										or "rtl".</p>
								</details>
							</li>

							<li id="global-linkedresource">
								<p>(<a href="#value-linked-resource"></a>) If <var>term</var> expects an <a
										href="#value-array">array</a> of <a>LinkedResources</a>, <a
										href="https://infra.spec.whatwg.org/#list-iterate">for each</a>
									<var>resource</var> of <var>value</var>:</p>
								<ul>
									<li>
										<p>if <var>resource["url"]</var> is not set, or its value is an empty string,
												<a>validation error</a>, <a
												href="https://infra.spec.whatwg.org/#list-remove">remove</a>
											<var>resource</var> from <var>value</var>, then <a
												href="https://infra.spec.whatwg.org/#iteration-continue"
											>continue</a>.</p>
										<p>Otherwise, if <var>resource["url"]</var> is not a valid URL&#160;[[!url]],
												<a>validation error</a>, <a
												href="https://infra.spec.whatwg.org/#list-remove">remove</a>
											<var>resource</var> from <var>value</var>, then <a
												href="https://infra.spec.whatwg.org/#iteration-continue"
											>continue</a>.</p>
									</li>
									<li>
										<p>if <a href="#linkedresource-length"><var>resource["length"]</var></a> is set
											and is not a number, or is a negative number, <a>validation error</a>, <a
												href="https://infra.spec.whatwg.org/#map-remove">remove</a>
											<var>resource["length"]</var>.</p>
									</li>
									<li>
										<p>if <a href="#linkedresource-alternate"><var>resource["alternate"]</var></a>
											is set, <a href="https://infra.spec.whatwg.org/#list-iterate">for each</a>
											<var>alternate</var> of <var>resource["alterate"]</var>, if
												<var>alternate["encodingFormat"]</var> is not set, <a>validation
												error</a>.</p>
									</li>
								</ul>
								<details>
									<summary>Explanation</summary>
									<p>This step performs three checks on the terms of a
										<code>LinkedResource</code>:</p>
									<ol>
										<li>If a URL is not specified, or is invalid, the <code>LinkedResource</code> is
											removed.</li>
										<li>If the length of the resource is specified, and is not a positive number,
											the length is removed.</li>
										<li>If there are alternate resources associated with the
												<code>LinkedResource</code>, each is inspected to see if its media type
											is specified.</li>
									</ol>
								</details>
							</li>

							<li id="global-recurse">
								<p>Recursively check <var>value</var> as follows to ensure that all properties are
									verified:</p>
								<ol>
									<li id="global-recurse-maps">
										<p>If <var>value</var> is a <a href="https://infra.spec.whatwg.org/#ordered-map"
												>map</a>, <a href="https://infra.spec.whatwg.org/#map-iterate">for
												each</a>
											<var>key</var> → <var>keyValue</var> of <var>value</var>, set
												<var>value[key]</var> to the result of running <a>global data checks</a>
											given <var>key</var> and <var>keyValue</var>.</p>
									</li>

									<li id="global-recurse-lists">
										<p>If <var>value</var> is a <a href="https://infra.spec.whatwg.org/#list"
												>list</a>, <a href="https://infra.spec.whatwg.org/#list-iterate">for
												each</a>
											<var>item</var> of <var>value</var>, if <var>item</var> is a <a
												href="https://infra.spec.whatwg.org/#ordered-map">map</a>, <a
												href="https://infra.spec.whatwg.org/#map-iterate">for each</a>
											<var>key</var> → <var>keyValue</var> of <var>value</var>, set
												<var>value[key]</var> to the result of running <a>global data checks</a>
											given <var>key</var> and <var>keyValue</var>.</p>
									</li>
								</ol>
								<details>
									<summary>Explanation</summary>
									<p>In order to ensure that all the properties in the manifest get processed, this
										step recursively checks each entry for additional map entries to process. If the
										value is a list, each item is inspected to determine if it is a map that can be
										processed.</p>
								</details>
							</li>

							<li id="global-end">
								<p>Return <var>value</var>.</p>
							</li>
						</ol>

						<details>
							<summary>Explanation</summary>
						</details>
					</section>

					<section id="verify-value-category">
						<h4>Verify Value Category</h4>

						<p>To <dfn>verify value category</dfn> of a property <var>term</var>'s <var>value</var> with a
								<a>context</a>
							<var>context</var>, run these steps:</p>

						<ol>
							<li id="verify-array">
								<p>If, depending on the <var>context</var>, <var>term</var> expects an <a
										href="#value-array">array</a>:</p>
								<ol>
									<li id="verify-array-invalid">
										<p>if <var>value</var> is not a <a href="https://infra.spec.whatwg.org/#list"
												>list</a>, <a>validation error</a>, return failure.</p>
									</li>
									<li id="verify-array-item-check">
										<p>otherwise, <a href="https://infra.spec.whatwg.org/#list-iterate">for each</a>
											<var>item</var> of <var>value</var>:</p>
										<ol>
											<li id="verify-array-item-invalid">
												<p>if <var>item</var> does not match the expected type of the array,
														<a>validation error</a>, <a
														href="https://infra.spec.whatwg.org/#list-remove">remove</a>
													<var>item</var> from <var>value</var>, then <a
														href="https://infra.spec.whatwg.org/#iteration-continue"
														>continue</a>.</p>
											</li>
											<li id="verify-array-item-recurse">
												<p>if <var>item</var> is a <a
														href="https://infra.spec.whatwg.org/#ordered-map">map</a>, <a
														href="https://infra.spec.whatwg.org/#map-iterate">for each</a>
													<var>key</var> → <var>keyValue</var> of <var>item</var>, if
														<var>key</var> has an expected type, set <var>key</var> to the
													result of running <a>verify value category</a> given the variables
														<var>key</var> and <var>keyValue</var>. If the result of
													processing <var>item</var> is an empty <a
														href="https://infra.spec.whatwg.org/#ordered-map">map</a>,
														<a>validation error</a>, <a
														href="https://infra.spec.whatwg.org/#list-remove">remove</a>
													<var>item</var> from <var>value</var>.</p>
											</li>
										</ol>
										<p>If the result of processing <var>value</var> is an empty <a
												href="#value-array">array</a>, <a>validation error</a>, return
											failure.</p>
									</li>
								</ol>
							</li>
							<li id="verify-map">
								<p>Otherwise, if, depending on the <var>context</var>
									<var>term</var> expects a <a href="https://infra.spec.whatwg.org/#ordered-map"
										>map</a>:</p>
								<ol>
									<li id="verify-map-invalid">
										<p>if <var>value</var> is not a <a
												href="https://infra.spec.whatwg.org/#ordered-map">map</a>, <a>validation
												error</a>, return failure.</p>
									</li>
									<li id="verify-map-recurse">
										<p>otherwise, <a href="https://infra.spec.whatwg.org/#map-iterate">for each</a>
											<var>key</var> → <var>keyValue</var> of <var>value</var>, if <var>key</var>
											has an expected type, set <var>key</var> to the result of running <a>verify
												value category</a> given <var>key</var> and <var>keyValue</var>. If the
											result of processing <var>value</var> is an empty <a
												href="https://infra.spec.whatwg.org/#ordered-map">map</a>, <a>validation
												error</a>, return failure.</p>
									</li>
								</ol>
							</li>
							<li id="verify-type-invalid">
								<p>Otherwise, if, depending on the <var>context</var>, <var>value</var> does not have
									the expected type of <var>term</var>, <a>validation error</a>, return failure.</p>
							</li>
							<li id="verify-return">
								<p>Return <var>value</var>.</p>
							</li>
						</ol>
						<details>
							<summary>Explanation</summary>
							<p>This function checks that the value of the term being processed matches its expected
								value category. The function is recursively called when the value is a list or map to
								ensure that all properties in the manifest get checked.</p>
						</details>
					</section>

					<section id="remove-empty-arrays">
						<h4>Remove Empty Arrays</h4>

						<p>To <dfn>remove empty arrays</dfn> from a property <var>term</var>'s <var>value</var>, run
							these steps:</p>

						<ol>
							<li>
								<p>If <var>value</var> is an empty <a href="https://infra.spec.whatwg.org/#list"
										>list</a>, return failure.</p>
							</li>
							<li>
								<p>Otherwise, if <var>value</var> is a <a
										href="https://infra.spec.whatwg.org/#ordered-map">map</a>, <a
										href="https://infra.spec.whatwg.org/#map-iterate">for each</a>
									<var>key</var> → <var>keyValue</var> of <var>value</var>, if running <a>remove empty
										arrays</a> given <var>key</var> and <var>keyValue</var> returns failure, <a
										href="https://infra.spec.whatwg.org/#map-remove">remove</a>
									<var>value[key]</var>.</p>
							</li>
						</ol>
						<details>
							<summary>Explanation</summary>
							<p>This function checks that the value of the term being processed is not an empty list. A
								term that initially has a list can lose entries as it gets processed (i.e., when the
								list items are invalid).</p>
						</details>
					</section>
				</section>

				<section id="add-html-defaults">
					<h3>Add HTML Defaults</h3>

					<p>To <dfn>add HTML defaults</dfn> for missing properties in <a
							href="https://infra.spec.whatwg.org/#ordered-map">map</a>
						<var>data</var> with an <a data-cite="html#the-document-object">HTML Document (DOM)
						Node</a>&#160;[[!html]] <var>document</var>, run the following steps:</p>

					<ol>
						<li id="processing-defaults-title">
							<p>(<a href="#pub-title"></a>) If <var>data["name"]</var> is not set, or its value is an
								empty <a href="https://infra.spec.whatwg.org/#string">string</a>:</p>
							<ul>
								<li>
									<p>Let <var>title</var> be an empty <a
											href="https://infra.spec.whatwg.org/#ordered-map">map</a>. Set its values as
										follows:</p>
									<ul>
										<li>
											<p>if the <a data-cite="html#the-title-element"><code>title</code></a>
												element&#160;[[!html]] of <var>document</var> is set and its contains is
												not empty, set <var>title["value"]</var> to the text content of the
													<code>title</code> element.</p>
											<p>Set <var>title["language"]</var> to the <a
													data-cite="html#the-lang-and-xml:lang-attributes"
												>language</a>&#160;[[!html]], if available, and
													<var>title["direction"]</var> to the <a
													data-cite="html#the-dir-attribute">base direction</a>&#160;[[!html]]
												if that value is available and its value is either "<code>ltr</code>" or
													"<code>rtl</code>". </p>
										</li>
										<li>
											<p>otherwise, <a>validation error</a>, generate a value for
													<var>title["value"]</var> (see the <a href="#generate_title"
													>separate note for details</a>). Set <var>title["language"]</var>
												and <var>title["direction"]</var> as approrpriate for the generated
												title.</p>
										</li>
									</ul>
								</li>
								<li>Set <var>data["name"]</var> to <code>«&#160;<var>title</var>&#160;»</code>.</li>
							</ul>
							<details>
								<summary>Explanation</summary>
								<p>This step adds the content of the <code>title</code> element of <var>document</var>
									when the <code>name</code> property is not specified in the manifest. For
									example:</p>
								<pre class="example">&lt;html&gt;
&lt;head lang="en"&gt;
    &lt;title&gt;The Golden Bough&lt;/title&gt;
    …
    &lt;script type="application/ld+json"&gt;
    {
        "@context" : ["https://schema.org","https://www.w3.org/ns/pub-context"],
        …
    }
    &lt;/script&gt;</pre>
								<p>yields:</p>
								<pre class="example">«[
    …
    "name" → «
        «[
            "value"    → "The Golden Bough",
            "language" → "en"
        ]»
    »,
    …
]»</pre>
							</details>
						</li>

						<li id="processing-defaults-reading-order">
							<p>(<a href="#default-reading-order"></a>) If <var>data["readingOrder"]</var> is not set or
								its value is an empty <a href="https://infra.spec.whatwg.org/#string">string</a> or <a
									href="https://infra.spec.whatwg.org/#list">list</a>:</p>
							<ul>
								<li>
									<p>if <a data-cite="!dom#concept-document-url">document.URL</a> is not set, this is
										a <a>fatal error</a>. Return failure.</p>
								</li>
								<li>
									<p>otherwise, set <var>data["readingOrder"]</var> to an empty <a
											href="https://infra.spec.whatwg.org/#list">list</a> and <a
											href="https://infra.spec.whatwg.org/#list-append">append</a> the <a
											href="https://infra.spec.whatwg.org/#ordered-map">map</a>
										<code>«[&#160;"url" → <a data-cite="!dom#concept-document-url"
											>document.URL</a>&#160;]»</code>.</p>
								</li>
							</ul>
							<details>
								<summary>Explanation</summary>
								<p> If the Digital Publication consists only of the referencing document, the default
									reading order can be omitted; it will consist, automatically, of that single
									resource. </p>
							</details>
						</li>

						<li id="processing-defaults-extension">
							<p>If a <a>profile</a> specifies <var>document</var> fallbacks, those steps are executed at
								this point.</p>
						</li>

						<li>
							<p>Return <var>data</var>.</p>
						</li>
					</ol>
				</section>
			</section>
		</section>
		<section id="extensions">
			<h2>Modular Extensions</h2>

			<p>The manifest format defined in this specification is designed to be implemented and extended by
				publishing communities in the production of new <a>profiles</a> (e.g., audiobooks and scholarly
				publications). The flexibility the manifest format offers allows it to be tailored to each community's
				specific needs while also providing a common base for user agents that need to process the profiles
				(i.e., minimizing the differences between each profile and simplifying interoperability).</p>

			<p>In order for a profile to be compatible with this specification, the following conditions MUST be met: </p>

			<ol>
				<li>It MUST adhere to the requirements for constructing a manifest as defined in <a href="#manifest"
					></a>.</li>
				<li>It MUST define a unique conformance URL and require that conforming publications include this URL in
					their <a href="conforms-to"><code>conformsTo</code> property</a>.</li>
				<li>One or both <a href="#manifest-link">linking methods</a> MUST be used in the discovery of the
					manifest.</li>
				<li>The generic processing steps described in <a href="#manifest-processing"></a> MUST remain valid for
					the extended manifest. To achieve this, and if new terms are added to the general manifest, then: <ul>
						<li>The term SHOULD be categorized, if applicable, to one or more of the general term categories
							used in the algorithm (e.g., <a href="#value-array">array</a> or <a
								href="#value-localizable-string">localizable string</a>). This means the relevant
							processing steps will be automatically executed for those terms </li>
						<li>If necessary, the profile MAY define its own processing step(s), to be executed at the
							designated extension points within the <a href="#manifest-processing">processing
								algorithm</a>. Such extra steps MUST NOT invalidate the results of any of the steps
							defined for the <a href="#manifest-processing">processing algorithm</a> in general.</li>
					</ul>
				</li>
			</ol>
			<p class="ednote"> Adding an example of a term added by, e.g., the audiobook profile would be a good idea,
				when available. </p>
		</section>
		<section id="security-privacy">
			<h2>Security and Privacy Considerations</h2>

			<p>As the manifest is expressed using JSON-LD, the <a href="https://www.w3.org/TR/json-ld11/#privacy"
					>privacy</a> and <a href="https://www.w3.org/TR/json-ld11/#iana-considerations">security
					considerations</a> [[!json-ld11]] detailed in that specification are applicable to all <a
					href="#extensions">profiles</a> of the manifest.</p>

			<p>Some additional general considerations for profiles include:</p>

			<ul>
				<li>The location of resources is not defined at the manifest level, so profiles that allow references to
					remotely hosted resources will need to be concerned with Web security principles (e.g., cross-origin
					resource sharing).</li>
				<li>The ability to <a href="#links">link to external resources</a> potentially exposes users to
					malicious content.</li>
				<li>The manifest allows personally identifiable information about a digital publication's creator(s)
					(e.g., names, identifying URLs) to be included, so authoring tools could expose unexpected
					information if explicit author approval of metadata is not required.</li>
			</ul>

			<p>More specific security and privacy considerations are left to each profile to detail, as these will vary
				depending on the nature of the <a>digital publication</a> format.</p>
		</section>
		<section id="internal-rep-data-model" class="appendix informative">
			<h2>Internal Representation Data Models</h2>

			<p>The manifest includes a number of authoring conveniences, such as default values, the ability to use
				strings where objects would normally be required, and the automatic compilation of information from
				other sources (e.g., for the <a href="#pub-title">title</a> and <a href="#default-reading-order">reading
					order</a>). The <a href="#manifest-processing">processing of the manifest</a> normalizes these
				conveniences and results in a consistent data set for user agents (the <a>internal representation</a>),
				but this set is not easily visualized from the processing algorithm.</p>

			<p>This appendix provides informative abstract data models that describe the resulting data structure. The
				choice of representations is only for illustrative purposes. User agents are not required to use the
				associated technologies.</p>

			<section id="webidl">
				<h3>WebIDL</h3>

				<p>This definition expresses the expected names, datatypes, and possible restrictions for each member of
					the manifest after <a href="#manifest-processing">processing</a> using [[WebIDL]].</p>

				<p class="note">This specification does not define an API for exposing the manifest data.</p>

				<section id="webidl-wpm">
					<h4>The <code>PublicationManifest</code> Dictionary</h4>

					<pre id="wpm">
dictionary PublicationManifest {
             sequence&lt;DOMString>         type = "CreativeWork";
    required DOMString                 profile;
             sequence&lt;DOMString>         conformsTo;
             DOMString                   id;
             boolean                     abridged;
             sequence&lt;DOMString>         accessMode;
             sequence&lt;DOMString>         accessModeSufficient;
             sequence&lt;DOMString>         accessibilityFeature;
             sequence&lt;DOMString>         accessibilityHazard;
             sequence&lt;LocalizableString> accessibilitySummary;
             sequence&lt;Entity>            artist;
             sequence&lt;Entity>            author;
             sequence&lt;Entity>            colorist;
             sequence&lt;Entity>            contributor;
             sequence&lt;Entity>            creator;
             sequence&lt;Entity>            editor;
             sequence&lt;Entity>            illustrator;
             sequence&lt;Entity>            inker;
             sequence&lt;Entity>            letterer;
             sequence&lt;Entity>            penciler;
             sequence&lt;Entity>            publisher;
             sequence&lt;Entity>            readBy;
             sequence&lt;Entity>            translator;
             sequence&lt;DOMString>         url;
             DOMString                   duration;
             sequence&lt;DOMString>         inLanguage;
             DOMString                   dateModified;
             DOMString                   datePublished;
             TextDirection               readingProgression = "ltr";
    required sequence&lt;LocalizableString> name;
    required sequence&lt;LinkedResource>    readingOrder;
             sequence&lt;LinkedResource>    resources;
             sequence&lt;LinkedResource>    links;
};

enum TextDirection {
    "ltr",
    "rtl"
};
</pre>
					<section id="LinkedResource">
						<h3>The <code>LinkedResource</code> Dictionary</h3>

						<pre>
dictionary LinkedResource {
    required DOMString                           url;
             DOMString                           encodingFormat;
             sequence&lt;LocalizableString>         name;
             sequence&lt;LocalizableString>         description;
             sequence&lt;DOMString>                 rel;
             DOMString                           integrity;
             double                              length;
             sequence&lt;LinkedResource>            alternate;
};</pre>
					</section>

					<section id="Entity">
						<h3>The <code>Entity</code> Dictionary</h3>

						<pre>
dictionary Entity {
             sequence&lt;DOMString>         type;
    required sequence&lt;LocalizableString> name;
             DOMString                   id;
             DOMString                   url;
             sequence&lt;DOMString>         identifier;
};
</pre>
					</section>

					<section id="LocalizableString">
						<h3>The <code>LocalizableString</code> Dictionary</h3>

						<pre>
dictionary LocalizableString {
    required DOMString                   value;
             DOMString                   language;
             TextDirection               direction;
};
</pre>
					</section>
				</section>
			</section>
		</section>
		<section id="app-toc-structure" class="appendix">
			<h2>Machine-Processable Table of Contents</h2>

			<section id="app-toc-html-intro" class="informative">
				<h3>Introduction</h3>

				<p>To facilitate navigation within pages and across sites, HTML uses the <a
						href="https://www.w3.org/TR/html/sections.html#the-nav-element"><code>nav</code>
					element</a>&#160;[[html]] to express lists of links. Although generic in nature by default, the
					purpose of a <code>nav</code> element can be more specifically identified by use of the <a
						href="https://www.w3.org/TR/html/dom.html#aria-role-attribute"><code>role</code>
					attribute</a>&#160;[[html]]. In particular, the <code>doc-toc</code> role from the [[dpub-aria-1.0]]
					vocabulary identifies the <code>nav</code> element as the <a>digital publication's</a> table of
					contents.</p>

				<p>Including an identifiable table of contents is an accessible way to produce any <a>digital
						publication</a>, but due to the flexibility of HTML markup, it also presents challenges for user
					agents trying to extract a meaningful hierarchy of links (e.g., to provide a custom view available
					from any page). To avoid duplicating the tables of contents for different uses, this section defines
					a syntax that is both human friendly and commonly used while still providing enough structure for
					user agent extraction.</p>

				<p>Authors have a choice of lists (ordered or unordered) to construct their table of contents. By
					tagging each link within these lists in anchor tags (<a
						href="https://www.w3.org/TR/html/textlevel-semantics.html#the-a-element"><code>a</code>
						elements</a>), user agents can easily differentiate the information they need from any
					peripheral content (asides) or stylistic tagging that has also been added. The table of contents can
					consist of both active links (with an <code>href</code> attribute) and inactive links (excluding the
						<code>href</code> attribute), providing additional flexibility in how the table of contents is
					constructed (e.g., to omit links to certain headings or only link to certain content in a
					preview).</p>
			</section>

			<section id="app-toc-html">
				<h3>HTML Structure</h3>

				<p>The table of contents is expressed via an [[!html]]&#160;element (typically a <a
						href="https://www.w3.org/TR/html/sections.html#the-nav-element"><code>nav</code> element</a>).
					This element MUST be identified by the <code>role</code> attribute&#160;[[!html]] value
						"<code>doc-toc</code>"&#160;[[!dpub-aria-1.0]], and MUST be the first element in the document in
						<a href="https://dom.spec.whatwg.org/#concept-tree-order">document tree order</a>&#160;[[!dom]]
					with that <code>role</code> value.</p>

				<p>The manifest SHOULD <a href="#table-of-contents">identify the resource</a> that contains the table of
					contents.</p>

				<p>Although the content model of the <code>nav</code> element is not restricted, user agents will only
					be able to extract a usable table of contents when the following markup guidelines are followed:</p>

				<dl>
					<dt>Table of Contents Title</dt>
					<dd>
						<p>Although a title for the table of contents is optional, to avoid having a user agent generate
							a placeholder title when one is needed, it is advised to add one. Titles are specified using
							any of the [[!html]]&#160;<a
								href="https://www.w3.org/TR/html/sections.html#the-h1-h2-h3-h4-h5-and-h6-elements"
									><code>h1</code> through <code>h6</code> elements</a>. Note that only the first such
							element is recognized as the title. If a heading element is not found before the <a
								href="#toc-list-links">list of links</a>, user agents will assume that one has not been
							specified.</p>
					</dd>
					<dt id="toc-list-links">List of Links</dt>
					<dd>
						<p>The first [[!html]]&#160;<a
								href="https://www.w3.org/TR/html/grouping-content.html#the-ol-element"
								><code>ol</code></a> or <a
								href="https://www.w3.org/TR/html/grouping-content.html#the-ul-element"
								><code>ul</code></a> list element encountered in the <code>nav</code> element is assumed
							to contain the list that defines the links into the content. This list will be found even if
							it is nested inside of <a
								href="https://www.w3.org/TR/html/grouping-content.html#the-div-element"
								><code>div</code></a> elements, for example, as the algorithm <a
								href="#toc-ignored-elements">ignores elements</a> that are not relevant to its
							processing. The list cannot occur inside of any <a href="#toc-skipped-elements">skipped
								elements</a>, however, since their internal contents are not evaluated.</p>
						<p>If the <code>nav</code> element does not contain one of these elements, then user agents will
							not register the digital publication as containing a usable table of contents (e.g., a
							machine-rendered option will not be available).</p>
					</dd>
					<dt id="toc-branches">Branches</dt>
					<dd>
						<p>If the table of contents is considered as a tree of links, then each list item (<a
								href="https://www.w3.org/TR/html/grouping-content.html#the-li-element"><code>li</code>
								element</a>) inside of the <a href="#toc-list-links">list of links</a> represents one
							branch. Each of these branches has to have a name and optional destination in order to be
							presented to users, and this information is obtained from the first <a
								href="https://www.w3.org/TR/html/textlevel-semantics.html#the-a-element"><code>a</code>
								element</a> found within the list item, <a href="#toc-ignored-elements">wherever it is
								nested</a> (again, excluding any <code>a</code> elements inside of <a
								href="#toc-skipped-elements">skipped elements</a>.)</p>
						<p>The link destination for the branch is obtained from the <code>a</code> element's
								<code>href</code> attribute, when specified. This attribute can be omitted if a link is
							not available (e.g., in a preview) or not relevant (e.g., a grouping header). When providing
							a link into the content, it is also possible to specify the relation of the linked document
							(in a <code>rel</code> attribute) and the media type of the linked resource (in a
								<code>type</code> attribute).</p>
						<p>After finding the <code>a</code> element that labels the branch, user agents will continue to
							inspect the markup for another list element (i.e., sub-branches). If a list is found, it is
							similarly processed to extract its links, and so on, until there are no more nested branches
							left to process.</p>
					</dd>
					<dt id="toc-skipped-elements">Skipped Elements</dt>
					<dd>
						<p>A small set of elements are ignored when the parsing table of contents to avoid
							misinterpretation. These are the [[!html]]&#160;<a
								href="https://www.w3.org/TR/html/dom.html#sectioning-content">sectioning content
								elements</a> and <a href="https://www.w3.org/TR/html/sections.html#sectioning-roots"
								>sectioning root elements</a>. The reason they are ignored is because they can defined
							their own outlines (i.e., they can represent embedded content that is self-contained and not
							necessarily related to the structure of content links).</p>
						<p>Any element that has its <a
								href="https://www.w3.org/TR/html/editing.html#the-hidden-attribute"><code>hidden</code>
								attribute</a> set is also skipped, since hidden elements are not intended to be directly
							accessed by users.</p>
						<p>Although these elements can be included in the <code>nav</code> element, care has to be taken
							not to embed important content within them (e.g., do not wrap a <code>section</code> element
							around the list item that contains all the links into the content).</p>
					</dd>
					<dt id="toc-ignored-elements">Ignored Elements</dt>
					<dd>
						<p>All elements that are not relevant to extracting the table of contents, and are not <a
								href="#toc-skipped-elements">skipped</a>, are ignored. Unlike skipped elements, ignoring
							means that user agents will continue to search inside them for relevant content, allowing
							greater flexibility in terms of the tagging that can be used.</p>
					</dd>
				</dl>

				<section id="app-toc-html-examples" class="informative">
					<h4>Examples</h4>

					<aside class="example" title="A basic multi-level table of contents.">
						<p>Note that different list types can be used for the different levels.</p>
						<pre>&lt;nav role="doc-toc">
   &lt;h2>Contents&lt;/h2>

   &lt;ol>
      &lt;li>
        &lt;a href="discourses.html">ZARATHUSTRA'S DISCOURSES.&lt;/a>
         &lt;ul>
            &lt;li>&lt;a href="discourses.html#s01">THE THREE METAMORPHOSES.&lt;/a>&lt;/li>
            &lt;li>&lt;a href="discourses.html#s02">THE ACADEMIC CHAIRS OF VIRTUE.&lt;/a>&lt;/li>
            &lt;li>&lt;a href="discourses.html#s03">BACKWORLDSMEN.&lt;/a>&lt;/li>
            …
         &lt;/ul>
      &lt;/li>
      …
   &lt;/ol>
&lt;/nav></pre>
					</aside>

					<aside class="example" title="A table of contents with ignored content.">
						<p>The supplementary descriptive information is ignored by user agents.</p>
						<pre>&lt;nav role="doc-toc">
   &lt;h2>Contents&lt;/h2>

   &lt;ol>
      &lt;li>
         &lt;div class="title">&lt;a href="c01.html">CHAPTER I&lt;/a>&lt;/div>
         &lt;div class="description">Biographical and Introductory.&lt;/div>
      &lt;/li>
      &lt;li>
         &lt;div class="title">&lt;a href="c02.html">CHAPTER II&lt;/a>&lt;/div>
         &lt;div class="description">A New System of Alternating Current Motors and Transformers.&lt;/div>
      &lt;/li>
      …
   &lt;/ol>
&lt;/nav></pre>
					</aside>

					<aside class="example" title="A table of contents for a preview.">
						<p>The <code>a</code> elements that link to content the user does not have access to do not
							include <code>href</code> attributes.</p>
						<pre>&lt;nav role="doc-toc">
   &lt;h2>Contents&lt;/h2>

  &lt;ol>
     &lt;li>&lt;a href="xmas_carol.html">Marley's Ghost&lt;/a>&lt;/li>
     &lt;li>&lt;a>The First of Three Spirits&lt;/a>&lt;/li>
     &lt;li>&lt;a>The Second of Three Spirits&lt;/a>&lt;/li>
     &lt;li>&lt;a>The Last of the Spirits&lt;/a>&lt;/li>
     &lt;li>&lt;a>The End of It&lt;/a>&lt;/li>
  &lt;/ol>

   …
&lt;/nav></pre>
					</aside>

					<aside class="example" title="A table of contents with unlinked headings.">
						<p>In this example, the author names are not relevant link locations so <code>href</code>
							attributes are not included on their enclosing <code>a</code> elements.</p>
						<pre>&lt;nav role="doc-toc">
   &lt;h2>Contents&lt;/h2>

   &lt;ol>
      &lt;li>
         &lt;a>Faraday, Michael&lt;/a>
         &lt;ol>
            &lt;li>&lt;a href="faraday.html#s01">Experimental Researches in Electricity&lt;/a>&lt;/li>
            &lt;li>&lt;a href="faraday.html#s02">The Chemical History of a Candle&lt;/a>&lt;/li>
         &lt;/ol>
      &lt;/li>
      &lt;li>
         &lt;a>Forel, Auguste&lt;/a>
         &lt;ol>
            &lt;li>&lt;a href="forel.html">The Senses of Insects&lt;/a>&lt;/li>
         &lt;/ol>
      &lt;/li>
      …
   &lt;/ol>
&lt;/nav></pre>
					</aside>

				</section>
			</section>

			<section id="app-toc-ua">
				<h3>User Agent Processing</h3>

				<p>This section defines an algorithm for extracting a table of contents from a <code>nav</code> element.
					It is defined in terms of a walk over the nodes of a DOM tree, in <a
						href="https://www.w3.org/TR/html/infrastructure.html#tree-order">tree order</a>, with each node
					being visited when it is <em>entered</em> and when it is <em>exited</em> during the walk. Each time
					a node is visited, it can be seen as triggering an <em>enter</em> or <em>exit</em> event. In some
					steps, user agents are provided a choice in how to process the content to provide flexibility for
					different presentation models.</p>

				<p class="note">For illustrative purposes, the examples in this section show the structure of the table
					of contents as JavaScript objects. User agents can process and internalize the resulting structure
					in whatever language and form is appropriate.</p>

				<p>For the purposes of this algorithm, a <dfn>list element</dfn> is defined as either an
						[[!html]]&#160;<a href="https://www.w3.org/TR/html/grouping-content.html#the-ol-element"
							><code>ol</code></a> or <a
						href="https://www.w3.org/TR/html/grouping-content.html#the-ul-element"><code>ul</code></a>
					element.</p>

				<p>The following algorithm MUST be applied to a walk of a DOM subtree rooted at the first
						<code>nav</code> element in document order with the <code>role</code> attribute value
						<code>doc-toc</code>. All explanations are <em>informative</em>.</p>

				<ol>
					<li>
						<p>Let <em>toc</em> be a object that represents the table of contents and initialize it as
							follows:</p>
						<ol>
							<li>Create a <code>name</code> property for <em>toc</em> that represents the title of the
								table of contents and set to an empty string.</li>

							<li>Create an <code>entries</code> property for <em>toc</em> that represents all the
								branches of the table of contents and set to an empty array.</li>
						</ol>
						<details>
							<summary>Explanation</summary>
							<p>This step initializes the <em>toc</em> object that will store the title and the branches
								of the table of contents.</p>
							<pre class="example" title="Visualization of the default toc object.">{
    "name"    : '',
    "entries" : []
}</pre>
						</details>
					</li>

					<li>
						<p>Initialize a stack.</p>
						<details>
							<summary>Explanation</summary>
							<p>The stack is used to hold branches that are not yet complete. As a new sub-branch is
								encountered, the parent gets pushed onto the stack so it can be retrieved later.</p>
						</details>
					</li>

					<li>
						<p>Let <em>current toc branch</em> be a variable set to <code>null</code>.</p>
						<details>
							<summary>Explanation</summary>
							<p><em>current toc branch</em> is used to hold the object that represents the branch of the
								table of contents that is currently being processed.</p>
						</details>
					</li>

					<li>
						<p>Walk over the DOM in <a href="https://www.w3.org/TR/html/infrastructure.html#tree-order">tree
								order</a>, starting with the <code>nav</code> element the table of contents is being
							built from, and trigger the first relevant step below for each element as the walk enters
							and exits it.</p>
						<ol>
							<li>
								<p>
									<strong>When entering a <a
											href="https://www.w3.org/TR/html/dom.html#heading-content-2">heading
											content</a> element:</strong>
								</p>
								<p>Run these steps:</p>
								<ol>
									<li>
										<p>If the stack is empty, and the <code>name</code> property of <em>toc</em> is
											an empty string, set the <code>name</code> property to one of the
											following:</p>
										<ul>
											<li>the descendant content of the element (to preserve any HTML tags);</li>
											<li>the text string obtained from the descendant content (e.g., by
												calculating the <a
													href="https://www.w3.org/TR/accname-1.1/#mapping_additional_nd_te"
													>accessible name</a>&#160;[[accname-1.1]] of the element).</li>
										</ul>
										<p>If the resulting value of <code>name</code> is an empty string (e.g., after
											removing any presentational elements and trimming all leading and trailing
											whitespace), set the <code>name</code> property either to a placeholder
											value or to <code>null</code>.</p>
									</li>
									<li>Exit the element and continue processing with the next element.</li>
								</ol>
								<details>
									<summary>Explanation</summary>
									<p>This step identifies the heading for the table of contents. A heading is only
										processed if the value of the <em>toc</em>
										<code>name</code> property is an empty string (i.e., no headings have yet been
										encountered).</p>
									<p>Whether a user agent sets the <code>name</code> to the descendant content of the
										heading element, or generates a text string from it, depends on whether it will
										re-use any descendant tagging in the presentation (e.g., to retain images,
										MathML, ruby and other content that does not translate to text easily).</p>
									<pre class="example" title="Visualization of the toc object with a heading.">{
    "name"    : "Contents",
    "entries" : []
}</pre>
									<p>If the <code>name</code> is not an empty string, or is <code>null</code>, then a
										previous heading has already been encountered or content has been encountered
										that indicates the <code>nav</code> element does not have a heading (e.g., a
										list has already been processed, since the heading would not follow the list of
										links).</p>
									<pre class="example" title="Visualization of the toc object without a heading.">{
    "name"    : null,
    "entries" : []
}</pre>
									<p>If a heading is not specified, the user agent can provide its own for later
										use.</p>
								</details>
							</li>

							<li>
								<p>
									<strong>When entering a <a>list element</a>:</strong>
								</p>
								<p>Run these steps:</p>
								<ol>
									<li>
										<p>If the <code>name</code> property of <em>toc</em> is an empty string, set
												<code>name</code> to <code>null</code>.</p>
									</li>
									<li>
										<p>If <em>current toc branch</em> is not <code>null</code>:</p>
										<ol>
											<li>If the <code>entries</code> property of <em>current toc branch</em> is
													<code>null</code> or a non-empty array, exit the element and
												continue processing with the next element.</li>
											<li>Otherwise, push the object in <em>current toc branch</em> onto the stack
												and set <em>current toc branch</em> to <code>null</code>.</li>
										</ol>
									</li>
									<li>
										<p>Otherwise, if the stack is empty:</p>
										<ol>
											<li>If the <code>entries</code> property of <em>toc</em> is
													<code>null</code> or a non-empty array, exit the element and
												continue processing with the next element.</li>
											<li>Otherwise, do nothing.</li>
										</ol>
									</li>
								</ol>
								<details>
									<summary>Explanation</summary>
									<p>This algorithm does not process multiple lists in a single branch or at the root
										of the <code>nav</code> element, so if a list has already been encountered (the
											<code>entries</code> property contains one or more branches or is set to
											<code>null</code>), this list is skipped.</p>
									<p>If a list is encountered and the table of contents (<code>toc</code>) still does
										not have a name (i.e., no heading element has been encountered), the table of
										contents is assumed to not have a heading (i.e., the heading for the table of
										contents cannot appear after the first list of entries). The value of the
											<code>name</code> property is changed from an empty string to
											<code>null</code> as no further headings encountered apply, either.</p>
								</details>
							</li>

							<li>
								<p>
									<strong>When exiting a <a>list element</a>:</strong>
								</p>
								<p>If the stack is not empty, pop the top object off the stack and set <em>current toc
										branch</em> to it.</p>
								<details>
									<summary>Explanation</summary>
									<p>This resets <em>current toc branch</em> back to the parent object after all of
										its child branches have been processed.</p>
								</details>
							</li>

							<li>
								<p>
									<strong>When entering a <a
											href="https://www.w3.org/TR/html/grouping-content.html#the-li-element">list
											item</a> element:</strong>
								</p>
								<p>Run these steps:</p>
								<ol>
									<li>Set <em>current toc branch</em> to a new object.</li>

									<li>Create <code>name</code>, <code>url</code>, <code>type</code>, and
											<code>rel</code> properties for the object and set them to empty
										strings.</li>

									<li>Create an <code>entries</code> property for the object and set it to an empty
										array.</li>
								</ol>
								<details>
									<summary>Explanation</summary>
									<p>Each list item represents a possible new branch in the table of contents, so
										whenever one is encountered a new blank object is created in <em>current toc
											branch</em>.</p>
									<pre class="example" title="Visualization of a new branch object.">{
    "name"    : '',
    "url"     : '',
    "type"    : '',
    "rel"     : '',
    "entries" : []
}</pre>
									<p>This object gets populated with information as a descendant <code>a</code>
										element and list are encountered.</p>
								</details>
							</li>

							<li>
								<p>
									<strong>When exiting a <a
											href="https://www.w3.org/TR/html/grouping-content.html#the-li-element">list
											item</a> element:</strong>
								</p>
								<p>Run these steps:</p>
								<ol>
									<li>
										<p>If <code>entries</code> property of <em>current toc branch</em> contains an
											empty array, set its value to <code>null</code>.</p>
									</li>
									<li>
										<p>If the stack contains one or more entries:</p>
										<ol>
											<li>If the <code>entries</code> property of <em>current toc branch</em>
												contains a non-empty array, and its <code>name</code> property is an
												empty string, set its <code>name</code> to a placeholder value or
													<code>null</code>;</li>
											<li>If the <code>entries</code> property of <em>current toc branch</em>
												contains an empty array, and its <code>name</code> property is an empty
												string, set <em>current toc branch</em> to null and exit this processing
												step.</li>
										</ol>
										<p>Add <em>current toc branch</em> to the array in the <code>entries</code>
											property of the object at the top of the stack.</p>
									</li>
									<li>
										<p>Otherwise, add the object in <em>current toc branch</em> to the
												<code>entries</code> array of <em>toc</em>.</p>
									</li>

									<li>
										<p>Set <em>current toc branch</em> to <code>null</code>.</p>
									</li>
								</ol>
								<details>
									<summary>Explanation</summary>
									<p>Exiting a list item indicates that processing of the current branch is complete.
										Before adding this branch to its parent's <code>entries</code> array, the branch
										needs to be tested to see if it has a name and/or any sub-branches. If it does
										not have a name but has sub-branches, the branch is kept. The user agent can
										either supply a placeholder value of its own creation or set the value to null.
										If it does not have a name or any branches, it is invalid and is discarded.</p>
									<p>To determine where to merge the branch, the stack is checked. If there are no
										objects in the stack, it is added into the <code>entries</code> property of the
										root <em>toc</em> object (i.e., it is a top-level branch). Otherwise, it gets
										added into the <code>entries</code> property of the object immediately preceding
										it in the stack.</p>
									<p>As a final step, <em>current toc branch</em> is reset back to
										<code>null</code>.</p>
									<aside class="example" title="Visualization of a branch merge.">
										<p>If the following two objects are in <em>current toc branch</em></p>
										<pre>{
    "name"    : "Section 1",
    "url"     : "http://example.com/contents.html#s1",
    "type"    : "text/html",
    "rel"     : null,
    "entries" : []
},
{
    "name"    : "Section 1.1",
    "url"     : "http://example.com/contents.html#s1.1",
    "type"    : "text/html",
    "rel"     : null,
    "entries" : null
}</pre>
										<p>Then only the following single object remains after merging:</p>
										<pre>{
    "name"    : "Section 1",
    "url"     : "http://example.com/contents.html#s1",
    "type"    : "text/html",
    "rel"     : null,
    "entries" : [
        {
            "name"    : "Section 1.1",
            "url"     : "http://example.com/contents.html#s1.1",
            "type"    : "text/html",
            "rel"     : null,
            "entries" : null
        }
    ]
}</pre>
									</aside>
								</details>
							</li>

							<li>
								<p>
									<strong>When entering an <a
											href="https://www.w3.org/TR/html/textlevel-semantics.html#the-a-element"
											>anchor</a> element and <em>current toc branch</em> is not
										<code>null</code>:</strong>
								</p>
								<p>Run these steps:</p>
								<ol>
									<li>
										<p>If the <code>name</code> property of <em>current toc branch</em> is not an
											empty string, do nothing.</p>
									</li>
									<li>
										<p>Otherwise:</p>
										<ol>
											<li>
												<p>Set the <code>name</code> property of <em>current toc branch</em> to
													one of the following:</p>
												<ul>
													<li>the descendant content of the anchor element (to preserve any
														HTML tags);</li>
													<li>the text string obtained from the descendant content (e.g., by
														calculating the <a
															href="https://www.w3.org/TR/accname-1.1/#mapping_additional_nd_te"
															>accessible name</a>&#160;[[accname-1.1]] of the
														element).</li>
												</ul>
												<p>If the resulting value of <code>name</code> is an empty string (e.g.,
													after removing any presentational elements and trimming all leading
													and trailing whitespace), set the <code>name</code> property to
														<code>null</code>.</p>
											</li>
											<li>If the element has an <code>href</code> attribute and the URL in the
												attribute resolves to a resource in the <a>default reading order</a> or
													<a>resource list</a>, set the <code>url</code> property of
													<em>current toc branch</em> to the value. Otherwise, set the
												property to <code>null</code>.</li>
											<li>If the element has a <code>type</code> attribute, and the value of the
												attribute is not an empty string after trimming leading and trailing
												white space, set the <code>type</code> property of <em>current toc
													branch</em> to its value. Otherwise, set the property to
													<code>null</code>.</li>
											<li>If the element has a <code>rel</code> attribute, and the value of the
												attribute is not an empty string after trimming leading and trailing
												white space, set the <code>rel</code> property of <em>current toc
													branch</em> to its value. Otherwise, set the property to
													<code>null</code>.</li>
										</ol>
										<p>Exit the element and continue processing with the next element.</p>
									</li>
								</ol>
								<details>
									<summary>Explanation</summary>
									<p>This step processes anchor tags to obtain values for the <code>name</code> and
											<code>url</code> properties of a branch.</p>
									<p>If the name of the current branch is already defined, then processing of this
										element is terminated (i.e., to avoid processing multiple links for a single
										branch).</p>
									<p>Whether a user agent sets the <code>name</code> of the entry to the descendant
										content of the <code>a</code> element, or generates a text string from it,
										depends on whether it will re-use any descendant tagging in the presentation
										(e.g., to retain images, MathML, ruby and other content that does not translate
										to text easily).</p>
									<p>In addition to having an <code>href</code> attribute specified, it is necessary
										that it resolve to a resource that belongs to the digital publication to meet
										the requirements of this specification. If not, the branch is retained but the
										entry will not be linkable.</p>
									<p>Additional information about the target of the link — the type of resource and
										its relation — is also retained.</p>
									<pre class="example" title="Visualization of a link to an SVG image.">{
    "name"    : "In the Beginning",
    "url"     : "http://example.com/page1.svg",
    "type"    : "image/svg",
    "rel"     : null,
    "entries" : []
},</pre>
								</details>
							</li>

							<li>
								<p>
									<strong>When entering a <a
											href="https://www.w3.org/TR/html/dom.html#sectioning-content-2">sectioning
											content</a> element, a <a
											href="https://www.w3.org/TR/html/sections.html#sectioning-roots">sectioning
											root</a> element, or an element with a <a
											href="https://www.w3.org/TR/html/editing.html#element-attrdef-global-hidden"
											>hidden</a> attribute:</strong>
								</p>
								<p>Exit the element and continue processing with the next element.</p>
								<details>
									<summary>Explanation</summary>
									<p>As sectioning and sectioning root elements can define their own outlines,
										descending into them poses problems for generating the table of contents (i.e.,
										they may contain content that is not directly related). As a result, they are
										skipped over when encountered to prevent their child content from being
										processed.</p>
								</details>
							</li>

							<li>
								<p>
									<strong>Otherwise: do nothing.</strong>
								</p>
								<details>
									<summary>Explanation</summary>
									<p>For all other elements, this steps allows their descendant elements to continue
										to be processed.</p>
								</details>
							</li>
						</ol>
					</li>
					<li>
						<p>After completing the DOM walk, if the <em>entries</em> property of <em>toc</em> contains a
							non-empty array, <em>toc</em> represents the machine-processed table of contents.</p>
						<p>Otherwise, the digital publication does not have a table of contents that can be used for
							machine rendering purposes.</p>
						<details>
							<summary>Explanation</summary>
							<p>If the <code>entries</code> array in the root <em>toc</em> object does not contain any
								branches (either because no list was found in the <code>nav</code> element or the list
								did not contain any conforming list items), then the algorithm did not produce a usable
								table of contents.</p>
						</details>
					</li>
				</ol>
			</section>
		</section>
		<section id="app-manifest-examples" class="appendix informative">
			<h2>Manifest Examples</h2>

			<section>
				<h3>Basic Manifest</h3>

				<p>The following is a manifest with a basic set of metadata for an example book profile.</p>

				<p>A <a href="https://w3c.github.io/pub-manifest/experiments/separate_manifest/mobydick.jsonld">JSON
						encoding of the internal representation</a> of this manifest is also available.</p>

				<pre class="example" data-include="experiments/separate_manifest/mobydick-simple.jsonld" data-include-format="text"></pre>
			</section>

			<section>
				<h3>Single-Document Publication</h3>

				<p>The following is a manifest for an example article profile. The article consists only of the document
					the manifest is embedded in. The title and reading order are omitted from the manifest, as these
					properties are automatically generated during <a href="#manifest-processing">processing</a> from the
					title and URL of the containing document, respectively.</p>

				<p>A <a href="https://w3c.github.io/pub-manifest/experiments/w3c_rec/simple-canonical.jsonld">JSON
						encoding of the internal representation</a> of the manifest is also available, as well as a <a
						href="https://github.com/w3c/pub-manifest/blob/master/experiments/w3c_rec/full_version.html"
						>more elaborate version</a> for the same document.</p>

				<pre class="example" data-include="experiments/w3c_rec/simple_version.html" data-include-format="text"></pre>
			</section>

			<section>
				<h3>Audiobook</h3>

				<p>The following example shows a manifest that conforms to the <a
						href="https://www.w3.org/TR/audiobooks">Audiobooks profile</a> [[audiobooks]].</p>

				<p>A <a href="https://w3c.github.io/pub-manifest/experiments/audiobook/flatland-canonical.json">JSON
						encoding of the internal representation</a> of this manifest is also available.</p>

				<pre class="example" data-include="experiments/audiobook/flatland.json" data-include-format="text"></pre>
			</section>
		</section>
		<section id="properties-index" class="appendix informative">
			<h4>Properties Index</h4>

			<p>The following table identifies where manifest properties are defined and extended.</p>

			<table class="zebra">
				<thead>
					<tr>
						<th>Name</th>
						<th>Publication Manifest</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>
							<code>abridged</code>
						</td>
						<td>
							<a href="#abridged"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>accessMode</code>
						</td>
						<td>
							<a href="#accessibility"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>accessModeSufficient</code>
						</td>
						<td>
							<a href="#accessibility"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>accessibilityFeature</code>
						</td>
						<td>
							<a href="#accessibility"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>accessibilityHazard</code>
						</td>
						<td>
							<a href="#accessibility"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>accessibilitySummary</code>
						</td>
						<td>
							<a href="#accessibility"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>artist</code>
						</td>
						<td>
							<a href="#creators"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>author</code>
						</td>
						<td>
							<a href="#creators"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>conformsTo</code>
						</td>
						<td>
							<a href="#profile-conformance"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>@context</code>
						</td>
						<td>
							<a href="#manifest-context"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>contributor</code>
						</td>
						<td>
							<a href="#creators"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>creator</code>
						</td>
						<td>
							<a href="#creators"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>dateModified</code>
						</td>
						<td>
							<a href="#last-modification-date"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>datePublished</code>
						</td>
						<td>
							<a href="#publication-date"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>direction</code>
						</td>
						<td>
							<a href="#manifest-lang-dir-global"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>duration</code>
						</td>
						<td>
							<a href="#duration"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>editor</code>
						</td>
						<td>
							<a href="#creators"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>id</code>
						</td>
						<td><a href="#canonical-identifier"></a></td>
					</tr>
					<tr>
						<td>
							<code>illustrator</code>
						</td>
						<td>
							<a href="#creators"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>inker</code>
						</td>
						<td>
							<a href="#creators"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>inLanguage</code>
						</td>
						<td>
							<a href="inLaguage"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>language</code>
						</td>
						<td>
							<a href="#manifest-lang-dir-global"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>letterer</code>
						</td>
						<td>
							<a href="#creators"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>link</code>
						</td>
						<td>
							<a href="#links"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>name</code>
						</td>
						<td>
							<a href="#pub-title"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>penciler</code>
						</td>
						<td>
							<a href="#creators"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>publisher</code>
						</td>
						<td>
							<a href="#creators"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>readBy</code>
						</td>
						<td>
							<a href="#creators"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>readingOrder</code>
						</td>
						<td>
							<a href="#default-reading-order"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>readingProgression</code>
						</td>
						<td>
							<a href="#reading-progression-direction"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>resources</code>
						</td>
						<td>
							<a href="#resource-list"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>translator</code>
						</td>
						<td>
							<a href="#creators"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>type</code>
						</td>
						<td>
							<a href="#publication-types"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>url</code>
						</td>
						<td><a href="#address"></a></td>
					</tr>
				</tbody>
			</table>
		</section>
		<section id="rel-index" class="appendix informative">
			<h4>Resource Relations Index</h4>

			<p>The following table identifies where the use of resource relations is defined.</p>

			<table class="zebra">
				<thead>
					<tr>
						<th>Name</th>
						<th>Publication Manifest</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>
							<code>accessibility-report</code>
						</td>
						<td>
							<a href="#accessibility-report"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>contents</code>
						</td>
						<td>
							<a href="#pub-table-of-contents"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>cover</code>
						</td>
						<td>
							<a href="#cover"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>pagelist</code>
						</td>
						<td>
							<a href="#page-list"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>privacy-policy</code>
						</td>
						<td>
							<a href="#privacy-policy"></a>
						</td>
					</tr>
					<tr>
						<td>
							<code>preview</code>
						</td>
						<td>
							<a href="#preview"></a>
						</td>
					</tr>
				</tbody>
			</table>
		</section>
		<section id="ack" data-include="common/html/acknowledgements.html" data-include-replace="true"></section>
	</body>
</html>
